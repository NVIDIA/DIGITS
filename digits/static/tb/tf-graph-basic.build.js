//Copyright (c) 2017, NVIDIA CORPORATION.  All rights reserved.
//Copyright 2017 The TensorFlow Authors.  All rights reserved.

!function(){window.WebComponents=window.WebComponents||{flags:{}};var a="webcomponents-lite.js",b=document.querySelector('script[src*="'+a+'"]'),c={};if(!c.noOpts){if(location.search.slice(1).split("&").forEach(function(a){var b,d=a.split("=");d[0]&&(b=d[0].match(/wc-(.+)/))&&(c[b[1]]=d[1]||!0)}),b)for(var d,e=0;d=b.attributes[e];e++)"src"!==d.name&&(c[d.name]=d.value||!0);if(c.log&&c.log.split){var f=c.log.split(",");c.log={},f.forEach(function(a){c.log[a]=!0})}else c.log={}}c.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=c.register),WebComponents.flags=c}(),function(a){"use strict";function b(a){return void 0!==l[a]}function c(){h.call(this),this._isInvalid=!0}function d(a){return""==a&&c.call(this),a.toLowerCase()}function e(a){var b=a.charCodeAt(0);return b>32&&127>b&&-1==[34,35,60,62,63,96].indexOf(b)?a:encodeURIComponent(a)}function f(a){var b=a.charCodeAt(0);return b>32&&127>b&&-1==[34,35,60,62,96].indexOf(b)?a:encodeURIComponent(a)}function g(a,g,h){function i(a){t.push(a)}var j=g||"scheme start",k=0,q="",r=!1,s=!1,t=[];a:for(;(a[k-1]!=n||0==k)&&!this._isInvalid;){var u=a[k];switch(j){case"scheme start":if(!u||!o.test(u)){if(g){i("Invalid scheme.");break a}q="",j="no scheme";continue}q+=u.toLowerCase(),j="scheme";break;case"scheme":if(u&&p.test(u))q+=u.toLowerCase();else{if(":"!=u){if(g){if(n==u)break a;i("Code point not allowed in scheme: "+u);break a}q="",k=0,j="no scheme";continue}if(this._scheme=q,q="",g)break a;b(this._scheme)&&(this._isRelative=!0),j="file"==this._scheme?"relative":this._isRelative&&h&&h._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==u?(this._query="?",j="query"):"#"==u?(this._fragment="#",j="fragment"):n!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._schemeData+=e(u));break;case"no scheme":if(h&&b(h._scheme)){j="relative";continue}i("Missing scheme."),c.call(this);break;case"relative or authority":if("/"!=u||"/"!=a[k+1]){i("Expected /, got: "+u),j="relative";continue}j="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=h._scheme),n==u){this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query=h._query,this._username=h._username,this._password=h._password;break a}if("/"==u||"\\"==u)"\\"==u&&i("\\ is an invalid code point."),j="relative slash";else if("?"==u)this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query="?",this._username=h._username,this._password=h._password,j="query";else{if("#"!=u){var v=a[k+1],w=a[k+2];("file"!=this._scheme||!o.test(u)||":"!=v&&"|"!=v||n!=w&&"/"!=w&&"\\"!=w&&"?"!=w&&"#"!=w)&&(this._host=h._host,this._port=h._port,this._username=h._username,this._password=h._password,this._path=h._path.slice(),this._path.pop()),j="relative path";continue}this._host=h._host,this._port=h._port,this._path=h._path.slice(),this._query=h._query,this._fragment="#",this._username=h._username,this._password=h._password,j="fragment"}break;case"relative slash":if("/"!=u&&"\\"!=u){"file"!=this._scheme&&(this._host=h._host,this._port=h._port,this._username=h._username,this._password=h._password),j="relative path";continue}"\\"==u&&i("\\ is an invalid code point."),j="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=u){i("Expected '/', got: "+u),j="authority ignore slashes";continue}j="authority second slash";break;case"authority second slash":if(j="authority ignore slashes","/"!=u){i("Expected '/', got: "+u);continue}break;case"authority ignore slashes":if("/"!=u&&"\\"!=u){j="authority";continue}i("Expected authority, got: "+u);break;case"authority":if("@"==u){r&&(i("@ already seen."),q+="%40"),r=!0;for(var x=0;x<q.length;x++){var y=q[x];if("\t"!=y&&"\n"!=y&&"\r"!=y)if(":"!=y||null!==this._password){var z=e(y);null!==this._password?this._password+=z:this._username+=z}else this._password="";else i("Invalid whitespace in authority.")}q=""}else{if(n==u||"/"==u||"\\"==u||"?"==u||"#"==u){k-=q.length,q="",j="host";continue}q+=u}break;case"file host":if(n==u||"/"==u||"\\"==u||"?"==u||"#"==u){2!=q.length||!o.test(q[0])||":"!=q[1]&&"|"!=q[1]?0==q.length?j="relative path start":(this._host=d.call(this,q),q="",j="relative path start"):j="relative path";continue}"\t"==u||"\n"==u||"\r"==u?i("Invalid whitespace in file host."):q+=u;break;case"host":case"hostname":if(":"!=u||s){if(n==u||"/"==u||"\\"==u||"?"==u||"#"==u){if(this._host=d.call(this,q),q="",j="relative path start",g)break a;continue}"\t"!=u&&"\n"!=u&&"\r"!=u?("["==u?s=!0:"]"==u&&(s=!1),q+=u):i("Invalid code point in host/hostname: "+u)}else if(this._host=d.call(this,q),q="",j="port","hostname"==g)break a;break;case"port":if(/[0-9]/.test(u))q+=u;else{if(n==u||"/"==u||"\\"==u||"?"==u||"#"==u||g){if(""!=q){var A=parseInt(q,10);A!=l[this._scheme]&&(this._port=A+""),q=""}if(g)break a;j="relative path start";continue}"\t"==u||"\n"==u||"\r"==u?i("Invalid code point in port: "+u):c.call(this)}break;case"relative path start":if("\\"==u&&i("'\\' not allowed in path."),j="relative path","/"!=u&&"\\"!=u)continue;break;case"relative path":if(n!=u&&"/"!=u&&"\\"!=u&&(g||"?"!=u&&"#"!=u))"\t"!=u&&"\n"!=u&&"\r"!=u&&(q+=e(u));else{"\\"==u&&i("\\ not allowed in relative path.");var B;(B=m[q.toLowerCase()])&&(q=B),".."==q?(this._path.pop(),"/"!=u&&"\\"!=u&&this._path.push("")):"."==q&&"/"!=u&&"\\"!=u?this._path.push(""):"."!=q&&("file"==this._scheme&&0==this._path.length&&2==q.length&&o.test(q[0])&&"|"==q[1]&&(q=q[0]+":"),this._path.push(q)),q="","?"==u?(this._query="?",j="query"):"#"==u&&(this._fragment="#",j="fragment")}break;case"query":g||"#"!=u?n!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._query+=f(u)):(this._fragment="#",j="fragment");break;case"fragment":n!=u&&"\t"!=u&&"\n"!=u&&"\r"!=u&&(this._fragment+=u)}k++}}function h(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function i(a,b){void 0===b||b instanceof i||(b=new i(String(b))),this._url=a,h.call(this);var c=a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");g.call(this,c,null,b)}var j=!1;if(!a.forceJURL)try{var k=new URL("b","http://a");k.pathname="c%20d",j="http://a/c%20d"===k.href}catch(a){}if(!j){var l=Object.create(null);l.ftp=21,l.file=0,l.gopher=70,l.http=80,l.https=443,l.ws=80,l.wss=443;var m=Object.create(null);m["%2e"]=".",m[".%2e"]="..",m["%2e."]="..",m["%2e%2e"]="..";var n=void 0,o=/[a-zA-Z]/,p=/[a-zA-Z0-9\+\-\.]/;i.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var a="";return(""!=this._username||null!=this._password)&&(a=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+a+this.host:"")+this.pathname+this._query+this._fragment},set href(a){h.call(this),g.call(this,a)},get protocol(){return this._scheme+":"},set protocol(a){this._isInvalid||g.call(this,a+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"host")},get hostname(){return this._host},set hostname(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"hostname")},get port(){return this._port},set port(a){!this._isInvalid&&this._isRelative&&g.call(this,a,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(a){!this._isInvalid&&this._isRelative&&(this._path=[],g.call(this,a,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(a){!this._isInvalid&&this._isRelative&&(this._query="?","?"==a[0]&&(a=a.slice(1)),g.call(this,a,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(a){this._isInvalid||(this._fragment="#","#"==a[0]&&(a=a.slice(1)),g.call(this,a,"fragment"))},get origin(){var a;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return a=this.host,a?this._scheme+"://"+a:""}};var q=a.URL;q&&(i.createObjectURL=function(a){return q.createObjectURL.apply(q,arguments)},i.revokeObjectURL=function(a){q.revokeObjectURL(a)}),a.URL=i}}(self),"undefined"==typeof WeakMap&&!function(){var a=Object.defineProperty,b=Date.now()%1e9,c=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")};c.prototype={set:function(b,c){var d=b[this.name];return d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0}),this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},delete:function(a){var b=a[this.name];return!(!b||b[0]!==a)&&(b[0]=b[1]=void 0,!0)},has:function(a){var b=a[this.name];return!!b&&b[0]===a}},window.WeakMap=c}(),function(a){function b(a){u.push(a),t||(t=!0,p(d))}function c(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function d(){t=!1;var a=u;u=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();e(a),c.length&&(a.callback_(c,a),b=!0)}),b&&d()}function e(a){a.nodes_.forEach(function(b){var c=q.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function f(a,b){for(var c=a;c;c=c.parentNode){var d=q.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function g(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++v}function h(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function i(a){var b=new h(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function j(a,b){return w=new h(a,b)}function k(a){return x?x:(x=i(w),x.oldValue=a,x)}function l(){w=x=void 0}function m(a){return a===x||a===w}function n(a,b){return a===b?a:x&&m(a)?x:null}function o(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}if(!a.JsMutationObserver){var p,q=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))p=setTimeout;else if(window.setImmediate)p=window.setImmediate;else{var r=[],s=String(Math.random());window.addEventListener("message",function(a){if(a.data===s){var b=r;r=[],b.forEach(function(a){a()})}}),p=function(a){r.push(a),window.postMessage(s,"*")}}var t=!1,u=[],v=0;g.prototype={observe:function(a,b){if(a=c(a),!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=q.get(a);d||q.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=b;break}e||(e=new o(this,a,b),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=q.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var w,x;o.prototype={enqueue:function(a){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=n(e,a);if(f)return void(c[d-1]=f)}else b(this.observer);c[d]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0),b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0),b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=q.get(a);b||q.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=q.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case"DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,e=new j("attributes",d);e.attributeName=b,e.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;f(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?k(g):e});break;case"DOMCharacterDataModified":var d=a.target,e=j("characterData",d),g=a.prevValue;f(d,function(a){return a.characterData?a.characterDataOldValue?k(g):e:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(a.target);case"DOMNodeInserted":var h,i,m=a.target;"DOMNodeInserted"===a.type?(h=[m],i=[]):(h=[],i=[m]);var n=m.previousSibling,o=m.nextSibling,e=j("childList",a.target.parentNode);e.addedNodes=h,e.removedNodes=i,e.previousSibling=n,e.nextSibling=o,f(a.relatedNode,function(a){return a.childList?e:void 0})}l()}},a.JsMutationObserver=g,a.MutationObserver||(a.MutationObserver=g,g._isPolyfilled=!0)}}(self),"undefined"==typeof HTMLTemplateElement&&!function(){function a(a){switch(a){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}function b(b){return b.replace(g,a)}var c="template",d=document.implementation.createHTMLDocument("template"),e=!0;HTMLTemplateElement=function(){},HTMLTemplateElement.prototype=Object.create(HTMLElement.prototype),HTMLTemplateElement.decorate=function(a){a.content||(a.content=d.createDocumentFragment());for(var c;c=a.firstChild;)a.content.appendChild(c);if(e)try{Object.defineProperty(a,"innerHTML",{get:function(){for(var a="",c=this.content.firstChild;c;c=c.nextSibling)a+=c.outerHTML||b(c.data);return a},set:function(a){for(d.body.innerHTML=a,HTMLTemplateElement.bootstrap(d);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;d.body.firstChild;)this.content.appendChild(d.body.firstChild)},configurable:!0})}catch(a){e=!1}},HTMLTemplateElement.bootstrap=function(a){for(var b,d=a.querySelectorAll(c),e=0,f=d.length;f>e&&(b=d[e]);e++)HTMLTemplateElement.decorate(b)},document.addEventListener("DOMContentLoaded",function(){HTMLTemplateElement.bootstrap(document)});var f=document.createElement;document.createElement=function(){"use strict";var a=f.apply(document,arguments);return"template"==a.localName&&HTMLTemplateElement.decorate(a),a};var g=/[&\u00A0<>]/g}(),function(a){"use strict";if(!window.performance){var b=Date.now();window.performance={now:function(){return Date.now()-b}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var a=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return a?function(b){return a(function(){b(performance.now())})}:function(a){return window.setTimeout(a,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(a){clearTimeout(a)}}());var c=function(){var a=document.createEvent("Event");return a.initEvent("foo",!0,!0),a.preventDefault(),a.defaultPrevented}();if(!c){var d=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(d.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}))}}var e=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||e&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(a,b){b=b||{};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,Boolean(b.bubbles),Boolean(b.cancelable),b.detail),c},window.CustomEvent.prototype=window.Event.prototype),!window.Event||e&&"function"!=typeof window.Event){var f=window.Event;window.Event=function(a,b){b=b||{};var c=document.createEvent("Event");return c.initEvent(a,Boolean(b.bubbles),Boolean(b.cancelable)),c},window.Event.prototype=f.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(a){function b(a,b){b=b||o,d(function(){f(a,b)},b)}function c(a){return"complete"===a.readyState||a.readyState===r}function d(a,b){if(c(b))a&&a();else{var e=function(){("complete"===b.readyState||b.readyState===r)&&(b.removeEventListener(s,e),d(a,b))};b.addEventListener(s,e)}}function e(a){a.target.__loaded=!0}function f(a,b){function c(){i==j&&a&&a({allImports:h,loadedImports:k,errorImports:l})}function d(a){e(a),k.push(this),i++,c()}function f(a){l.push(this),i++,c()}var h=b.querySelectorAll("link[rel=import]"),i=0,j=h.length,k=[],l=[];if(j)for(var m,n=0;j>n&&(m=h[n]);n++)g(m)?(i++,c()):(m.addEventListener("load",d),m.addEventListener("error",f));else c()}function g(a){return l?a.__loaded||a.import&&"loading"!==a.import.readyState:a.__importParsed}function h(a){for(var b,c=0,d=a.length;d>c&&(b=a[c]);c++)i(b)&&j(b)}function i(a){return"link"===a.localName&&"import"===a.rel}function j(a){var b=a.import;b?e({target:a}):(a.addEventListener("load",e),a.addEventListener("error",e))}var k="import",l=Boolean(k in document.createElement("link")),m=Boolean(window.ShadowDOMPolyfill),n=function(a){return m?window.ShadowDOMPolyfill.wrapIfNeeded(a):a},o=n(document),p={get:function(){var a=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return n(a)},configurable:!0};Object.defineProperty(document,"_currentScript",p),Object.defineProperty(o,"_currentScript",p);var q=/Trident/.test(navigator.userAgent),r=q?"complete":"interactive",s="readystatechange";l&&(new MutationObserver(function(a){for(var b,c=0,d=a.length;d>c&&(b=a[c]);c++)b.addedNodes&&h(b.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var a,b=document.querySelectorAll("link[rel=import]"),c=0,d=b.length;d>c&&(a=b[c]);c++)j(a)}()),b(function(a){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var b=o.createEvent("CustomEvent");b.initCustomEvent("HTMLImportsLoaded",!0,!0,a),o.dispatchEvent(b)}),a.IMPORT_LINK_TYPE=k,a.useNative=l,a.rootDocument=o,a.whenReady=b,a.isIE=q}(window.HTMLImports),function(a){var b=[],c=function(a){b.push(a)},d=function(){b.forEach(function(b){b(a)})};a.addModule=c,a.initializeModules=d}(window.HTMLImports),window.HTMLImports.addModule(function(a){var b=/(url\()([^)]*)(\))/g,c=/(@import[\s]+(?!url\())([^;]*)(;)/g,d={resolveUrlsInStyle:function(a,b){var c=a.ownerDocument,d=c.createElement("a");return a.textContent=this.resolveUrlsInCssText(a.textContent,b,d),a},resolveUrlsInCssText:function(a,d,e){var f=this.replaceUrls(a,e,d,b);return f=this.replaceUrls(f,e,d,c)},replaceUrls:function(a,b,c,d){return a.replace(d,function(a,d,e,f){var g=e.replace(/["']/g,"");return c&&(g=new URL(g,c).href),b.href=g,g=b.href,d+"'"+g+"'"+f})}};a.path=d}),window.HTMLImports.addModule(function(a){var b={async:!0,ok:function(a){return a.status>=200&&a.status<300||304===a.status||0===a.status},load:function(c,d,e){var f=new XMLHttpRequest;return(a.flags.debug||a.flags.bust)&&(c+="?"+Math.random()),f.open("GET",c,b.async),f.addEventListener("readystatechange",function(a){if(4===f.readyState){var c=null;try{var g=f.getResponseHeader("Location");g&&(c="/"===g.substr(0,1)?location.origin+g:g)}catch(a){console.error(a.message)}d.call(e,!b.ok(f)&&f,f.response||f.responseText,c)}}),f.send(),f},loadDocument:function(a,b,c){this.load(a,b,c).responseType="document"}};a.xhr=b}),window.HTMLImports.addModule(function(a){var b=a.xhr,c=a.flags,d=function(a,b){this.cache={},this.onload=a,this.oncomplete=b,this.inflight=0,this.pending={}};d.prototype={addNodes:function(a){this.inflight+=a.length;for(var b,c=0,d=a.length;d>c&&(b=a[c]);c++)this.require(b);this.checkDone()},addNode:function(a){this.inflight++,this.require(a),this.checkDone()},require:function(a){var b=a.src||a.href;a.__nodeUrl=b,this.dedupe(b,a)||this.fetch(b,a)},dedupe:function(a,b){return this.pending[a]?(this.pending[a].push(b),!0):this.cache[a]?(this.onload(a,b,this.cache[a]),this.tail(),!0):(this.pending[a]=[b],!1)},fetch:function(a,d){if(c.load&&console.log("fetch",a,d),a)if(a.match(/^data:/)){var e=a.split(","),f=e[0],g=e[1];g=f.indexOf(";base64")>-1?atob(g):decodeURIComponent(g),setTimeout(function(){this.receive(a,d,null,g)}.bind(this),0)}else{var h=function(b,c,e){this.receive(a,d,b,c,e)}.bind(this);b.load(a,h)}else setTimeout(function(){this.receive(a,d,{error:"href must be specified"},null)}.bind(this),0)},receive:function(a,b,c,d,e){this.cache[a]=d;for(var f,g=this.pending[a],h=0,i=g.length;i>h&&(f=g[h]);h++)this.onload(a,f,d,c,e),this.tail();this.pending[a]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},a.Loader=d}),window.HTMLImports.addModule(function(a){var b=function(a){this.addCallback=a,this.mo=new MutationObserver(this.handler.bind(this))};b.prototype={handler:function(a){for(var b,c=0,d=a.length;d>c&&(b=a[c]);c++)"childList"===b.type&&b.addedNodes.length&&this.addedNodes(b.addedNodes)},addedNodes:function(a){this.addCallback&&this.addCallback(a);for(var b,c=0,d=a.length;d>c&&(b=a[c]);c++)b.children&&b.children.length&&this.addedNodes(b.children)},observe:function(a){this.mo.observe(a,{childList:!0,subtree:!0})}},a.Observer=b}),window.HTMLImports.addModule(function(a){function b(a){return"link"===a.localName&&a.rel===k}function c(a){var b=d(a);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(b)}function d(a){return a.textContent+e(a)}function e(a){var b=a.ownerDocument;b.__importedScripts=b.__importedScripts||0;var c=a.ownerDocument.baseURI,d=b.__importedScripts?"-"+b.__importedScripts:"";return b.__importedScripts++,"\n//# sourceURL="+c+d+".js\n"}function f(a){var b=a.ownerDocument.createElement("style");return b.textContent=a.textContent,g.resolveUrlsInStyle(b),b}var g=a.path,h=a.rootDocument,i=a.flags,j=a.isIE,k=a.IMPORT_LINK_TYPE,l="link[rel="+k+"]",m={documentSelectors:l,importsSelectors:[l,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var a=this.nextToParse();a&&this.parse(a)},parse:function(a){if(this.isParsed(a))return void(i.parse&&console.log("[%s] is already parsed",a.localName));var b=this[this.map[a.localName]];b&&(this.markParsing(a),b.call(this,a))},parseDynamic:function(a,b){this.dynamicElements.push(a),b||this.parseNext()},markParsing:function(a){i.parse&&console.log("parsing",a),this.parsingElement=a},markParsingComplete:function(a){a.__importParsed=!0,this.markDynamicParsingComplete(a),a.__importElement&&(a.__importElement.__importParsed=!0,this.markDynamicParsingComplete(a.__importElement)),this.parsingElement=null,i.parse&&console.log("completed",a)},markDynamicParsingComplete:function(a){var b=this.dynamicElements.indexOf(a);b>=0&&this.dynamicElements.splice(b,1)},parseImport:function(a){if(a.import=a.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(a),a.import&&(a.import.__importParsed=!0),this.markParsingComplete(a),a.__resource&&!a.__error?a.dispatchEvent(new CustomEvent("load",{bubbles:!1})):a.dispatchEvent(new CustomEvent("error",{bubbles:!1})),a.__pending)for(var b;a.__pending.length;)b=a.__pending.shift(),b&&b({target:a});this.parseNext()},parseLink:function(a){b(a)?this.parseImport(a):(a.href=a.href,this.parseGeneric(a))},parseStyle:function(a){var b=a;a=f(a),b.__appliedElement=a,a.__importElement=b,this.parseGeneric(a)},parseGeneric:function(a){this.trackElement(a),this.addElementToDocument(a)},rootImportForElement:function(a){for(var b=a;b.ownerDocument.__importLink;)b=b.ownerDocument.__importLink;return b},addElementToDocument:function(a){var b=this.rootImportForElement(a.__importElement||a);b.parentNode.insertBefore(a,b)},trackElement:function(a,b){var c=this,d=function(e){a.removeEventListener("load",d),a.removeEventListener("error",d),b&&b(e),c.markParsingComplete(a),c.parseNext()};if(a.addEventListener("load",d),a.addEventListener("error",d),j&&"style"===a.localName){var e=!1;if(-1==a.textContent.indexOf("@import"))e=!0;else if(a.sheet){e=!0;for(var f,g=a.sheet.cssRules,h=g?g.length:0,i=0;h>i&&(f=g[i]);i++)f.type===CSSRule.IMPORT_RULE&&(e=e&&Boolean(f.styleSheet))}e&&setTimeout(function(){a.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(b){var d=document.createElement("script");d.__importElement=b,d.src=b.src?b.src:c(b),a.currentScript=b,this.trackElement(d,function(b){d.parentNode&&d.parentNode.removeChild(d),a.currentScript=null}),this.addElementToDocument(d)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(h)||this.nextToParseDynamic())},nextToParseInDoc:function(a,c){if(a&&this._mayParse.indexOf(a)<0){this._mayParse.push(a);for(var d,e=a.querySelectorAll(this.parseSelectorsForNode(a)),f=0,g=e.length;g>f&&(d=e[f]);f++)if(!this.isParsed(d))return this.hasResource(d)?b(d)?this.nextToParseInDoc(d.__doc,d):d:void 0}return c},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(a){var b=a.ownerDocument||a;return b===h?this.documentSelectors:this.importsSelectors},isParsed:function(a){return a.__importParsed},needsDynamicParsing:function(a){return this.dynamicElements.indexOf(a)>=0},hasResource:function(a){return!b(a)||void 0!==a.__doc}};a.parser=m,a.IMPORT_SELECTOR=l}),window.HTMLImports.addModule(function(a){function b(a){return c(a,g)}function c(a,b){return"link"===a.localName&&a.getAttribute("rel")===b}function d(a){return!!Object.getOwnPropertyDescriptor(a,"baseURI")}function e(a,b){var c=document.implementation.createHTMLDocument(g);c._URL=b;var e=c.createElement("base");e.setAttribute("href",b),c.baseURI||d(c)||Object.defineProperty(c,"baseURI",{value:b});var f=c.createElement("meta");return f.setAttribute("charset","utf-8"),c.head.appendChild(f),c.head.appendChild(e),c.body.innerHTML=a,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(c),c}var f=a.flags,g=a.IMPORT_LINK_TYPE,h=a.IMPORT_SELECTOR,i=a.rootDocument,j=a.Loader,k=a.Observer,l=a.parser,m={documents:{},documentPreloadSelectors:h,importsPreloadSelectors:[h].join(","),loadNode:function(a){n.addNode(a)},loadSubtree:function(a){var b=this.marshalNodes(a);n.addNodes(b)},marshalNodes:function(a){return a.querySelectorAll(this.loadSelectorsForNode(a))},loadSelectorsForNode:function(a){var b=a.ownerDocument||a;return b===i?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(a,c,d,g,h){if(f.load&&console.log("loaded",a,c),c.__resource=d,c.__error=g,b(c)){var i=this.documents[a];void 0===i&&(i=g?null:e(d,h||a),i&&(i.__importLink=c,this.bootDocument(i)),this.documents[a]=i),c.__doc=i}l.parseNext()},bootDocument:function(a){this.loadSubtree(a),this.observer.observe(a),l.parseNext()},loadedAll:function(){l.parseNext()}},n=new j(m.loaded.bind(m),m.loadedAll.bind(m));if(m.observer=new k,!document.baseURI){var o={get:function(){var a=document.querySelector("base");return a?a.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",o),Object.defineProperty(i,"baseURI",o)}a.importer=m,a.importLoader=n}),window.HTMLImports.addModule(function(a){var b=a.parser,c=a.importer,d={added:function(a){for(var d,e,f,g,h=0,i=a.length;i>h&&(g=a[h]);h++)d||(d=g.ownerDocument,e=b.isParsed(d)),f=this.shouldLoadNode(g),f&&c.loadNode(g),this.shouldParseNode(g)&&e&&b.parseDynamic(g,f)},shouldLoadNode:function(a){return 1===a.nodeType&&e.call(a,c.loadSelectorsForNode(a))},shouldParseNode:function(a){return 1===a.nodeType&&e.call(a,b.parseSelectorsForNode(a))}};c.observer.addCallback=d.added.bind(d);var e=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(a){function b(){window.HTMLImports.importer.bootDocument(d)}var c=a.initializeModules;if(a.isIE,!a.useNative){c();var d=a.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?b():document.addEventListener("DOMContentLoaded",b)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(a){var b=a.flags,c=[],d=function(a){c.push(a)},e=function(){c.forEach(function(b){b(a)})};a.addModule=d,a.initializeModules=e,a.hasNative=Boolean(document.registerElement),a.isIE=/Trident/.test(navigator.userAgent),a.useNative=!b.register&&a.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(a){function b(a,b){c(a,function(a){return!!b(a)||void d(a,b)}),d(a,b)}function c(a,b,d){var e=a.firstElementChild;if(!e)for(e=a.firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;for(;e;)b(e,d)!==!0&&c(e,b,d),e=e.nextElementSibling;return null}function d(a,c){for(var d=a.shadowRoot;d;)b(d,c),d=d.olderShadowRoot}function e(a,b){f(a,b,[])}function f(a,b,c){if(a=window.wrap(a),!(c.indexOf(a)>=0)){c.push(a);for(var d,e=a.querySelectorAll("link[rel="+g+"]"),h=0,i=e.length;i>h&&(d=e[h]);h++)d.import&&f(d.import,b,c);b(a)}}var g=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";a.forDocumentTree=e,a.forSubtree=b}),window.CustomElements.addModule(function(a){function b(a,b){return c(a,b)||d(a,b)}function c(b,c){return!!a.upgrade(b,c)||void(c&&g(b))}function d(a,b){t(a,function(a){return!!c(a,b)||void 0})}function e(a){x.push(a),w||(w=!0,setTimeout(f))}function f(){w=!1;for(var a,b=x,c=0,d=b.length;d>c&&(a=b[c]);c++)a();x=[]}function g(a){v?e(function(){h(a)}):h(a)}function h(a){a.__upgraded__&&!a.__attached&&(a.__attached=!0,a.attachedCallback&&a.attachedCallback())}function i(a){j(a),t(a,function(a){j(a)})}function j(a){v?e(function(){k(a)}):k(a)}function k(a){a.__upgraded__&&a.__attached&&(a.__attached=!1,a.detachedCallback&&a.detachedCallback())}function l(a){for(var b=a,c=window.wrap(document);b;){if(b==c)return!0;b=b.parentNode||b.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&b.host}}function m(a){if(a.shadowRoot&&!a.shadowRoot.__watched){s.dom&&console.log("watching shadow-root for: ",a.localName);for(var b=a.shadowRoot;b;)p(b),b=b.olderShadowRoot}}function n(a,c){if(s.dom){var d=c[0];if(d&&"childList"===d.type&&d.addedNodes&&d.addedNodes){for(var e=d.addedNodes[0];e&&e!==document&&!e.host;)e=e.parentNode;var f=e&&(e.URL||e._URL||e.host&&e.host.localName)||"";f=f.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",c.length,f||"")}var g=l(a);c.forEach(function(a){"childList"===a.type&&(y(a.addedNodes,function(a){a.localName&&b(a,g)}),y(a.removedNodes,function(a){a.localName&&i(a)}))}),s.dom&&console.groupEnd()}function o(a){for(a=window.wrap(a),a||(a=window.wrap(document));a.parentNode;)a=a.parentNode;var b=a.__observer;b&&(n(a,b.takeRecords()),f())}function p(a){if(!a.__observer){var b=new MutationObserver(n.bind(this,a));b.observe(a,{childList:!0,subtree:!0}),a.__observer=b}}function q(a){a=window.wrap(a),s.dom&&console.group("upgradeDocument: ",a.baseURI.split("/").pop());var c=a===window.wrap(document);b(a,c),p(a),s.dom&&console.groupEnd();
}function r(a){u(a,q)}var s=a.flags,t=a.forSubtree,u=a.forDocumentTree,v=window.MutationObserver._isPolyfilled&&s["throttle-attached"];a.hasPolyfillMutations=v,a.hasThrottledAttached=v;var w=!1,x=[],y=Array.prototype.forEach.call.bind(Array.prototype.forEach),z=Element.prototype.createShadowRoot;z&&(Element.prototype.createShadowRoot=function(){var a=z.call(this);return window.CustomElements.watchShadow(this),a}),a.watchShadow=m,a.upgradeDocumentTree=r,a.upgradeDocument=q,a.upgradeSubtree=d,a.upgradeAll=b,a.attached=g,a.takeRecords=o}),window.CustomElements.addModule(function(a){function b(b,d){if(!b.__upgraded__&&b.nodeType===Node.ELEMENT_NODE){var e=b.getAttribute("is"),f=a.getRegisteredDefinition(b.localName)||a.getRegisteredDefinition(e);if(f&&(e&&f.tag==b.localName||!e&&!f.extends))return c(b,f,d)}}function c(b,c,e){return g.upgrade&&console.group("upgrade:",b.localName),c.is&&b.setAttribute("is",c.is),d(b,c),b.__upgraded__=!0,f(b),e&&a.attached(b),a.upgradeSubtree(b,e),g.upgrade&&console.groupEnd(),b}function d(a,b){Object.__proto__?a.__proto__=b.prototype:(e(a,b.prototype,b.native),a.__proto__=b.prototype)}function e(a,b,c){for(var d={},e=b;e!==c&&e!==HTMLElement.prototype;){for(var f,g=Object.getOwnPropertyNames(e),h=0;f=g[h];h++)d[f]||(Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(e,f)),d[f]=1);e=Object.getPrototypeOf(e)}}function f(a){a.createdCallback&&a.createdCallback()}var g=a.flags;a.upgrade=b,a.upgradeWithDefinition=c,a.implementPrototype=d}),window.CustomElements.addModule(function(a){function b(b,d){var i=d||{};if(!b)throw new Error("document.registerElement: first argument `name` must not be empty");if(b.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(b)+"'.");if(e(b))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(b)+"'. The type name is invalid.");if(j(b))throw new Error("DuplicateDefinitionError: a type with name '"+String(b)+"' is already registered");return i.prototype||(i.prototype=Object.create(HTMLElement.prototype)),i.__name=b.toLowerCase(),i.lifecycle=i.lifecycle||{},i.ancestry=f(i.extends),g(i),h(i),c(i.prototype),k(i.__name,i),i.ctor=l(i),i.ctor.prototype=i.prototype,i.prototype.constructor=i.ctor,a.ready&&r(document),i.ctor}function c(a){if(!a.setAttribute._polyfilled){var b=a.setAttribute;a.setAttribute=function(a,c){d.call(this,a,c,b)};var c=a.removeAttribute;a.removeAttribute=function(a){d.call(this,a,null,c)},a.setAttribute._polyfilled=!0}}function d(a,b,c){a=a.toLowerCase();var d=this.getAttribute(a);c.apply(this,arguments);var e=this.getAttribute(a);this.attributeChangedCallback&&e!==d&&this.attributeChangedCallback(a,d,e)}function e(a){for(var b=0;b<w.length;b++)if(a===w[b])return!0}function f(a){var b=j(a);return b?f(b.extends).concat([b]):[]}function g(a){for(var b,c=a.extends,d=0;b=a.ancestry[d];d++)c=b.is&&b.tag;a.tag=c||a.__name,c&&(a.is=a.__name)}function h(a){if(!Object.__proto__){var b=HTMLElement.prototype;if(a.is){var c=document.createElement(a.tag);b=Object.getPrototypeOf(c)}for(var d,e=a.prototype,f=!1;e;)e==b&&(f=!0),d=Object.getPrototypeOf(e),d&&(e.__proto__=d),e=d;f||console.warn(a.tag+" prototype not found in prototype chain for "+a.is),a.native=b}}function i(a){return t(z(a.tag),a)}function j(a){return a?x[a.toLowerCase()]:void 0}function k(a,b){x[a]=b}function l(a){return function(){return i(a)}}function m(a,b,c){return a===y?n(b,c):A(a,b)}function n(a,b){a&&(a=a.toLowerCase()),b&&(b=b.toLowerCase());var c=j(b||a);if(c){if(a==c.tag&&b==c.is)return new c.ctor;if(!b&&!c.is)return new c.ctor}var d;return b?(d=n(a),d.setAttribute("is",b),d):(d=z(a),a.indexOf("-")>=0&&u(d,HTMLElement),d)}function o(a,b){var c=a[b];a[b]=function(){var a=c.apply(this,arguments);return s(a),a}}var p,q=a.isIE,r=a.upgradeDocumentTree,s=a.upgradeAll,t=a.upgradeWithDefinition,u=a.implementPrototype,v=a.useNative,w=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],x={},y="http://www.w3.org/1999/xhtml",z=document.createElement.bind(document),A=document.createElementNS.bind(document);p=Object.__proto__||v?function(a,b){return a instanceof b}:function(a,b){if(a instanceof b)return!0;for(var c=a;c;){if(c===b.prototype)return!0;c=c.__proto__}return!1},o(Node.prototype,"cloneNode"),o(document,"importNode"),q&&!function(){var a=document.importNode;document.importNode=function(){var b=a.apply(document,arguments);if(b.nodeType==b.DOCUMENT_FRAGMENT_NODE){var c=document.createDocumentFragment();return c.appendChild(b),c}return b}}(),document.registerElement=b,document.createElement=n,document.createElementNS=m,a.registry=x,a.instanceof=p,a.reservedTagList=w,a.getRegisteredDefinition=j,document.register=document.registerElement}),function(a){function b(){f(window.wrap(document)),window.CustomElements.ready=!0;var a=window.requestAnimationFrame||function(a){setTimeout(a,16)};a(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var c=a.useNative,d=a.initializeModules;if(a.isIE,c){var e=function(){};a.watchShadow=e,a.upgrade=e,a.upgradeAll=e,a.upgradeDocumentTree=e,a.upgradeSubtree=e,a.takeRecords=e,a.instanceof=function(a,b){return a instanceof b}}else d();var f=a.upgradeDocumentTree,g=a.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(a){return a}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(a){a.import&&g(wrap(a.import))}),"complete"===document.readyState||a.flags.eager)b();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var h=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(h,b)}else b()}(window.CustomElements),function(a){var b=document.createElement("style");b.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var c=document.querySelector("head");c.insertBefore(b,c.firstChild)}(window.WebComponents),function(){function a(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",a):"interactive"===document.readyState||"complete"===document.readyState?a():addEventListener("DOMContentLoaded",a)}(),window.Polymer={Settings:function(){var a=window.Polymer||{};location.search.slice(1).split("&").forEach(function(b){b=b.split("="),b[0]&&(a[b[0]]=b[1]||!0)});var b="shadow"===a.dom,c=Boolean(Element.prototype.createShadowRoot),d=c&&!window.ShadowDOMPolyfill,e=b&&c,f=Boolean("import"in document.createElement("link")),g=f,h=!window.CustomElements||window.CustomElements.useNative;return{wantShadow:b,hasShadow:c,nativeShadow:d,useShadow:e,useNativeShadow:e&&d,useNativeImports:g,useNativeCustomElements:h}}()},function(){var a=window.Polymer;window.Polymer=function(a){"function"==typeof a&&(a=a.prototype),a||(a={});var c=b(a);a=c.prototype;var d={prototype:a};return a.extends&&(d.extends=a.extends),Polymer.telemetry._registrate(a),document.registerElement(a.is,d),c};var b=function(a){var b=Polymer.Base;return a.extends&&(b=Polymer.Base._getExtendedPrototype(a.extends)),a=Polymer.Base.chainObject(a,b),a.registerCallback(),a.constructor};if(window.Polymer=Polymer,a)for(var c in a)Polymer[c]=a[c];Polymer.Class=b}(),Polymer.telemetry={registrations:[],_regLog:function(a){console.log("["+a.is+"]: registered")},_registrate:function(a){this.registrations.push(a),Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript).ownerDocument}}),Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(a){this._ready?a():this._callbacks.push(a)},_makeReady:function(){this._ready=!0,this._callbacks.forEach(function(a){a()}),this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})}},window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender(),Polymer.ImportStatus=Polymer.RenderStatus,Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady,Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(a){this.extend(this,a)},registerCallback:function(){this._desugarBehaviors(),this._doBehavior("beforeRegister"),this._registerFeatures(),this._doBehavior("registered")},createdCallback:function(){Polymer.telemetry.instanceCount++,this.root=this,this._doBehavior("created"),this._initFeatures()},attachedCallback:function(){Polymer.RenderStatus.whenReady(function(){this.isAttached=!0,this._doBehavior("attached")}.bind(this))},detachedCallback:function(){this.isAttached=!1,this._doBehavior("detached")},attributeChangedCallback:function(a){this._attributeChangedImpl(a),this._doBehavior("attributeChanged",arguments)},_attributeChangedImpl:function(a){this._setAttributeToProperty(this,a)},extend:function(a,b){return a&&b&&Object.getOwnPropertyNames(b).forEach(function(c){this.copyOwnProperty(c,b,a)},this),a||b},mixin:function(a,b){for(var c in b)a[c]=b[c];return a},copyOwnProperty:function(a,b,c){var d=Object.getOwnPropertyDescriptor(b,a);d&&Object.defineProperty(c,a,d)},_log:console.log.apply.bind(console.log,console),_warn:console.warn.apply.bind(console.warn,console),_error:console.error.apply.bind(console.error,console),_logf:function(){return this._logPrefix.concat([this.is]).concat(Array.prototype.slice.call(arguments,0))}},Polymer.Base._logPrefix=function(){var a=window.chrome||/firefox/i.test(navigator.userAgent);return a?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:["[%s::%s]:"]}(),Polymer.Base.chainObject=function(a,b){return a&&b&&a!==b&&(Object.__proto__||(a=Polymer.Base.extend(Object.create(b),a)),a.__proto__=b),a},Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype),window.CustomElements?Polymer.instanceof=CustomElements.instanceof:Polymer.instanceof=function(a,b){return a instanceof b},Polymer.isInstance=function(a){return Boolean(a&&a.__isPolymerInstance__)},Polymer.telemetry.instanceCount=0,function(){function f(){if(e){var a=document._currentScript||document.currentScript,b=a&&a.ownerDocument||document;b&&CustomElements.upgradeAll(b)}}var a={},b={},c=function(c){return a[c]||b[c.toLowerCase()]},d=function(){return document.createElement("dom-module")};d.prototype=Object.create(HTMLElement.prototype),Polymer.Base.extend(d.prototype,{constructor:d,createdCallback:function(){this.register()},register:function(c){var c=c||this.id||this.getAttribute("name")||this.getAttribute("is");c&&(this.id=c,a[c]=this,b[c.toLowerCase()]=this)},import:function(a,b){if(a){var d=c(a);return d||(f(),d=c(a)),d&&b&&(d=d.querySelector(b)),d}}});var e=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",d)}(),Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var a=(document._currentScript||document.currentScript).parentNode;if("dom-module"===a.localName){var b=a.id||a.getAttribute("name")||a.getAttribute("is");this.is=b}}this.is&&(this.is=this.is.toLowerCase())}}),Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(a){a=this._flattenBehaviorsList(a);for(var b=a.length-1;b>=0;b--)this._mixinBehavior(a[b]);return a},_flattenBehaviorsList:function(a){var b=[];return a.forEach(function(a){a instanceof Array?b=b.concat(this._flattenBehaviorsList(a)):a?b.push(a):this._warn(this._logf("_flattenBehaviorsList","behavior is null, check for missing or 404 import"))},this),b},_mixinBehavior:function(a){Object.getOwnPropertyNames(a).forEach(function(b){switch(b){case"hostAttributes":case"registered":case"properties":case"observers":case"listeners":case"created":case"attached":case"detached":case"attributeChanged":case"configure":case"ready":break;default:this.hasOwnProperty(b)||this.copyOwnProperty(b,a,this)}},this)},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(a){for(var b=0,c=a.length;b<c;b++)this._prepBehavior(a[b]);this._prepBehavior(this)},_doBehavior:function(a,b){this.behaviors.forEach(function(c){this._invokeBehavior(c,a,b)},this),this._invokeBehavior(this,a,b)},_invokeBehavior:function(a,b,c){var d=a[b];d&&d.apply(this,c||Polymer.nar)},_marshalBehaviors:function(){this.behaviors.forEach(function(a){this._marshalBehavior(a)},this),this._marshalBehavior(this)}}),Polymer.Base._addFeature({_getExtendedPrototype:function(a){return this._getExtendedNativePrototype(a)},_nativePrototypes:{},_getExtendedNativePrototype:function(a){var b=this._nativePrototypes[a];if(!b){var c=this.getNativePrototype(a);b=this.extend(Object.create(c),Polymer.Base),this._nativePrototypes[a]=b}return b},getNativePrototype:function(a){return Object.getPrototypeOf(document.createElement(a))}}),Polymer.Base._addFeature({_prepConstructor:function(){this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];var a=function(){return this._factory(arguments)};this.hasOwnProperty("extends")&&(a.extends=this.extends),Object.defineProperty(this,"constructor",{value:a,writable:!0,configurable:!0}),a.prototype=this},_factory:function(a){var b=document.createElement.apply(document,this._factoryArgs);return this.factoryImpl&&this.factoryImpl.apply(b,a),b}}),Polymer.nob=Object.create(null),Polymer.Base._addFeature({properties:{},getPropertyInfo:function(a){var b=this._getPropertyInfo(a,this.properties);return b||this.behaviors.some(function(c){return b=this._getPropertyInfo(a,c.properties)},this),b||Polymer.nob},_getPropertyInfo:function(a,b){var c=b&&b[a];return"function"==typeof c&&(c=b[a]={type:c}),c&&(c.defined=!0),c}}),Polymer.CaseMap={_caseMap:{},dashToCamelCase:function(a){var b=Polymer.CaseMap._caseMap[a];return b?b:a.indexOf("-")<0?Polymer.CaseMap._caseMap[a]=a:Polymer.CaseMap._caseMap[a]=a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},camelToDashCase:function(a){var b=Polymer.CaseMap._caseMap[a];return b?b:Polymer.CaseMap._caseMap[a]=a.replace(/([a-z][A-Z])/g,function(a){return a[0]+"-"+a[1].toLowerCase()})}},Polymer.Base._addFeature({_prepAttributes:function(){this._aggregatedAttributes={}},_addHostAttributes:function(a){a&&this.mixin(this._aggregatedAttributes,a)},_marshalHostAttributes:function(){this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(a,b){for(var c in b)this.hasAttribute(c)||"class"===c||this.serializeValueToAttribute(b[c],c,this)},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(a){for(var b=0,c=this.attributes.length;b<c;b++)this._setAttributeToProperty(a,this.attributes[b].name)},_setAttributeToProperty:function(a,b){if(!this._serializing){var c=Polymer.CaseMap.dashToCamelCase(b),d=this.getPropertyInfo(c);if(d.defined||this._propertyEffects&&this._propertyEffects[c]){var e=this.getAttribute(b);a[c]=this.deserialize(e,d.type)}}},_serializing:!1,reflectPropertyToAttribute:function(a){this._serializing=!0,this.serializeValueToAttribute(this[a],Polymer.CaseMap.camelToDashCase(a)),this._serializing=!1},serializeValueToAttribute:function(a,b,c){var d=this.serialize(a);(c||this)[void 0===d?"removeAttribute":"setAttribute"](b,d)},deserialize:function(a,b){switch(b){case Number:a=Number(a);break;case Boolean:a=null!==a;break;case Object:try{a=JSON.parse(a)}catch(a){}break;case Array:try{a=JSON.parse(a)}catch(b){a=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:a=new Date(a);break;case String:}return a},serialize:function(a){switch(typeof a){case"boolean":return a?"":void 0;case"object":if(a instanceof Date)return a;if(a)try{return JSON.stringify(a)}catch(a){return""}default:return null!=a?a:void 0}}}),Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(a,b,c){return this._debouncers[a]=Polymer.Debounce.call(this,this._debouncers[a],b,c)},isDebouncerActive:function(a){var b=this._debouncers[a];return b&&b.finish},flushDebouncer:function(a){var b=this._debouncers[a];b&&b.complete()},cancelDebouncer:function(a){var b=this._debouncers[a];b&&b.stop()}}),Polymer.version="1.2.1",Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepAttributes(),this._prepBehaviors(),this._prepConstructor()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_marshalBehavior:function(a){},_initFeatures:function(){this._marshalHostAttributes(),this._setupDebouncers(),this._marshalBehaviors()}}),Polymer.Base._addFeature({_prepTemplate:function(){this._template=this._template||Polymer.DomModule.import(this.is,"template"),this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,"Move inside simple <template>.")),this._template&&!this._template.content&&HTMLTemplateElement.bootstrap&&(HTMLTemplateElement.decorate(this._template),HTMLTemplateElement.bootstrap(this._template.content))},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(a){var b=document.importNode(a._content||a.content,!0);return b}}),function(){var a=Polymer.Base.attachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_pushHost:function(a){this.dataHost=a=a||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1],a&&a._clients&&a._clients.push(this),this._beginHost()},_beginHost:function(){Polymer.Base._hostStack.push(this),this._clients||(this._clients=[])},_popHost:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady(),this._setupRoot(),this._readyClients(),this._afterClientsReady(),this._readySelf()},_readyClients:function(){this._beginDistribute();for(var d,a=this._clients,b=0,c=a.length;b<c&&(d=a[b]);b++)d._ready();this._finishDistribute(),this._clientsReadied=!0,this._clients=null},_readySelf:function(){this._doBehavior("ready"),this._readied=!0,this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),a.call(this)):this._attachedPending=!0}})}(),Polymer.ArraySplice=function(){function a(a,b,c){return{index:a,removed:b,addedCount:c}}function f(){}var b=0,c=1,d=2,e=3;return f.prototype={calcEditDistances:function(a,b,c,d,e,f){for(var g=f-e+1,h=c-b+1,i=new Array(g),j=0;j<g;j++)i[j]=new Array(h),i[j][0]=j;for(var k=0;k<h;k++)i[0][k]=k;for(var j=1;j<g;j++)for(var k=1;k<h;k++)if(this.equals(a[b+k-1],d[e+j-1]))i[j][k]=i[j-1][k-1];else{var l=i[j-1][k]+1,m=i[j][k-1]+1;i[j][k]=l<m?l:m}return i},spliceOperationsFromEditDistances:function(a){for(var f=a.length-1,g=a[0].length-1,h=a[f][g],i=[];f>0||g>0;)if(0!=f)if(0!=g){var m,j=a[f-1][g-1],k=a[f-1][g],l=a[f][g-1];m=k<l?k<j?k:j:l<j?l:j,m==j?(j==h?i.push(b):(i.push(c),h=j),f--,g--):m==k?(i.push(e),f--,h=k):(i.push(d),g--,h=l)}else i.push(e),f--;else i.push(d),g--;return i.reverse(),i},calcSplices:function(f,g,h,i,j,k){var l=0,m=0,n=Math.min(h-g,k-j);if(0==g&&0==j&&(l=this.sharedPrefix(f,i,n)),h==f.length&&k==i.length&&(m=this.sharedSuffix(f,i,n-l)),g+=l,j+=l,h-=m,k-=m,h-g==0&&k-j==0)return[];if(g==h){for(var o=a(g,[],0);j<k;)o.removed.push(i[j++]);return[o]}if(j==k)return[a(g,[],h-g)];for(var p=this.spliceOperationsFromEditDistances(this.calcEditDistances(f,g,h,i,j,k)),o=void 0,q=[],r=g,s=j,t=0;t<p.length;t++)switch(p[t]){case b:o&&(q.push(o),o=void 0),r++,s++;break;case c:o||(o=a(r,[],0)),o.addedCount++,r++,o.removed.push(i[s]),s++;break;case d:o||(o=a(r,[],0)),o.addedCount++,r++;break;case e:o||(o=a(r,[],0)),o.removed.push(i[s]),s++}return o&&q.push(o),q},sharedPrefix:function(a,b,c){for(var d=0;d<c;d++)if(!this.equals(a[d],b[d]))return d;return c},sharedSuffix:function(a,b,c){for(var d=a.length,e=b.length,f=0;f<c&&this.equals(a[--d],b[--e]);)f++;return f},calculateSplices:function(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals:function(a,b){return a===b}},new f}(),Polymer.domInnerHTML=function(){function c(a){switch(a){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function d(b){return b.replace(a,c)}function e(a){return a.replace(b,c)}function f(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}function i(a,b,c){switch(a.nodeType){case Node.ELEMENT_NODE:for(var m,f=a.localName,i="<"+f,k=a.attributes,l=0;m=k[l];l++)i+=" "+m.name+'="'+d(m.value)+'"';return i+=">",g[f]?i:i+j(a,c)+"</"+f+">";case Node.TEXT_NODE:var n=a.data;return b&&h[b.localName]?n:e(n);case Node.COMMENT_NODE:return"<!--"+a.data+"-->";default:throw console.error(a),new Error("not implemented")}}function j(a,b){a instanceof HTMLTemplateElement&&(a=a.content);var c="",d=Polymer.dom(a).childNodes;d=b?a._composedChildren:d;for(var g,e=0,f=d.length;e<f&&(g=d[e]);e++)c+=i(g,a,b);return c}var a=/[&\u00A0"]/g,b=/[&\u00A0<>]/g,g=f(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),h=f(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);return{getInnerHTML:j}}(),Polymer.DomApi=function(){"use strict";function m(a,b){return a=a||document,a.__domApi||(a.__domApi=new h(a,b)),a.__domApi}function n(a){return Boolean(a.__domApi)}function o(a){var b=a._lightChildren;return b?b:a.childNodes}function p(a){return a._composedChildren||(a._composedChildren=Array.prototype.slice.call(a.childNodes)),a._composedChildren}function q(a,b,c){var d=p(a),e=c?d.indexOf(c):-1;if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var f=p(b),g=0;g<f.length;g++)s(f[g],a,d,e+g);b._composedChildren=null}else s(b,a,d,e)}function r(a){return a.__patched?a._composedParent:a.parentNode}function s(a,b,c,d){a._composedParent=b,c.splice(d>=0?d:c.length,0,a)}function t(a,b){if(b._composedParent=null,a){var c=p(a),d=c.indexOf(b);d>=0&&c.splice(d,1)}}function u(a){if(!a._lightChildren){for(var e,b=Array.prototype.slice.call(a.childNodes),c=0,d=b.length;c<d&&(e=b[c]);c++)e._lightParent=e._lightParent||a;a._lightChildren=b}}function v(a){return Boolean(a&&a._insertionPoints.length)}var a=Polymer.Settings,b=Polymer.domInnerHTML.getInnerHTML,c=Element.prototype.insertBefore,d=Element.prototype.removeChild,e=Element.prototype.appendChild,f=Element.prototype.cloneNode,g=Document.prototype.importNode,h=function(a){this.node=a,this.patch&&this.patch()};if(window.wrap&&a.useShadow&&!a.useNativeShadow&&(h=function(a){this.node=wrap(a),this.patch&&this.patch()}),h.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(a){if(this.node.contains(a))return!0;for(var b=a,c=wrap(document);b&&b!==c&&b!==this.node;)b=Polymer.dom(b).parentNode||b.host;return b===this.node},_lazyDistribute:function(a){a.shadyRoot&&a.shadyRoot._distributionClean&&(a.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(a.debounce("_distribute",a._distributeContent)))},appendChild:function(a){return this._addNode(a)},insertBefore:function(a,b){return this._addNode(a,b)},_addNode:function(a,b){this._removeNodeFromParent(a);var d,f=this.getOwnerRoot();if(f&&(d=this._maybeAddInsertionPoint(a,this.node)),this._nodeHasLogicalChildren(this.node)){if(b){var g=this.childNodes,h=g.indexOf(b);if(h<0)throw Error("The ref_node to be inserted before is not a child of this node")}this._addLogicalInfo(a,this.node,h)}if(this._addNodeToHost(a),!this._maybeDistribute(a,this.node)&&!this._tryRemoveUndistributedNode(a)){b&&(b=b.localName===l?this._firstComposedNode(b):b);var i=this.node._isShadyRoot?this.node.host:this.node;q(i,a,b),b?c.call(i,a,b):e.call(i,a)}return d&&this._updateInsertionPoints(f.host),this.notifyObserver(),a},removeChild:function(a){if(m(a).parentNode!==this.node&&console.warn("The node to be removed is not a child of this node",a),this._removeNodeFromHost(a),!this._maybeDistribute(a,this.node)){var b=this.node._isShadyRoot?this.node.host:this.node;b===a.parentNode&&(t(b,a),d.call(b,a))}return this.notifyObserver(),a},replaceChild:function(a,b){return this.insertBefore(a,b),this.removeChild(b),a},_hasCachedOwnerRoot:function(a){return Boolean(void 0!==a._ownerShadyRoot)},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(a){if(a){if(void 0===a._ownerShadyRoot){var b;if(a._isShadyRoot)b=a;else{var c=Polymer.dom(a).parentNode;b=c?c._isShadyRoot?c:this._ownerShadyRootForNode(c):null}a._ownerShadyRoot=b}return a._ownerShadyRoot}},_maybeDistribute:function(a,b){var c=a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!a.__noContent&&Polymer.dom(a).querySelector(l),d=c&&Polymer.dom(c).parentNode.nodeType!==Node.DOCUMENT_FRAGMENT_NODE,e=c||a.localName===l;if(e){var f=this._ownerShadyRootForNode(b);if(f){var g=f.host;this._lazyDistribute(g)}}var h=this._parentNeedsDistribution(b);return h&&this._lazyDistribute(b),h||e&&!d},_maybeAddInsertionPoint:function(a,b){var c;if(a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||a.__noContent)a.localName===l&&(u(b),u(a),c=!0);else for(var f,g,h,d=m(a).querySelectorAll(l),e=0;e<d.length&&(f=d[e]);e++)g=m(f).parentNode,g===a&&(g=b),h=this._maybeAddInsertionPoint(f,g),c=c||h;return c},_tryRemoveUndistributedNode:function(a){if(this.node.shadyRoot){var b=r(a);return b&&d.call(b,a),!0}},_updateInsertionPoints:function(a){for(var d,b=a.shadyRoot._insertionPoints=m(a.shadyRoot).querySelectorAll(l),c=0;c<b.length;c++)d=b[c],u(d),u(m(d).parentNode)},_nodeHasLogicalChildren:function(a){return Boolean(void 0!==a._lightChildren)},_parentNeedsDistribution:function(a){return a&&a.shadyRoot&&v(a.shadyRoot)},_removeNodeFromParent:function(a){var b=a._lightParent||a.parentNode;b&&n(b)&&m(b).notifyObserver(),this._removeNodeFromHost(a,!0)},_removeNodeFromHost:function(a,b){var c,d,e=a._lightParent;e&&(m(a)._distributeParent(),d=this._ownerShadyRootForNode(a),d&&(d.host._elementRemove(a),c=this._removeDistributedChildren(d,a)),this._removeLogicalInfo(a,e)),this._removeOwnerShadyRoot(a),d&&c?(this._updateInsertionPoints(d.host),this._lazyDistribute(d.host)):b&&t(r(a),a)},_removeDistributedChildren:function(a,b){for(var c,e=a._insertionPoints,f=0;f<e.length;f++){var g=e[f];if(this._contains(b,g))for(var h=m(g).getDistributedNodes(),i=0;i<h.length;i++){c=!0;var j=h[i],k=j.parentNode;k&&(t(k,j),d.call(k,j))}}return c},_contains:function(a,b){for(;b;){if(b==a)return!0;b=m(b).parentNode}},_addNodeToHost:function(a){var b=this.getOwnerRoot();b&&b.host._elementAdd(a)},_addLogicalInfo:function(a,b,c){var d=m(b).childNodes;if(c=void 0===c?d.length:c,a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var g,e=Array.prototype.slice.call(a.childNodes),f=0;f<e.length&&(g=e[f]);f++)d.splice(c++,0,g),g._lightParent=b;else d.splice(c,0,a),a._lightParent=b},_removeLogicalInfo:function(a,b){var c=m(b).childNodes,d=c.indexOf(a);if(d<0||b!==a._lightParent)throw Error("The node to be removed is not a child of this node");c.splice(d,1),a._lightParent=null},_removeOwnerShadyRoot:function(a){if(this._hasCachedOwnerRoot(a))for(var e,b=m(a).childNodes,c=0,d=b.length;c<d&&(e=b[c]);c++)this._removeOwnerShadyRoot(e);a._ownerShadyRoot=void 0},_firstComposedNode:function(a){for(var e,f,b=m(a).getDistributedNodes(),c=0,d=b.length;c<d&&(e=b[c]);c++)if(f=m(e).getDestinationInsertionPoints(),f[f.length-1]===a)return e},querySelector:function(a){return this.querySelectorAll(a)[0]},querySelectorAll:function(a){return this._query(function(b){return x.call(b,a)},this.node)},_query:function(a,b){b=b||this.node;var c=[];return this._queryElements(m(b).childNodes,a,c),c},_queryElements:function(a,b,c){for(var f,d=0,e=a.length;d<e&&(f=a[d]);d++)f.nodeType===Node.ELEMENT_NODE&&this._queryElement(f,b,c)},_queryElement:function(a,b,c){b(a)&&c.push(a),this._queryElements(m(a).childNodes,b,c)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},queryDistributedElements:function(a){for(var f,b=this.getEffectiveChildNodes(),c=[],d=0,e=b.length;d<e&&(f=b[d]);d++)f.nodeType===Node.ELEMENT_NODE&&x.call(f,a)&&c.push(f);return c},getEffectiveChildNodes:function(){for(var e,a=[],b=this.childNodes,c=0,d=b.length;c<d&&(e=b[c]);c++)if(e.localName===l)for(var f=m(e).getDistributedNodes(),g=0;g<f.length;g++)a.push(f[g]);else a.push(e);return a},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(a,b){this.node.setAttribute(a,b),this._distributeParent()},removeAttribute:function(a){this.node.removeAttribute(a),this._distributeParent()},_distributeParent:function(){this._parentNeedsDistribution(this.parentNode)&&this._lazyDistribute(this.parentNode)},cloneNode:function(a){var b=f.call(this.node,!1);if(a)for(var g,c=this.childNodes,d=m(b),e=0;e<c.length;e++)g=m(c[e]).cloneNode(!0),d.appendChild(g);return b},importNode:function(a,b){var c=this.node instanceof Document?this.node:this.node.ownerDocument,d=g.call(c,a,!1);if(b)for(var i,e=m(a).childNodes,f=m(d),h=0;h<e.length;h++)i=m(c).importNode(e[h],!0),f.appendChild(i);return d},observeNodes:function(a){if(a)return this.observer||(this.observer=this.node.localName===l?new h.DistributedNodesObserver(this):new h.EffectiveNodesObserver(this)),this.observer.addListener(a)},unobserveNodes:function(a){this.observer&&this.observer.removeListener(a)},notifyObserver:function(){this.observer&&this.observer.notify()}},a.useShadow){var i=["cloneNode","appendChild","insertBefore","removeChild","replaceChild"];i.forEach(function(a){h.prototype[a]=function(){return this.node[a].apply(this.node,arguments)}}),h.prototype.querySelectorAll=function(a){return Array.prototype.slice.call(this.node.querySelectorAll(a))},h.prototype.getOwnerRoot=function(){for(var a=this.node;a;){if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host)return a;a=a.parentNode}},h.prototype.importNode=function(a,b){var c=this.node instanceof Document?this.node:this.node.ownerDocument;return c.importNode(a,b)},h.prototype.getDestinationInsertionPoints=function(){var a=this.node.getDestinationInsertionPoints&&this.node.getDestinationInsertionPoints();return a?Array.prototype.slice.call(a):[]},h.prototype.getDistributedNodes=function(){var a=this.node.getDistributedNodes&&this.node.getDistributedNodes();return a?Array.prototype.slice.call(a):[]},h.prototype._distributeParent=function(){};var j=["appendChild","insertBefore","removeChild","replaceChild"];j.forEach(function(a){h.prototype[a]=function(){return this.node[a].apply(this.node,arguments)}}),Object.defineProperties(h.prototype,{childNodes:{get:function(){return Array.prototype.slice.call(this.node.childNodes)},configurable:!0},children:{get:function(){return Array.prototype.slice.call(this.node.children)},configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(a){return this.node.textContent=a},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(a){return this.node.innerHTML=a},configurable:!0}});var k=["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling"];k.forEach(function(a){Object.defineProperty(h.prototype,a,{
get:function(){return this.node[a]},configurable:!0})})}else Object.defineProperties(h.prototype,{childNodes:{get:function(){var a=o(this.node);return Array.isArray(a)?a:Array.prototype.slice.call(a)},configurable:!0},children:{get:function(){return Array.prototype.filter.call(this.childNodes,function(a){return a.nodeType===Node.ELEMENT_NODE})},configurable:!0},parentNode:{get:function(){return this.node._lightParent||r(this.node)},configurable:!0},firstChild:{get:function(){return this.childNodes[0]},configurable:!0},lastChild:{get:function(){var a=this.childNodes;return a[a.length-1]},configurable:!0},nextSibling:{get:function(){var a=this.parentNode&&m(this.parentNode).childNodes;if(a)return a[Array.prototype.indexOf.call(a,this.node)+1]},configurable:!0},previousSibling:{get:function(){var a=this.parentNode&&m(this.parentNode).childNodes;if(a)return a[Array.prototype.indexOf.call(a,this.node)-1]},configurable:!0},firstElementChild:{get:function(){return this.children[0]},configurable:!0},lastElementChild:{get:function(){var a=this.children;return a[a.length-1]},configurable:!0},nextElementSibling:{get:function(){var a=this.parentNode&&m(this.parentNode).children;if(a)return a[Array.prototype.indexOf.call(a,this.node)+1]},configurable:!0},previousElementSibling:{get:function(){var a=this.parentNode&&m(this.parentNode).children;if(a)return a[Array.prototype.indexOf.call(a,this.node)-1]},configurable:!0},textContent:{get:function(){var a=this.node.nodeType;if(a===Node.TEXT_NODE||a===Node.COMMENT_NODE)return this.node.textContent;for(var e,b=[],c=0,d=this.childNodes;e=d[c];c++)e.nodeType!==Node.COMMENT_NODE&&b.push(e.textContent);return b.join("")},set:function(a){var b=this.node.nodeType;b===Node.TEXT_NODE||b===Node.COMMENT_NODE?this.node.textContent=a:(this._clear(),a&&this.appendChild(document.createTextNode(a)))},configurable:!0},innerHTML:{get:function(){var a=this.node.nodeType;return a===Node.TEXT_NODE||a===Node.COMMENT_NODE?null:b(this.node)},set:function(a){var b=this.node.nodeType;if(b!==Node.TEXT_NODE||b!==Node.COMMENT_NODE){this._clear();var c=document.createElement("div");c.innerHTML=a;for(var d=Array.prototype.slice.call(c.childNodes),e=0;e<d.length;e++)this.appendChild(d[e])}},configurable:!0}}),h.prototype._getComposedInnerHTML=function(){return b(this.node,!0)};var l="content";Polymer.dom=function(a,b){return a instanceof Event?Polymer.EventApi.factory(a):m(a,b)};var w=Element.prototype,x=w.matches||w.matchesSelector||w.mozMatchesSelector||w.msMatchesSelector||w.oMatchesSelector||w.webkitMatchesSelector;return{getLightChildren:o,getComposedParent:r,getComposedChildren:p,removeFromComposedParent:t,saveLightChildrenIfNeeded:u,matchesSelector:x,hasInsertionPoint:v,ctor:h,factory:m,hasDomApi:n}}(),Polymer.Base.extend(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){for(this._flushGuard=0,this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(var a=0;a<this._debouncers.length;a++)this._debouncers[a].complete();this._finishDebouncer&&this._finishDebouncer.complete(),this._prepareFlush(),this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var a=0;a<this._staticFlushList.length;a++)this._staticFlushList[a]()},addStaticFlush:function(a){this._staticFlushList.push(a)},removeStaticFlush:function(a){var b=this._staticFlushList.indexOf(a);b>=0&&this._staticFlushList.splice(b,1)},addDebouncer:function(a){this._debouncers.push(a),this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}}),Polymer.EventApi=function(){"use strict";var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.Event=function(a){this.event=a},b.useShadow?a.Event.prototype={get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){return this.event.path}}:a.Event.prototype={get rootTarget(){return this.event.target},get localTarget(){for(var a=this.event.currentTarget,b=a&&Polymer.dom(a).getOwnerRoot(),c=this.path,d=0;d<c.length;d++)if(Polymer.dom(c[d]).getOwnerRoot()===b)return c[d]},get path(){if(!this.event._path){for(var a=[],b=this.rootTarget;b;)a.push(b),b=Polymer.dom(b).parentNode||b.host;a.push(window),this.event._path=a}return this.event._path}};var c=function(b){return b.__eventApi||(b.__eventApi=new a.Event(b)),b.__eventApi};return{factory:c}}(),function(){"use strict";var a=Polymer.DomApi.ctor;Object.defineProperty(a.prototype,"classList",{get:function(){return this._classList||(this._classList=new a.ClassList(this)),this._classList},configurable:!0}),a.ClassList=function(a){this.domApi=a,this.node=a.node},a.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments),this.domApi._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments),this.domApi._distributeParent()},toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments),this.domApi._distributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}}(),function(){"use strict";var a=Polymer.DomApi.ctor,b=Polymer.Settings;Polymer.DomApi.hasDomApi;if(a.EffectiveNodesObserver=function(a){this.domApi=a,this.node=this.domApi.node,this._listeners=[]},a.EffectiveNodesObserver.prototype={addListener:function(a){this._isSetup||(this._setup(),this._isSetup=!0);var b={fn:a,_nodes:[]};return this._listeners.push(b),this._scheduleNotify(),b},removeListener:function(a){var b=this._listeners.indexOf(a);b>=0&&(this._listeners.splice(b,1),a._nodes=[]),this._hasListeners()||(this._cleanup(),this._isSetup=!1)},_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return Boolean(this._listeners.length)},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop(),this._debouncer=Polymer.Debounce(this._debouncer,this._notify),this._debouncer.context=this,Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(a){this._beforeCallListeners(),this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(a){for(var c,b=0;b<a.length&&(c=a[b]);b++)this._isContent(c)&&(c.__observeNodesMap=c.__observeNodesMap||new WeakMap,c.__observeNodesMap.has(this)||c.__observeNodesMap.set(this,this._observeContent(c)))},_observeContent:function(a){var b=Polymer.dom(a).observeNodes(this._scheduleNotify.bind(this));return b._avoidChangeCalculation=!0,b},_unobserveContentElements:function(a){for(var c,d,b=0;b<a.length&&(c=a[b]);b++)this._isContent(c)&&(d=c.__observeNodesMap.get(this),d&&(Polymer.dom(c).unobserveNodes(d),c.__observeNodesMap.delete(this)))},_isContent:function(a){return"content"===a.localName},_callListeners:function(){for(var d,a=this._listeners,b=this._getEffectiveNodes(),c=0;c<a.length&&(d=a[c]);c++){var e=this._generateListenerInfo(d,b);(e||d._alwaysNotify)&&this._callListener(d,e)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},_generateListenerInfo:function(a,b){if(a._avoidChangeCalculation)return!0;for(var g,c=a._nodes,d={target:this.node,addedNodes:[],removedNodes:[]},e=Polymer.ArraySplice.calculateSplices(b,c),f=0;f<e.length&&(g=e[f]);f++)for(var i,h=0;h<g.removed.length&&(i=g.removed[h]);h++)d.removedNodes.push(i);for(var g,f=0;f<e.length&&(g=e[f]);f++)for(var h=g.index;h<g.index+g.addedCount;h++)d.addedNodes.push(b[h]);return a._nodes=b,d.addedNodes.length||d.removedNodes.length?d:void 0},_callListener:function(a,b){return a.fn.call(this.node,b)},enableShadowAttributeTracking:function(){}},b.useShadow){var d=a.EffectiveNodesObserver.prototype._setup,e=a.EffectiveNodesObserver.prototype._cleanup;a.EffectiveNodesObserver.prototype._beforeCallListeners;Polymer.Base.extend(a.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var a=this;this._mutationHandler=function(b){b&&b.length&&a._scheduleNotify()},this._observer=new MutationObserver(this._mutationHandler),this._boundFlush=this._flush.bind(this),Polymer.dom.addStaticFlush(this._boundFlush),this._observer.observe(this.node,{childList:!0})}d.call(this)},_cleanup:function(){this._observer.disconnect(),this._observer=null,this._mutationHandler=null,Polymer.dom.removeStaticFlush(this._boundFlush),e.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify(),this._observer.disconnect(),this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0});var a=this.domApi.getOwnerRoot(),b=a&&a.host;b&&Polymer.dom(b).observer&&Polymer.dom(b).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var b,a=0;a<this._listeners.length;a++)b=this._listeners[a],b._alwaysNotify=b._isContentListener}})}}(),function(){"use strict";var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.DistributedNodesObserver=function(b){a.EffectiveNodesObserver.call(this,b)},a.DistributedNodesObserver.prototype=Object.create(a.EffectiveNodesObserver.prototype),Polymer.Base.extend(a.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}}),b.useShadow&&Polymer.Base.extend(a.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var a=this.domApi.getOwnerRoot(),b=a&&a.host;b&&(this._observer=Polymer.dom(b).observeNodes(this._scheduleNotify.bind(this)),this._observer._isContentListener=!0,this._hasAttrSelect()&&Polymer.dom(b).observer.enableShadowAttributeTracking())}},_hasAttrSelect:function(){var a=this.node.getAttribute("select");return a&&a.match(/[[.]+/)},_cleanup:function(){var a=this.domApi.getOwnerRoot(),b=a&&a.host;b&&Polymer.dom(b).unobserveNodes(this._observer),this._observer=null}})}(),function(){function i(a,b){b._distributedNodes.push(a);var c=a._destinationInsertionPoints;c?c.push(b):a._destinationInsertionPoints=[b]}function j(a){var b=a._distributedNodes;if(b)for(var c=0;c<b.length;c++){var d=b[c]._destinationInsertionPoints;d&&d.splice(d.indexOf(a)+1,d.length)}}function k(a,b){var c=a._lightParent;c&&c.shadyRoot&&e(c.shadyRoot)&&c.shadyRoot._distributionClean&&(c.shadyRoot._distributionClean=!1,b.shadyRoot._dirtyRoots.push(c))}function l(a,b){var c=b._destinationInsertionPoints;return c&&c[c.length-1]===a}function m(a){return"content"==a.localName}function p(a,b,c){var d=g(b);d!==a&&h(d,b),q(b),n.call(a,b,c||null),b._composedParent=a}function q(a){var b=g(a);b&&(a._composedParent=null,o.call(b,a))}function r(a,b){for(var c=0;c<b.length;c++)b[c]._composedParent=a}function s(a){for(;a&&t(a);)a=a.domHost;return a}function t(a){for(var d,b=Polymer.dom(a).children,c=0;c<b.length;c++)if(d=b[c],"content"===d.localName)return a.domHost}function u(b){for(var d,c=0;c<b._insertionPoints.length;c++)d=b._insertionPoints[c],a(d)&&Polymer.dom(d).notifyObserver()}function v(b){a(b)&&Polymer.dom(b).notifyObserver()}function x(a){if(w&&a)for(var b=0;b<a.length;b++)CustomElements.upgrade(a[b])}var a=Polymer.DomApi.hasDomApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||Boolean(this._template)},_poolContent:function(){this._useContent&&b(this)},_setupRoot:function(){this._useContent&&(this._createLocalRoot(),this.dataHost||x(this._lightChildren))},_createLocalRoot:function(){this.shadyRoot=this.root,this.shadyRoot._distributionClean=!1,this.shadyRoot._isShadyRoot=!0,this.shadyRoot._dirtyRoots=[];var a=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];b(this.shadyRoot);for(var d,c=0;c<a.length;c++)d=a[c],b(d),b(d.parentNode);this.shadyRoot.host=this},get domHost(){var a=Polymer.dom(this).getOwnerRoot();return a&&a.host},distributeContent:function(a){if(this.shadyRoot){var b=Polymer.dom(this);a&&b._updateInsertionPoints(this);var c=s(this);b._lazyDistribute(c)}},_distributeContent:function(){this._useContent&&!this.shadyRoot._distributionClean&&(this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&e(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var d,a=this.shadyRoot._dirtyRoots,b=0,c=a.length;b<c&&(d=a[b]);b++)d._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){if(this.shadyRoot._distributionClean=!0,e(this.shadyRoot))this._composeTree(),u(this.shadyRoot);else if(this.shadyRoot._hasDistributed){var a=this._composeNode(this);this._updateChildNodes(this,a)}else this.textContent="",this._composedChildren=null,this.appendChild(this.shadyRoot);this.shadyRoot._hasDistributed||v(this),this.shadyRoot._hasDistributed=!0}},elementMatches:function(a,b){return b=b||this,d.call(b,a)},_resetDistribution:function(){for(var a=c(this),b=0;b<a.length;b++){var d=a[b];d._destinationInsertionPoints&&(d._destinationInsertionPoints=void 0),m(d)&&j(d)}for(var e=this.shadyRoot,f=e._insertionPoints,g=0;g<f.length;g++)f[g]._distributedNodes=[]},_collectPool:function(){for(var a=[],b=c(this),d=0;d<b.length;d++){var e=b[d];m(e)?a.push.apply(a,e._distributedNodes):a.push(e)}return a},_distributePool:function(a,b){for(var f,c=a._insertionPoints,d=0,e=c.length;d<e&&(f=c[d]);d++)this._distributeInsertionPoint(f,b),k(f,this)},_distributeInsertionPoint:function(a,b){for(var g,d=!1,e=0,f=b.length;e<f;e++)g=b[e],g&&this._matchesContentSelect(g,a)&&(i(g,a),b[e]=void 0,d=!0);if(!d)for(var h=c(a),j=0;j<h.length;j++)i(h[j],a)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var d,e,a=this.shadyRoot._insertionPoints,b=0,c=a.length;b<c&&(d=a[b]);b++)e=d._lightParent||d.parentNode,e._useContent||e===this||e===this.shadyRoot||this._updateChildNodes(e,this._composeNode(e))},_composeNode:function(a){for(var b=[],d=c(a.shadyRoot||a),e=0;e<d.length;e++){var f=d[e];if(m(f))for(var g=f._distributedNodes,h=0;h<g.length;h++){var i=g[h];l(f,i)&&b.push(i)}else b.push(f)}return b},_updateChildNodes:function(a,b){for(var i,c=f(a),d=Polymer.ArraySplice.calculateSplices(b,c),e=0,h=0;e<d.length&&(i=d[e]);e++){for(var k,j=0;j<i.removed.length&&(k=i.removed[j]);j++)g(k)===a&&q(k),c.splice(i.index+h,1);h-=i.addedCount}for(var i,l,e=0;e<d.length&&(i=d[e]);e++){l=c[i.index];for(var k,j=i.index;j<i.index+i.addedCount;j++)k=b[j],p(a,k,l),c.splice(j,0,k)}r(a,b)},_matchesContentSelect:function(a,b){var c=b.getAttribute("select");if(!c)return!0;if(c=c.trim(),!c)return!0;if(!(a instanceof Element))return!1;var d=/^(:not\()?[*.#[a-zA-Z_|]/;return!!d.test(c)&&this.elementMatches(c,a)},_elementAdd:function(){},_elementRemove:function(){}});var b=Polymer.DomApi.saveLightChildrenIfNeeded,c=Polymer.DomApi.getLightChildren,d=Polymer.DomApi.matchesSelector,e=Polymer.DomApi.hasInsertionPoint,f=Polymer.DomApi.getComposedChildren,g=Polymer.DomApi.getComposedParent,h=Polymer.DomApi.removeFromComposedParent,n=Element.prototype.insertBefore,o=Element.prototype.removeChild,w=window.CustomElements&&!CustomElements.useNative}(),Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot(),this.shadowRoot.appendChild(this.root),this.root=this.shadowRoot}}),Polymer.DomModule=document.createElement("dom-module"),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepAttributes(),this._prepBehaviors(),this._prepConstructor(),this._prepTemplate(),this._prepShady()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._poolContent(),this._pushHost(),this._stampTemplate(),this._popHost(),this._marshalHostAttributes(),this._setupDebouncers(),this._marshalBehaviors(),this._tryReady()},_marshalBehavior:function(a){}}),Polymer.nar=[],Polymer.Annotations={parseAnnotations:function(a){var b=[],c=a._content||a.content;return this._parseNodeAnnotations(c,b),b},_parseNodeAnnotations:function(a,b){return a.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(a,b):this._parseElementAnnotations(a,b)},_bindingRegex:/([^{[]*)({{|\[\[)([^}\]]*)(?:]]|}})/g,_parseBindings:function(a){for(var d,e,b=this._bindingRegex,c=[];null!==(d=b.exec(a));){d[1]&&c.push({literal:d[1]});var f=d[2][0],g=d[3].trim(),h=!1;"!"==g[0]&&(h=!0,g=g.substring(1).trim());var i,j,k;"{"==f&&(k=g.indexOf("::"))>0&&(j=g.substring(k+2),g=g.substring(0,k),i=!0),c.push({compoundIndex:c.length,value:g,mode:f,negate:h,event:j,customEvent:i}),e=b.lastIndex}if(e&&e<a.length){var l=a.substring(e);l&&c.push({literal:l})}if(c.length)return c},_literalFromParts:function(a){for(var b="",c=0;c<a.length;c++){var d=a[c].literal;b+=d||""}return b},_parseTextNodeAnnotation:function(a,b){var c=this._parseBindings(a.textContent);if(c){a.textContent=this._literalFromParts(c)||" ";var d={bindings:[{kind:"text",name:"textContent",parts:c,isCompound:1!==c.length}]};return b.push(d),d}},_parseElementAnnotations:function(a,b){var c={bindings:[],events:[]};return"content"===a.localName&&(b._hasContent=!0),this._parseChildNodesAnnotations(a,c,b),a.attributes&&(this._parseNodeAttributeAnnotations(a,c,b),this.prepElement&&this.prepElement(a)),(c.bindings.length||c.events.length||c.id)&&b.push(c),c},_parseChildNodesAnnotations:function(a,b,c,d){if(a.firstChild)for(var e=0,f=a.firstChild;f;f=f.nextSibling,e++){if("template"!==f.localName||f.hasAttribute("preserve-content")||this._parseTemplate(f,e,c,b),f.nodeType===Node.TEXT_NODE)for(var g=f.nextSibling;g&&g.nodeType===Node.TEXT_NODE;)f.textContent+=g.textContent,a.removeChild(g),g=g.nextSibling;var h=this._parseNodeAnnotations(f,c,d);h&&(h.parent=b,h.index=e)}},_parseTemplate:function(a,b,c,d){var e=document.createDocumentFragment();e._notes=this.parseAnnotations(a),e.appendChild(a.content),c.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:e,parent:d,index:b})},_parseNodeAttributeAnnotations:function(a,b){for(var e,c=Array.prototype.slice.call(a.attributes),d=c.length-1;e=c[d];d--){var h,f=e.name,g=e.value;"on-"===f.slice(0,3)?(a.removeAttribute(f),b.events.push({name:f.slice(3),value:g})):(h=this._parseNodeAttributeAnnotation(a,f,g))?b.bindings.push(h):"id"===f&&(b.id=g)}},_parseNodeAttributeAnnotation:function(a,b,c){var d=this._parseBindings(c);if(d){var e=b,f="property";"$"==b[b.length-1]&&(b=b.slice(0,-1),f="attribute");var g=this._literalFromParts(d);return g&&"attribute"==f&&a.setAttribute(b,g),"input"==a.localName&&"value"==b&&a.setAttribute(e,""),a.removeAttribute(e),"property"===f&&(b=Polymer.CaseMap.dashToCamelCase(b)),{kind:f,name:b,parts:d,literal:g,isCompound:1!==d.length}}},_localSubTree:function(a,b){return a===b?a.childNodes:a._lightChildren||a.childNodes},findAnnotatedNode:function(a,b){var c=b.parent&&Polymer.Annotations.findAnnotatedNode(a,b.parent);return c?Polymer.Annotations._localSubTree(c,a)[b.index]:a}},function(){function a(a,b){return a.replace(h,function(a,d,e,f){return d+"'"+c(e.replace(/["']/g,""),b)+"'"+f})}function b(b,d){for(var e in i)for(var k,l,m,f=i[e],g=0,h=f.length;g<h&&(k=f[g]);g++)"*"!==e&&b.localName!==e||(l=b.attributes[k],m=l&&l.value,m&&m.search(j)<0&&(l.value="style"===k?a(m,d):c(m,d)))}function c(a,b){if(a&&"#"===a[0])return a;var c=g(b);return c.href=a,c.href||a}function f(a,b){return d||(d=document.implementation.createHTMLDocument("temp"),e=d.createElement("base"),d.head.appendChild(e)),e.href=b,c(a,d)}function g(a){return a.__urlResolver||(a.__urlResolver=a.createElement("a"))}var d,e,h=/(url\()([^)]*)(\))/g,i={"*":["href","src","style","url"],form:["action"]},j=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:a,resolveAttrs:b,resolveUrl:f}}(),Polymer.Base._addFeature({_prepAnnotations:function(){this._template?(Polymer.Annotations.prepElement=this._prepElement.bind(this),this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes),Polymer.Annotations.prepElement=null):this._notes=[]},_processAnnotations:function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.bindings.length;d++)for(var e=c.bindings[d],f=0;f<e.parts.length;f++){var g=e.parts[f];g.literal||(g.signature=this._parseMethod(g.value),g.signature||(g.model=this._modelForPath(g.value)))}if(c.templateContent){this._processAnnotations(c.templateContent._notes);var h=c.templateContent._parentProps=this._discoverTemplateParentProps(c.templateContent._notes),i=[];for(var j in h)i.push({index:c.index,kind:"property",name:"_parent_"+j,parts:[{mode:"{",model:j,value:j}]});c.bindings=c.bindings.concat(i)}}},_discoverTemplateParentProps:function(a){var b={};return a.forEach(function(a){if(a.bindings.forEach(function(a){a.parts.forEach(function(a){if(a.signature)for(var c=a.signature.args,d=0;d<c.length;d++)b[c[d].model]=!0;else b[a.model]=!0})}),a.templateContent){var c=a.templateContent._parentProps;Polymer.Base.mixin(b,c)}}),b},_prepElement:function(a){Polymer.ResolveUrl.resolveAttrs(a,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(a){for(var b=this._notes,c=this._nodes,d=0;d<b.length;d++){var e=b[d],f=c[d];this._configureTemplateContent(e,f),this._configureCompoundBindings(e,f)}},_configureTemplateContent:function(a,b){a.templateContent&&(b._content=a.templateContent)},_configureCompoundBindings:function(a,b){for(var c=a.bindings,d=0;d<c.length;d++){var e=c[d];if(e.isCompound){for(var f=b.__compoundStorage__||(b.__compoundStorage__={}),g=e.parts,h=new Array(g.length),i=0;i<g.length;i++)h[i]=g[i].literal;var j=e.name;f[j]=h,e.literal&&"property"==e.kind&&(b._configValue?b._configValue(j,e.literal):b[j]=e.literal)}}},_marshalIdNodes:function(){this.$={},this._notes.forEach(function(a){a.id&&(this.$[a.id]=this._findAnnotatedNode(this.root,a))},this)},_marshalAnnotatedNodes:function(){this._nodes&&(this._nodes=this._nodes.map(function(a){return this._findAnnotatedNode(this.root,a)},this))},_marshalAnnotatedListeners:function(){this._notes.forEach(function(a){if(a.events&&a.events.length){var b=this._findAnnotatedNode(this.root,a);a.events.forEach(function(a){this.listen(b,a.name,a.value)},this)}},this)}}),Polymer.Base._addFeature({listeners:{},_listenListeners:function(a){var b,c,d;for(d in a)d.indexOf(".")<0?(b=this,c=d):(c=d.split("."),b=this.$[c[0]],c=c[1]),this.listen(b,c,a[d])},listen:function(a,b,c){var d=this._recallEventHandler(this,b,a,c);d||(d=this._createEventHandler(a,b,c)),d._listening||(this._listen(a,b,d),d._listening=!0)},_boundListenerKey:function(a,b){return a+":"+b},_recordEventHandler:function(a,b,c,d,e){var f=a.__boundListeners;f||(f=a.__boundListeners=new WeakMap);var g=f.get(c);g||(g={},f.set(c,g));var h=this._boundListenerKey(b,d);g[h]=e},_recallEventHandler:function(a,b,c,d){var e=a.__boundListeners;if(e){var f=e.get(c);if(f){var g=this._boundListenerKey(b,d);return f[g]}}},_createEventHandler:function(a,b,c){var d=this,e=function(a){d[c]?d[c](a,a.detail):d._warn(d._logf("_createEventHandler","listener method `"+c+"` not defined"))};return e._listening=!1,this._recordEventHandler(d,b,a,c,e),e},unlisten:function(a,b,c){var d=this._recallEventHandler(this,b,a,c);d&&(this._unlisten(a,b,d),d._listening=!1)},_listen:function(a,b,c){a.addEventListener(b,c)},_unlisten:function(a,b,c){a.removeEventListener(b,c)}}),function(){"use strict";function n(a){for(var c,b=0;b<i.length;b++)c=i[b],a?document.addEventListener(c,m,!0):document.removeEventListener(c,m,!0)}function o(){if(!l){r.mouse.mouseIgnoreJob||n(!0);var a=function(){n(),r.mouse.target=null,r.mouse.mouseIgnoreJob=null};r.mouse.mouseIgnoreJob=Polymer.Debounce(r.mouse.mouseIgnoreJob,a,h)}}function p(a){var b=a.type;if(i.indexOf(b)===-1)return!1;if("mousemove"===b){var c=void 0===a.buttons?1:a.buttons;return a instanceof window.MouseEvent&&!k&&(c=j[a.which]||0),Boolean(1&c)}var d=void 0===a.button?0:a.button;return 0===d}function q(a){if("click"===a.type){if(0===a.detail)return!0;var b=v.findOriginalTarget(a),c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function s(a){for(var f,b=Polymer.dom(a).path,c="auto",e=0;e<b.length;e++)if(f=b[e],f[d]){c=f[d];break}return c}function t(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener("mousemove",b),document.addEventListener("mouseup",c)}function u(a){document.removeEventListener("mousemove",a.movefn),document.removeEventListener("mouseup",a.upfn)}var a="string"==typeof document.head.style.touchAction,b="__polymerGestures",c="__polymerGesturesHandled",d="__polymerGesturesTouchAction",e=25,f=5,g=2,h=2500,i=["mousedown","mousemove","mouseup","click"],j=[0,1,4,2],k=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(a){return!1}}(),l=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),m=function(a){if(a[c]={skip:!0},"click"===a.type){for(var b=Polymer.dom(a).path,d=0;d<b.length;d++)if(b[d]===r.mouse.target)return;a.preventDefault(),a.stopPropagation()}},r={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}},v={gestures:{},recognizers:[],deepTargetFind:function(a,b){for(var c=document.elementFromPoint(a,b),d=c;d&&d.shadowRoot;)d=d.shadowRoot.elementFromPoint(a,b),d&&(c=d);return c},findOriginalTarget:function(a){return a.path?a.path[0]:a.target},handleNative:function(d){var e,f=d.type,g=d.currentTarget,h=g[b],i=h[f];if(i){if(!d[c]&&(d[c]={},"touch"===f.slice(0,5))){var j=d.changedTouches[0];if("touchstart"===f&&1===d.touches.length&&(r.touch.id=j.identifier),r.touch.id!==j.identifier)return;a||"touchstart"!==f&&"touchmove"!==f||v.handleTouchAction(d),"touchend"===f&&(r.mouse.target=Polymer.dom(d).rootTarget,o(!0))}if(e=d[c],!e.skip){for(var m,k=v.recognizers,l=0;l<k.length;l++)m=k[l],i[m.name]&&!e[m.name]&&m.flow&&m.flow.start.indexOf(d.type)>-1&&m.reset&&m.reset();for(var m,l=0;l<k.length;l++)m=k[l],i[m.name]&&!e[m.name]&&(e[m.name]=!0,m[f](d))}}},handleTouchAction:function(a){var b=a.changedTouches[0],c=a.type;if("touchstart"===c)r.touch.x=b.clientX,r.touch.y=b.clientY,r.touch.scrollDecided=!1;else if("touchmove"===c){if(r.touch.scrollDecided)return;r.touch.scrollDecided=!0;var d=s(a),e=!1,f=Math.abs(r.touch.x-b.clientX),g=Math.abs(r.touch.y-b.clientY);a.cancelable&&("none"===d?e=!0:"pan-x"===d?e=g>f:"pan-y"===d&&(e=f>g)),e?a.preventDefault():v.prevent("track")}},add:function(a,c,d){var e=this.gestures[c],f=e.deps,g=e.name,h=a[b];h||(a[b]=h={});for(var k,m,j=0;j<f.length;j++)k=f[j],l&&i.indexOf(k)>-1||(m=h[k],m||(h[k]=m={_count:0}),0===m._count&&a.addEventListener(k,this.handleNative),m[g]=(m[g]||0)+1,m._count=(m._count||0)+1);a.addEventListener(c,d),e.touchAction&&this.setTouchAction(a,e.touchAction)},remove:function(a,c,d){var e=this.gestures[c],f=e.deps,g=e.name,h=a[b];if(h)for(var j,k,i=0;i<f.length;i++)j=f[i],k=h[j],k&&k[g]&&(k[g]=(k[g]||1)-1,k._count=(k._count||1)-1,0===k._count&&a.removeEventListener(j,this.handleNative));a.removeEventListener(c,d)},register:function(a){this.recognizers.push(a);for(var b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},findRecognizerByEvent:function(a){for(var c,b=0;b<this.recognizers.length;b++){c=this.recognizers[b];for(var e,d=0;d<c.emits.length;d++)if(e=c.emits[d],e===a)return c}return null},setTouchAction:function(b,c){a&&(b.style.touchAction=c),b[d]=c},fire:function(a,b,c){var d=Polymer.Base.fire(b,c,{node:a,bubbles:!0,cancelable:!0});if(d.defaultPrevented){var e=c.sourceEvent;e&&e.preventDefault&&e.preventDefault()}},prevent:function(a){var b=this.findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)}};v.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:function(){},upfn:function(){}},reset:function(){u(this.info)},mousedown:function(a){if(p(a)){var b=v.findOriginalTarget(a),c=this,d=function(d){p(d)||(c.fire("up",b,d),u(c.info))},e=function(d){p(d)&&c.fire("up",b,d),u(c.info)};t(this.info,d,e),this.fire("down",b,a)}},touchstart:function(a){this.fire("down",v.findOriginalTarget(a),a.changedTouches[0])},touchend:function(a){this.fire("up",v.findOriginalTarget(a),a.changedTouches[0])},fire:function(a,b,c){v.fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,prevent:v.prevent.bind(v)})}}),v.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(a){this.moves.length>g&&this.moves.shift(),this.moves.push(a)},movefn:function(){},upfn:function(){},prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,u(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;var c=Math.abs(this.info.x-a),d=Math.abs(this.info.y-b);return c>=f||d>=f},mousedown:function(a){if(p(a)){var b=v.findOriginalTarget(a),c=this,d=function(d){var e=d.clientX,f=d.clientY;c.hasMovedEnough(e,f)&&(c.info.state=c.info.started?"mouseup"===d.type?"end":"track":"start",c.info.addMove({x:e,y:f}),p(d)||(c.info.state="end",u(c.info)),c.fire(b,d),c.info.started=!0)},e=function(b){c.info.started&&(v.prevent("tap"),d(b)),u(c.info)};t(this.info,d,e),this.info.x=a.clientX,this.info.y=a.clientY}},touchstart:function(a){var b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){var b=v.findOriginalTarget(a),c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&(this.info.addMove({x:d,y:e}),this.fire(b,c),this.info.state="track",this.info.started=!0)},touchend:function(a){var b=v.findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(v.prevent("tap"),this.info.state="end",this.info.addMove({x:c.clientX,y:c.clientY}),this.fire(b,c))},fire:function(a,b){var g,c=this.info.moves[this.info.moves.length-2],d=this.info.moves[this.info.moves.length-1],e=d.x-this.info.x,f=d.y-this.info.y,h=0;return c&&(g=d.x-c.x,h=d.y-c.y),v.fire(a,"track",{state:this.info.state,x:b.clientX,y:b.clientY,dx:e,dy:f,ddx:g,ddy:h,sourceEvent:b,hover:function(){return v.deepTargetFind(b.clientX,b.clientY)}})}}),v.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){p(a)&&this.save(a)},click:function(a){p(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0])},touchend:function(a){this.forward(a.changedTouches[0])},forward:function(a){var b=Math.abs(a.clientX-this.info.x),c=Math.abs(a.clientY-this.info.y),d=v.findOriginalTarget(a);(isNaN(b)||isNaN(c)||b<=e&&c<=e||q(a))&&(this.info.prevent||v.fire(d,"tap",{x:a.clientX,y:a.clientY,sourceEvent:a}))}});var w={x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_listen:function(a,b,c){v.gestures[b]?v.add(a,b,c):a.addEventListener(b,c);
},_unlisten:function(a,b,c){v.gestures[b]?v.remove(a,b,c):a.removeEventListener(b,c)},setScrollDirection:function(a,b){b=b||this,v.setTouchAction(b,w[a]||"auto")}}),Polymer.Gestures=v}(),Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(a,b){return b>0?~setTimeout(a,b):(this._twiddle.textContent=this._twiddleContent++,this._callbacks.push(a),this._currVal++)},cancel:function(a){if(a<0)clearTimeout(~a);else{var b=a-this._lastVal;if(b>=0){if(!this._callbacks[b])throw"invalid async handle: "+a;this._callbacks[b]=null}}},_atEndOfMicrotask:function(){for(var a=this._callbacks.length,b=0;b<a;b++){var c=this._callbacks[b];if(c)try{c()}catch(a){throw b++,this._callbacks.splice(0,b),this._lastVal+=b,this._twiddle.textContent=this._twiddleContent++,a}}this._callbacks.splice(0,a),this._lastVal+=a}},new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()}).observe(Polymer.Async._twiddle,{characterData:!0}),Polymer.Debounce=function(){function c(a,c,d){return a?a.stop():a=new b(this),a.go(c,d),a}var a=Polymer.Async,b=function(a){this.context=a,this.boundComplete=this.complete.bind(this)};return b.prototype={go:function(b,c){var d;this.finish=function(){a.cancel(d)},d=a.run(this.boundComplete,c),this.callback=b},stop:function(){this.finish&&(this.finish(),this.finish=null)},complete:function(){this.finish&&(this.stop(),this.callback.call(this.context))}},c}(),Polymer.Base._addFeature({$$:function(a){return Polymer.dom(this.root).querySelector(a)},toggleClass:function(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?Polymer.dom(c).classList.add(a):Polymer.dom(c).classList.remove(a)},toggleAttribute:function(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?Polymer.dom(c).setAttribute(a,""):Polymer.dom(c).removeAttribute(a)},classFollows:function(a,b,c){c&&Polymer.dom(c).classList.remove(a),b&&Polymer.dom(b).classList.add(a)},attributeFollows:function(a,b,c){c&&Polymer.dom(c).removeAttribute(a),b&&Polymer.dom(b).setAttribute(a,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){var a=Polymer.dom(this).getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var d,a=this.getEffectiveChildNodes(),b=[],c=0;d=a[c];c++)d.nodeType!==Node.COMMENT_NODE&&b.push(Polymer.dom(d).textContent);return b.join("")},queryEffectiveChildren:function(a){var b=Polymer.dom(this).queryDistributedElements(a);return b&&b[0]},queryAllEffectiveChildren:function(a){return Polymer.dom(this).queryAllDistributedElements(a)},getContentChildNodes:function(a){var b=Polymer.dom(this.root).querySelector(a||"content");return b?Polymer.dom(b).getDistributedNodes():[]},getContentChildren:function(a){return this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE})},fire:function(a,b,c){c=c||Polymer.nob;var d=c.node||this,b=null===b||void 0===b?Polymer.nob:b,e=void 0===c.bubbles||c.bubbles,f=Boolean(c.cancelable),g=new CustomEvent(a,{bubbles:Boolean(e),cancelable:f,detail:b});return d.dispatchEvent(g),g},async:function(a,b){return Polymer.Async.run(a.bind(this),b)},cancelAsync:function(a){Polymer.Async.cancel(a)},arrayDelete:function(a,b){var c;if(Array.isArray(a)){if(c=a.indexOf(b),c>=0)return a.splice(c,1)}else{var d=this._get(a);if(c=d.indexOf(b),c>=0)return this.splice(a,c,1)}},transform:function(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a},translate3d:function(a,b,c,d){d=d||this,this.transform("translate3d("+a+","+b+","+c+")",d)},importHref:function(a,b,c){var d=document.createElement("link");return d.rel="import",d.href=a,b&&(d.onload=b.bind(this)),c&&(d.onerror=c.bind(this)),document.head.appendChild(d),d},create:function(a,b){var c=document.createElement(a);if(b)for(var d in b)c[d]=b[d];return c},isLightDescendant:function(a){return this!==a&&this.contains(a)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(a).getOwnerRoot()},isLocalDescendant:function(a){return this.root===Polymer.dom(a).getOwnerRoot()}}),Polymer.Bind={prepareModel:function(a){a._propertyEffects={},a._bindListeners=[],Polymer.Base.mixin(a,this._modelApi)},_modelApi:{_notifyChange:function(a){var b=Polymer.CaseMap.camelToDashCase(a)+"-changed";Polymer.Base.fire(b,{value:this[a]},{bubbles:!1,node:this})},_propertySetter:function(a,b,c,d){var e=this.__data__[a];return e===b||e!==e&&b!==b||(this.__data__[a]=b,"object"==typeof b&&this._clearPath(a),this._propertyChanged&&this._propertyChanged(a,b,e),c&&this._effectEffects(a,b,c,e,d)),e},__setProperty:function(a,b,c,d){d=d||this;var e=d._propertyEffects&&d._propertyEffects[a];e?d._propertySetter(a,b,e,c):d[a]=b},_effectEffects:function(a,b,c,d,e){c.forEach(function(c){var f=Polymer.Bind["_"+c.kind+"Effect"];f&&f.call(this,a,b,c.effect,d,e)},this)},_clearPath:function(a){for(var b in this.__data__)0===b.indexOf(a+".")&&(this.__data__[b]=void 0)}},ensurePropertyEffects:function(a,b){var c=a._propertyEffects[b];return c||(c=a._propertyEffects[b]=[]),c},addPropertyEffect:function(a,b,c,d){var e=this.ensurePropertyEffects(a,b);e.push({kind:c,effect:d})},createBindings:function(a){var b=a._propertyEffects;if(b)for(var c in b){var d=b[c];d.sort(this._sortPropertyEffects),this._createAccessors(a,c,d)}},_sortPropertyEffects:function(){var a={compute:0,annotation:1,computedAnnotation:2,reflect:3,notify:4,observer:5,complexObserver:6,function:7};return function(b,c){return a[b.kind]-a[c.kind]}}(),_createAccessors:function(a,b,c){var d={get:function(){return this.__data__[b]}},e=function(a){this._propertySetter(b,a,c)},f=a.getPropertyInfo&&a.getPropertyInfo(b);f&&f.readOnly?f.computed||(a["_set"+this.upper(b)]=e):d.set=e,Object.defineProperty(a,b,d)},upper:function(a){return a[0].toUpperCase()+a.substring(1)},_addAnnotatedListener:function(a,b,c,d,e){var f=this._notedListenerFactory(c,d,this._isStructured(d),this._isEventBogus),g=e||Polymer.CaseMap.camelToDashCase(c)+"-changed";a._bindListeners.push({index:b,property:c,path:d,changedFn:f,event:g})},_isStructured:function(a){return a.indexOf(".")>0},_isEventBogus:function(a,b){return a.path&&a.path[0]!==b},_notedListenerFactory:function(a,b,c,d){return function(e,f){if(!d(e,f))if(e.detail&&e.detail.path)this._notifyPath(this._fixPath(b,a,e.detail.path),e.detail.value);else{var g=f[a];c?this.__data__[b]!=g&&this.set(b,g):this[b]=f[a]}}},prepareInstance:function(a){a.__data__=Object.create(null)},setupBindListeners:function(a){a._bindListeners.forEach(function(b){var c=a._nodes[b.index];c.addEventListener(b.event,a._notifyListener.bind(a,b.changedFn))})}},Polymer.Base.extend(Polymer.Bind,{_shouldAddListener:function(a){return a.name&&"attribute"!=a.kind&&"text"!=a.kind&&!a.isCompound&&"{"===a.parts[0].mode&&!a.parts[0].negate},_annotationEffect:function(a,b,c){a!=c.value&&(b=this._get(c.value),this.__data__[c.value]=b);var d=c.negate?!b:b;if(!c.customEvent||this._nodes[c.index][c.name]!==d)return this._applyEffectValue(c,d)},_reflectEffect:function(a){this.reflectPropertyToAttribute(a)},_notifyEffect:function(a,b,c,d,e){e||this._notifyChange(a)},_functionEffect:function(a,b,c,d,e){c.call(this,a,b,d,e)},_observerEffect:function(a,b,c,d){var e=this[c.method];e?e.call(this,b,d):this._warn(this._logf("_observerEffect","observer method `"+c.method+"` not defined"))},_complexObserverEffect:function(a,b,c){var d=this[c.method];if(d){var e=Polymer.Bind._marshalArgs(this.__data__,c,a,b);e&&d.apply(this,e)}else this._warn(this._logf("_complexObserverEffect","observer method `"+c.method+"` not defined"))},_computeEffect:function(a,b,c){var d=Polymer.Bind._marshalArgs(this.__data__,c,a,b);if(d){var e=this[c.method];e?this.__setProperty(c.name,e.apply(this,d)):this._warn(this._logf("_computeEffect","compute method `"+c.method+"` not defined"))}},_annotatedComputationEffect:function(a,b,c){var d=this._rootDataHost||this,e=d[c.method];if(e){var f=Polymer.Bind._marshalArgs(this.__data__,c,a,b);if(f){var g=e.apply(d,f);c.negate&&(g=!g),this._applyEffectValue(c,g)}}else d._warn(d._logf("_annotatedComputationEffect","compute method `"+c.method+"` not defined"))},_marshalArgs:function(a,b,c,d){for(var e=[],f=b.args,g=0,h=f.length;g<h;g++){var k,i=f[g],j=i.name;if(k=i.literal?i.value:i.structured?Polymer.Base._get(j,a):a[j],f.length>1&&void 0===k)return;if(i.wildcard){var l=0===j.indexOf(c+"."),m=0===b.trigger.name.indexOf(j)&&!l;e[g]={path:m?c:j,value:m?d:k,base:k}}else e[g]=k}return e}}),Polymer.Base._addFeature({_addPropertyEffect:function(a,b,c){Polymer.Bind.addPropertyEffect(this,a,b,c)},_prepEffects:function(){Polymer.Bind.prepareModel(this),this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(a){if(a)for(var b in a){var c=a[b];c.observer&&this._addObserverEffect(b,c.observer),c.computed&&(c.readOnly=!0,this._addComputedEffect(b,c.computed)),c.notify&&this._addPropertyEffect(b,"notify"),c.reflectToAttribute&&this._addPropertyEffect(b,"reflect"),c.readOnly&&Polymer.Bind.ensurePropertyEffects(this,b)}},_addComputedEffect:function(a,b){var c=this._parseMethod(b);c.args.forEach(function(b){this._addPropertyEffect(b.model,"compute",{method:c.method,args:c.args,trigger:b,name:a})},this)},_addObserverEffect:function(a,b){this._addPropertyEffect(a,"observer",{method:b,property:a})},_addComplexObserverEffects:function(a){a&&a.forEach(function(a){this._addComplexObserverEffect(a)},this)},_addComplexObserverEffect:function(a){var b=this._parseMethod(a);b.args.forEach(function(a){this._addPropertyEffect(a.model,"complexObserver",{method:b.method,args:b.args,trigger:a})},this)},_addAnnotationEffects:function(a){this._nodes=[],a.forEach(function(a){var b=this._nodes.push(a)-1;a.bindings.forEach(function(a){this._addAnnotationEffect(a,b)},this)},this)},_addAnnotationEffect:function(a,b){Polymer.Bind._shouldAddListener(a)&&Polymer.Bind._addAnnotatedListener(this,b,a.name,a.parts[0].value,a.parts[0].event);for(var c=0;c<a.parts.length;c++){var d=a.parts[c];d.signature?this._addAnnotatedComputationEffect(a,d,b):d.literal||this._addPropertyEffect(d.model,"annotation",{kind:a.kind,index:b,name:a.name,value:d.value,isCompound:a.isCompound,compoundIndex:d.compoundIndex,event:d.event,customEvent:d.customEvent,negate:d.negate})}},_addAnnotatedComputationEffect:function(a,b,c){var d=b.signature;d.static?this.__addAnnotatedComputationEffect("__static__",c,a,b,null):d.args.forEach(function(d){d.literal||this.__addAnnotatedComputationEffect(d.model,c,a,b,d)},this)},__addAnnotatedComputationEffect:function(a,b,c,d,e){this._addPropertyEffect(a,"annotatedComputation",{index:b,isCompound:c.isCompound,compoundIndex:d.compoundIndex,kind:c.kind,name:c.name,negate:d.negate,method:d.signature.method,args:d.signature.args,trigger:e})},_parseMethod:function(a){var b=a.match(/([^\s]+)\((.*)\)/);if(b){var c={method:b[1],static:!0};if(b[2].trim()){var d=b[2].replace(/\\,/g,"&comma;").split(",");return this._parseArgs(d,c)}return c.args=Polymer.nar,c}},_parseArgs:function(a,b){return b.args=a.map(function(a){var c=this._parseArg(a);return c.literal||(b.static=!1),c},this),b},_parseArg:function(a){var b=a.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),c={name:b,model:this._modelForPath(b)},d=b[0];switch("-"===d&&(d=b[1]),d>="0"&&d<="9"&&(d="#"),d){case"'":case'"':c.value=b.slice(1,-1),c.literal=!0;break;case"#":c.value=Number(b),c.literal=!0}return c.literal||(c.structured=b.indexOf(".")>0,c.structured&&(c.wildcard=".*"==b.slice(-2),c.wildcard&&(c.name=b.slice(0,-2)))),c},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this),Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(a,b){var c=this._nodes[a.index],d=a.name;if(a.isCompound){var e=c.__compoundStorage__[d];e[a.compoundIndex]=b,b=e.join("")}return"attribute"!=a.kind?("className"===d&&(b=this._scopeElementClass(c,b)),("textContent"===d||"input"==c.localName&&"value"==d)&&(b=void 0==b?"":b),c[d]=b):void this.serializeValueToAttribute(b,d,c)},_executeStaticEffects:function(){this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}}),Polymer.Base._addFeature({_setupConfigure:function(a){this._config={};for(var b in a)void 0!==a[b]&&(this._config[b]=a[b]);this._handlers=[]},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(a){var b=this._clientsReadied?this:this._config;this._setAttributeToProperty(b,a)},_configValue:function(a,b){this._config[a]=b},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences(),this._aboveConfig=this.mixin({},this._config);var a={};this.behaviors.forEach(function(b){this._configureProperties(b.properties,a)},this),this._configureProperties(this.properties,a),this._mixinConfigure(a,this._aboveConfig),this._config=a,this._distributeConfig(this._config)},_configureProperties:function(a,b){for(var c in a){var d=a[c];if(void 0!==d.value){var e=d.value;"function"==typeof e&&(e=e.call(this,this._config)),b[c]=e}}},_mixinConfigure:function(a,b){for(var c in b)this.getPropertyInfo(c).readOnly||(a[c]=b[c])},_distributeConfig:function(a){var b=this._propertyEffects;if(b)for(var c in a){var d=b[c];if(d)for(var g,e=0,f=d.length;e<f&&(g=d[e]);e++)if("annotation"===g.kind&&!g.isCompound){var h=this._nodes[g.effect.index];if(h._configValue){var i=c===g.effect.value?a[c]:this._get(g.effect.value,a);h._configValue(g.effect.name,i)}}}},_afterClientsReady:function(){this._executeStaticEffects(),this._applyConfig(this._config,this._aboveConfig),this._flushHandlers()},_applyConfig:function(a,b){for(var c in a)void 0===this[c]&&this.__setProperty(c,a[c],c in b)},_notifyListener:function(a,b){return this._clientsReadied?a.call(this,b,b.target):void this._queueHandler([a,b,b.target])},_queueHandler:function(a){this._handlers.push(a)},_flushHandlers:function(){for(var d,a=this._handlers,b=0,c=a.length;b<c&&(d=a[b]);b++)d[0].call(this,d[1],d[2]);this._handlers=[]}}),function(){"use strict";Polymer.Base._addFeature({notifyPath:function(a,b,c){var d={};this._get(a,this,d),this._notifyPath(d.path,b,c)},_notifyPath:function(a,b,c){var d=this._propertySetter(a,b);if(d!==b&&(d===d||b===b))return this._pathEffector(a,b),c||this._notifyPathUp(a,b),!0},_getPathParts:function(a){if(Array.isArray(a)){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].toString().split("."),e=0;e<d.length;e++)b.push(d[e]);return b}return a.toString().split(".")},set:function(a,b,c){var f,d=c||this,e=this._getPathParts(a),g=e[e.length-1];if(e.length>1){for(var h=0;h<e.length-1;h++){var i=e[h];if(f&&"#"==i[0]?d=Polymer.Collection.get(f).getItem(i):(d=d[i],f&&parseInt(i,10)==i&&(e[h]=Polymer.Collection.get(f).getKey(d))),!d)return;f=Array.isArray(d)?d:null}if(f){var j=Polymer.Collection.get(f);if("#"==g[0]){var k=g,l=j.getItem(k);g=f.indexOf(l),j.setItem(k,b)}else if(parseInt(g,10)==g){var l=d[g],k=j.getKey(l);e[h]=k,j.setItem(k,b)}}d[g]=b,c||this._notifyPath(e.join("."),b)}else d[a]=b},get:function(a,b){return this._get(a,b)},_get:function(a,b,c){for(var f,d=b||this,e=this._getPathParts(a),g=0;g<e.length;g++){if(!d)return;var h=e[g];f&&"#"==h[0]?d=Polymer.Collection.get(f).getItem(h):(d=d[h],c&&f&&parseInt(h,10)==h&&(e[g]=Polymer.Collection.get(f).getKey(d))),f=Array.isArray(d)?d:null}return c&&(c.path=e.join(".")),d},_pathEffector:function(a,b){var c=this._modelForPath(a),d=this._propertyEffects[c];d&&d.forEach(function(c){var d=this["_"+c.kind+"PathEffect"];d&&d.call(this,a,b,c.effect)},this),this._boundPaths&&this._notifyBoundPaths(a,b)},_annotationPathEffect:function(a,b,c){if(c.value===a||0===c.value.indexOf(a+"."))Polymer.Bind._annotationEffect.call(this,a,b,c);else if(0===a.indexOf(c.value+".")&&!c.negate){var d=this._nodes[c.index];if(d&&d._notifyPath){var e=this._fixPath(c.name,c.value,a);d._notifyPath(e,b,!0)}}},_complexObserverPathEffect:function(a,b,c){this._pathMatchesEffect(a,c)&&Polymer.Bind._complexObserverEffect.call(this,a,b,c)},_computePathEffect:function(a,b,c){this._pathMatchesEffect(a,c)&&Polymer.Bind._computeEffect.call(this,a,b,c)},_annotatedComputationPathEffect:function(a,b,c){this._pathMatchesEffect(a,c)&&Polymer.Bind._annotatedComputationEffect.call(this,a,b,c)},_pathMatchesEffect:function(a,b){var c=b.trigger.name;return c==a||0===c.indexOf(a+".")||b.trigger.wildcard&&0===a.indexOf(c)},linkPaths:function(a,b){this._boundPaths=this._boundPaths||{},b?this._boundPaths[a]=b:this.unlinkPaths(a)},unlinkPaths:function(a){this._boundPaths&&delete this._boundPaths[a]},_notifyBoundPaths:function(a,b){for(var c in this._boundPaths){var d=this._boundPaths[c];0==a.indexOf(c+".")?this._notifyPath(this._fixPath(d,c,a),b):0==a.indexOf(d+".")&&this._notifyPath(this._fixPath(c,d,a),b)}},_fixPath:function(a,b,c){return a+c.slice(b.length)},_notifyPathUp:function(a,b){var c=this._modelForPath(a),d=Polymer.CaseMap.camelToDashCase(c),e=d+this._EVENT_CHANGED;this.fire(e,{path:a,value:b},{bubbles:!1})},_modelForPath:function(a){var b=a.indexOf(".");return b<0?a:a.slice(0,b)},_EVENT_CHANGED:"-changed",notifySplices:function(a,b){var c={},d=this._get(a,this,c);this._notifySplices(d,c.path,b)},_notifySplices:function(a,b,c){var d={keySplices:Polymer.Collection.applySplices(a,c),indexSplices:c};a.hasOwnProperty("splices")||Object.defineProperty(a,"splices",{configurable:!0,writable:!0}),a.splices=d,this._notifyPath(b+".splices",d),this._notifyPath(b+".length",a.length),d.keySplices=null,d.indexSplices=null},_notifySplice:function(a,b,c,d,e){this._notifySplices(a,b,[{index:c,addedCount:d,removed:e,object:a,type:"splice"}])},push:function(a){var b={},c=this._get(a,this,b),d=Array.prototype.slice.call(arguments,1),e=c.length,f=c.push.apply(c,d);return d.length&&this._notifySplice(c,b.path,e,d.length,[]),f},pop:function(a){var b={},c=this._get(a,this,b),d=Boolean(c.length),e=Array.prototype.slice.call(arguments,1),f=c.pop.apply(c,e);return d&&this._notifySplice(c,b.path,c.length,0,[f]),f},splice:function(a,b,c){var d={},e=this._get(a,this,d);b=b<0?e.length-Math.floor(-b):Math.floor(b),b||(b=0);var f=Array.prototype.slice.call(arguments,1),g=e.splice.apply(e,f),h=Math.max(f.length-2,0);return(h||g.length)&&this._notifySplice(e,d.path,b,h,g),g},shift:function(a){var b={},c=this._get(a,this,b),d=Boolean(c.length),e=Array.prototype.slice.call(arguments,1),f=c.shift.apply(c,e);return d&&this._notifySplice(c,b.path,0,0,[f]),f},unshift:function(a){var b={},c=this._get(a,this,b),d=Array.prototype.slice.call(arguments,1),e=c.unshift.apply(c,d);return d.length&&this._notifySplice(c,b.path,0,d.length,[]),e},prepareModelNotifyPath:function(a){this.mixin(a,{fire:Polymer.Base.fire,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_modelForPath:Polymer.Base._modelForPath,_pathMatchesEffect:Polymer.Base._pathMatchesEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})}(),Polymer.Base._addFeature({resolveUrl:function(a){var b=Polymer.DomModule.import(this.is),c="";if(b){var d=b.getAttribute("assetpath")||"";c=Polymer.ResolveUrl.resolveUrl(d,b.ownerDocument.baseURI)}return Polymer.ResolveUrl.resolveUrl(a,c)}}),Polymer.CssParse=function(){var a={parse:function(a){return a=this._clean(a),this._parseCss(this._lex(a),a)},_clean:function(a){return a.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(a){for(var b={start:0,end:a.length},c=b,d=0,f=a.length;d<f;d++)switch(a[d]){case this.OPEN_BRACE:c.rules||(c.rules=[]);var g=c,h=g.rules[g.rules.length-1];c={start:d+1,parent:g,previous:h},g.rules.push(c);break;case this.CLOSE_BRACE:c.end=d+1,c=c.parent||b}return b},_parseCss:function(a,b){var c=b.substring(a.start,a.end-1);if(a.parsedCssText=a.cssText=c.trim(),a.parent){var d=a.previous?a.previous.end:a.parent.start;c=b.substring(d,a.start-1),c=c.substring(c.lastIndexOf(";")+1);var e=a.parsedSelector=a.selector=c.trim();a.atRule=0===e.indexOf(this.AT_START),a.atRule?0===e.indexOf(this.MEDIA_START)?a.type=this.types.MEDIA_RULE:e.match(this._rx.keyframesRule)&&(a.type=this.types.KEYFRAMES_RULE):0===e.indexOf(this.VAR_START)?a.type=this.types.MIXIN_RULE:a.type=this.types.STYLE_RULE}var f=a.rules;if(f)for(var i,g=0,h=f.length;g<h&&(i=f[g]);g++)this._parseCss(i,b);return a},stringify:function(a,b,c){c=c||"";var d="";if(a.cssText||a.rules){var e=a.rules;if(!e||!b&&this._hasMixinRules(e))d=b?a.cssText:this.removeCustomProps(a.cssText),d=d.trim(),d&&(d="  "+d+"\n");else for(var h,f=0,g=e.length;f<g&&(h=e[f]);f++)d=this.stringify(h,b,d)}return d&&(a.selector&&(c+=a.selector+" "+this.OPEN_BRACE+"\n"),c+=d,a.selector&&(c+=this.CLOSE_BRACE+"\n\n")),c},_hasMixinRules:function(a){return a[0].selector.indexOf(this.VAR_START)>=0},removeCustomProps:function(a){return a=this.removeCustomPropAssignment(a),this.removeCustomPropApply(a)},removeCustomPropAssignment:function(a){return a.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(a){return a.replace(this._rx.mixinApply,"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^|[\s;])--[^;{]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^|[\s;])?--[^;{]*?:[^{;]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply[\s]*\([^)]*?\)[\s]*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*var[^;]*(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/},VAR_START:"--",MEDIA_START:"@media",AT_START:"@"};return a}(),Polymer.StyleUtil=function(){return{MODULE_STYLES_SELECTOR:"style, link[rel=import][type~=css], template",INCLUDE_ATTR:"include",toCssText:function(a,b,c){return"string"==typeof a&&(a=this.parser.parse(a)),b&&this.forEachStyleRule(a,b),this.parser.stringify(a,c)},forRulesInStyles:function(a,b){if(a)for(var e,c=0,d=a.length;c<d&&(e=a[c]);c++)this.forEachStyleRule(this.rulesForStyle(e),b)},rulesForStyle:function(a){return!a.__cssRules&&a.textContent&&(a.__cssRules=this.parser.parse(a.textContent)),a.__cssRules},clearStyleRules:function(a){a.__cssRules=null},forEachStyleRule:function(a,b){if(a){var d=(a.parsedSelector,!1);a.type===this.ruleTypes.STYLE_RULE?b(a):a.type!==this.ruleTypes.KEYFRAMES_RULE&&a.type!==this.ruleTypes.MIXIN_RULE||(d=!0);var e=a.rules;if(e&&!d)for(var h,f=0,g=e.length;f<g&&(h=e[f]);f++)this.forEachStyleRule(h,b)}},applyCss:function(a,b,c,d){var e=document.createElement("style");if(b&&e.setAttribute("scope",b),e.textContent=a,c=c||document.head,!d){var f=c.querySelectorAll("style[scope]");d=f[f.length-1]}return c.insertBefore(e,d&&d.nextSibling||c.firstChild),e},cssFromModules:function(a,b){for(var c=a.trim().split(" "),d="",e=0;e<c.length;e++)d+=this.cssFromModule(c[e],b);return d},cssFromModule:function(a,b){var c=Polymer.DomModule.import(a);return c&&!c._cssText&&(c._cssText=this._cssFromElement(c)),!c&&b&&console.warn("Could not find style data in module named",a),c&&c._cssText||""},_cssFromElement:function(a){for(var f,b="",c=a.content||a,d=Array.prototype.slice.call(c.querySelectorAll(this.MODULE_STYLES_SELECTOR)),e=0;e<d.length;e++)if(f=d[e],"template"===f.localName)b+=this._cssFromElement(f);else if("style"===f.localName){var g=f.getAttribute(this.INCLUDE_ATTR);g&&(b+=this.cssFromModules(g,!0)),f=f.__appliedElement||f,f.parentNode.removeChild(f),b+=this.resolveCss(f.textContent,a.ownerDocument)}else f.import&&f.import.body&&(b+=this.resolveCss(f.import.body.textContent,f.import));return b},resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}(),Polymer.StyleTransformer=function(){var a=Polymer.Settings.useNativeShadow,b=Polymer.StyleUtil,c={dom:function(a,b,c,d){this._transformDom(a,b||"",c,d)},_transformDom:function(a,b,c,d){a.setAttribute&&this.element(a,b,c,d);for(var e=Polymer.dom(a).childNodes,f=0;f<e.length;f++)this._transformDom(e[f],b,c,d)},element:function(a,b,c,e){if(c)e?a.removeAttribute(d):a.setAttribute(d,b);else if(b)if(a.classList)e?(a.classList.remove(d),a.classList.remove(b)):(a.classList.add(d),a.classList.add(b));else if(a.getAttribute){var f=a.getAttribute(s);e?f&&a.setAttribute(s,f.replace(d,"").replace(b,"")):a.setAttribute(s,f+(f?" ":"")+d+" "+b)}},elementStyles:function(c,d){for(var i,e=c._styles,f="",g=0,h=e.length;g<h&&(i=e[g]);g++){var k=b.rulesForStyle(i);f+=a?b.toCssText(k,d):this.css(k,c.is,c.extends,d,c._scopeCssViaAttr)+"\n\n"}return f.trim()},css:function(a,c,d,e,f){var g=this._calcHostScope(c,d);c=this._calcElementScope(c,f);var h=this;return b.toCssText(a,function(a){a.isScoped||(h.rule(a,c,g),a.isScoped=!0),e&&e(a,c,g)})},_calcElementScope:function(a,b){return a?b?p+a+q:o+a:""},_calcHostScope:function(a,b){return b?"[is="+a+"]":a},rule:function(a,b,c){this._transformRule(a,this._transformComplexSelector,b,c)},_transformRule:function(a,b,c,d){for(var i,e=a.selector.split(f),g=0,h=e.length;g<h&&(i=e[g]);g++)e[g]=b.call(this,i,c,d);a.selector=a.transformedSelector=e.join(f)},_transformComplexSelector:function(a,b,c){var d=!1,e=!1,h=this;return a=a.replace(g,function(a,f,g){if(d)g=g.replace(n," ");else{var i=h._transformCompoundSelector(g,f,b,c);d=d||i.stop,e=e||i.hostContext,f=i.combinator,g=i.value}return f+g}),e&&(a=a.replace(l,function(a,b,d,e){return b+d+" "+c+e+f+" "+b+c+d+e})),a},_transformCompoundSelector:function(a,b,c,d){var e=a.search(n),f=!1;a.indexOf(k)>=0?f=!0:a.indexOf(h)>=0?(a=a.replace(j,function(a,b,c){return d+c}),a=a.replace(h,d)):0!==e&&(a=c?this._transformSimpleSelector(a,c):a),a.indexOf(m)>=0&&(b="");var g;return e>=0&&(a=a.replace(n," "),g=!0),{value:a,combinator:b,stop:g,hostContext:f}},_transformSimpleSelector:function(a,b){var c=a.split(r);return c[0]+=b,c.join(r)},documentRule:function(b){b.selector=b.parsedSelector,this.normalizeRootSelector(b),a||this._transformRule(b,this._transformDocumentSelector)},normalizeRootSelector:function(a){a.selector===i&&(a.selector="body")},_transformDocumentSelector:function(a){return a.match(n)?this._transformComplexSelector(a,e):this._transformSimpleSelector(a.trim(),e)},SCOPE_NAME:"style-scope"},d=c.SCOPE_NAME,e=":not(["+d+"]):not(."+d+")",f=",",g=/(^|[\s>+~]+)([^\s>+~]+)/g,h=":host",i=":root",j=/(\:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,k=":host-context",l=/(.*)(?:\:host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,m="::content",n=/\:\:content|\:\:shadow|\/deep\//,o=".",p="["+d+"~=",q="]",r=":",s="class";return c}(),Polymer.StyleExtends=function(){var a=Polymer.StyleUtil;return{hasExtends:function(a){return Boolean(a.match(this.rx.EXTEND))},transform:function(b){var c=a.rulesForStyle(b),d=this;return a.forEachStyleRule(c,function(a){d._mapRule(a);if(a.parent)for(var c;c=d.rx.EXTEND.exec(a.cssText);){var e=c[1],f=d._findExtendor(e,a);f&&d._extendRule(a,f)}a.cssText=a.cssText.replace(d.rx.EXTEND,"")}),a.toCssText(c,function(a){a.selector.match(d.rx.STRIP)&&(a.cssText="")},!0)},_mapRule:function(a){if(a.parent){for(var e,b=a.parent.map||(a.parent.map={}),c=a.selector.split(","),d=0;d<c.length;d++)e=c[d],b[e.trim()]=a;return b}},_findExtendor:function(a,b){return b.parent&&b.parent.map&&b.parent.map[a]||this._findExtendor(a,b.parent)},_extendRule:function(a,b){a.parent!==b.parent&&this._cloneAndAddRuleToParent(b,a.parent),a.extends=a.extends||(a.extends=[]),a.extends.push(b),b.selector=b.selector.replace(this.rx.STRIP,""),b.selector=(b.selector&&b.selector+",\n")+a.selector,b.extends&&b.extends.forEach(function(b){this._extendRule(a,b)},this)},_cloneAndAddRuleToParent:function(a,b){a=Object.create(a),a.parent=b,a.extends&&(a.extends=a.extends.slice()),b.rules.push(a)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}(),function(){var a=Polymer.Base._prepElement,b=Polymer.Settings.useNativeShadow,c=Polymer.StyleUtil,d=Polymer.StyleTransformer,e=Polymer.StyleExtends;Polymer.Base._addFeature({_prepElement:function(b){this._encapsulateStyle&&d.element(b,this.is,this._scopeCssViaAttr),a.call(this,b)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!b&&Boolean(this._template)),this._styles=this._collectStyles();var a=d.elementStyles(this);if(a&&this._template){var e=c.applyCss(a,this.is,b?this._template.content:null);b||(this._scopeStyle=e)}},_collectStyles:function(){var a=[],b="",d=this.styleModules;if(d)for(var h,f=0,g=d.length;f<g&&(h=d[f]);f++)b+=c.cssFromModule(h);if(b+=c.cssFromModule(this.is)){var i=document.createElement("style");i.textContent=b,e.hasExtends(i.textContent)&&(b=e.transform(i)),a.push(i)}return a},_elementAdd:function(a){this._encapsulateStyle&&(a.__styleScoped?a.__styleScoped=!1:d.dom(a,this.is,this._scopeCssViaAttr))},_elementRemove:function(a){this._encapsulateStyle&&d.dom(a,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(a,c){if(!b){var d=this,e=function(a){if(a.nodeType===Node.ELEMENT_NODE){a.className=d._scopeElementClass(a,a.className);var b=a.querySelectorAll("*");Array.prototype.forEach.call(b,function(a){a.className=d._scopeElementClass(a,a.className)})}};if(e(a),c){var f=new MutationObserver(function(a){a.forEach(function(a){if(a.addedNodes)for(var b=0;b<a.addedNodes.length;b++)e(a.addedNodes[b])})});return f.observe(a,{childList:!0,subtree:!0}),f}}}})}(),Polymer.StyleProperties=function(){"use strict";function e(a,b){var c=parseInt(a/32),d=1<<a%32;b[c]=(b[c]||0)|d}var a=Polymer.Settings.useNativeShadow,b=Polymer.DomApi.matchesSelector,c=Polymer.StyleUtil,d=Polymer.StyleTransformer;return{decorateStyles:function(a){var b=this,d={};c.forRulesInStyles(a,function(a){b.decorateRule(a),b.collectPropertiesInCssText(a.propertyInfo.cssText,d)});var e=[];for(var f in d)e.push(f);return e},decorateRule:function(a){if(a.propertyInfo)return a.propertyInfo;var b={},c={},d=this.collectProperties(a,c);return d&&(b.properties=c,a.rules=null),b.cssText=this.collectCssText(a),a.propertyInfo=b,b},collectProperties:function(a,b){var c=a.propertyInfo;if(!c){for(var d,g,e=this.rx.VAR_ASSIGN,f=a.parsedCssText;d=e.exec(f);)b[d[1]]=(d[2]||d[3]).trim(),g=!0;return g}if(c.properties)return Polymer.Base.mixin(b,c.properties),!0},collectCssText:function(a){var b="",c=a.parsedCssText;c=c.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"");for(var f,d=c.split(";"),e=0;e<d.length;e++)f=d[e],(f.match(this.rx.MIXIN_MATCH)||f.match(this.rx.VAR_MATCH))&&(b+=f+";\n");return b},collectPropertiesInCssText:function(a,b){for(var c;c=this.rx.VAR_CAPTURE.exec(a);){b[c[1]]=!0;var d=c[2];d&&d.match(this.rx.IS_VAR)&&(b[d]=!0)}},reify:function(a){for(var d,b=Object.getOwnPropertyNames(a),c=0;c<b.length;c++)d=b[c],a[d]=this.valueForProperty(a[d],a)},valueForProperty:function(a,b){if(a)if(a.indexOf(";")>=0)a=this.valueForProperties(a,b);else{var c=this,d=function(a,d,e,f){var g=c.valueForProperty(b[e],b)||(b[f]?c.valueForProperty(b[f],b):f);return d+(g||"")};a=a.replace(this.rx.VAR_MATCH,d)}return a&&a.trim()||""},valueForProperties:function(a,b){for(var e,f,c=a.split(";"),d=0;d<c.length;d++)if(e=c[d]){if(f=e.match(this.rx.MIXIN_MATCH))e=this.valueForProperty(b[f[1]],b);else{var g=e.split(":");g[1]&&(g[1]=g[1].trim(),g[1]=this.valueForProperty(g[1],b)||g[1]),e=g.join(":")}c[d]=e&&e.lastIndexOf(";")===e.length-1?e.slice(0,-1):e||""}return c.join(";")},applyProperties:function(a,b){var c="";a.propertyInfo||this.decorateRule(a),a.propertyInfo.cssText&&(c=this.valueForProperties(a.propertyInfo.cssText,b)),a.cssText=c},propertyDataFromStyles:function(a,d){var f={},g=this,h=[],i=0;return c.forRulesInStyles(a,function(a){a.propertyInfo||g.decorateRule(a),d&&a.propertyInfo.properties&&b.call(d,a.transformedSelector||a.parsedSelector)&&(g.collectProperties(a,f),
e(i,h)),i++}),{properties:f,key:h}},scopePropertiesFromStyles:function(a){return a._scopeStyleProperties||(a._scopeStyleProperties=this.selectedPropertiesFromStyles(a,this.SCOPE_SELECTORS)),a._scopeStyleProperties},hostPropertiesFromStyles:function(a){return a._hostStyleProperties||(a._hostStyleProperties=this.selectedPropertiesFromStyles(a,this.HOST_SELECTORS)),a._hostStyleProperties},selectedPropertiesFromStyles:function(a,b){var d={},e=this;return c.forRulesInStyles(a,function(a){a.propertyInfo||e.decorateRule(a);for(var c=0;c<b.length;c++)if(a.parsedSelector===b[c])return void e.collectProperties(a,d)}),d},transformStyles:function(b,c,e){var f=this,g=d._calcHostScope(b.is,b.extends),h=b.extends?"\\"+g.slice(0,-1)+"\\]":g,i=new RegExp(this.rx.HOST_PREFIX+h+this.rx.HOST_SUFFIX);return d.elementStyles(b,function(d){f.applyProperties(d,c),d.cssText&&!a&&f._scopeSelector(d,i,g,b._scopeCssViaAttr,e)})},_scopeSelector:function(a,b,c,e,f){a.transformedSelector=a.transformedSelector||a.selector;for(var l,g=a.transformedSelector,h=e?"["+d.SCOPE_NAME+"~="+f+"]":"."+f,i=g.split(","),j=0,k=i.length;j<k&&(l=i[j]);j++)i[j]=l.match(b)?l.replace(c,c+h):h+" "+l;a.selector=i.join(",")},applyElementScopeSelector:function(a,b,c,e){var f=e?a.getAttribute(d.SCOPE_NAME):a.className,g=c?f.replace(c,b):(f?f+" ":"")+this.XSCOPE_NAME+" "+b;f!==g&&(e?a.setAttribute(d.SCOPE_NAME,g):a.className=g)},applyElementStyle:function(b,d,e,f){var g=f?f.textContent||"":this.transformStyles(b,d,e),h=b._customStyle;return h&&!a&&h!==f&&(h._useCount--,h._useCount<=0&&h.parentNode&&h.parentNode.removeChild(h)),!a&&f&&f.parentNode||(a&&b._customStyle?(b._customStyle.textContent=g,f=b._customStyle):g&&(f=c.applyCss(g,e,a?b.root:null,b._scopeStyle))),f&&(f._useCount=f._useCount||0,b._customStyle!=f&&f._useCount++,b._customStyle=f),f},mixinCustomStyle:function(a,b){var c;for(var d in b)c=b[d],(c||0===c)&&(a[d]=c)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply[\s]*\(([^)]*)\)/i,VAR_MATCH:/(^|\W+)var\([\s]*([^,)]*)[\s]*,?[\s]*((?:[^,)]*)|(?:[^;]*\([^;)]*\)))[\s]*?\)/gi,VAR_CAPTURE:/\([\s]*(--[^,\s)]*)(?:,[\s]*(--[^,\s)]*))?(?:\)|,)/gi,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s>+~])"},HOST_SELECTORS:[":host"],SCOPE_SELECTORS:[":root"],XSCOPE_NAME:"x-scope"}}(),function(){Polymer.StyleCache=function(){this.cache={}},Polymer.StyleCache.prototype={MAX:100,store:function(a,b,c,d){b.keyValues=c,b.styles=d;var e=this.cache[a]=this.cache[a]||[];e.push(b),e.length>this.MAX&&e.shift()},retrieve:function(a,b,c){var d=this.cache[a];if(d)for(var f,e=d.length-1;e>=0;e--)if(f=d[e],c===f.styles&&this._objectsEqual(b,f.keyValues))return f},clear:function(){this.cache={}},_objectsEqual:function(a,b){var c,d;for(var e in a)if(c=a[e],d=b[e],!("object"==typeof c&&c?this._objectsStrictlyEqual(c,d):c===d))return!1;return!Array.isArray(a)||a.length===b.length},_objectsStrictlyEqual:function(a,b){return this._objectsEqual(a,b)&&this._objectsEqual(b,a)}}}(),Polymer.StyleDefaults=function(){var a=Polymer.StyleProperties,c=(Polymer.StyleUtil,Polymer.StyleCache),d={_styles:[],_properties:null,customStyle:{},_styleCache:new c,addStyle:function(a){this._styles.push(a),this._properties=null},get _styleProperties(){return this._properties||(a.decorateStyles(this._styles),this._styles._scopeStyleProperties=null,this._properties=a.scopePropertiesFromStyles(this._styles),a.mixinCustomStyle(this._properties,this.customStyle),a.reify(this._properties)),this._properties},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(a){this._properties=null,a&&Polymer.Base.mixin(this.customStyle,a),this._styleCache.clear();for(var c,b=0;b<this._styles.length;b++)c=this._styles[b],c=c.__importElement||c,c._apply()}};return d}(),function(){"use strict";var a=Polymer.Base.serializeValueToAttribute,b=Polymer.StyleProperties,c=Polymer.StyleTransformer,e=(Polymer.StyleUtil,Polymer.StyleDefaults),f=Polymer.Settings.useNativeShadow;Polymer.Base._addFeature({_prepStyleProperties:function(){this._ownStylePropertyNames=this._styles?b.decorateStyles(this._styles):[]},customStyle:{},_setupStyleProperties:function(){this.customStyle={}},_needsStyleProperties:function(){return Boolean(this._ownStylePropertyNames&&this._ownStylePropertyNames.length)},_beforeAttached:function(){!this._scopeSelector&&this._needsStyleProperties()&&this._updateStyleProperties()},_findStyleHost:function(){for(var b,a=this;b=Polymer.dom(a).getOwnerRoot();){if(Polymer.isInstance(b.host))return b.host;a=b.host}return e},_updateStyleProperties:function(){var a,c=this._findStyleHost();c._styleCache||(c._styleCache=new Polymer.StyleCache);var d=b.propertyDataFromStyles(c._styles,this);d.key.customStyle=this.customStyle,a=c._styleCache.retrieve(this.is,d.key,this._styles);var e=Boolean(a);e?this._styleProperties=a._styleProperties:this._computeStyleProperties(d.properties),this._computeOwnStyleProperties(),e||(a=g.retrieve(this.is,this._ownStyleProperties,this._styles));var h=Boolean(a)&&!e,i=this._applyStyleProperties(a);e||(i=i&&f?i.cloneNode(!0):i,a={style:i,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},d.key.customStyle={},this.mixin(d.key.customStyle,this.customStyle),c._styleCache.store(this.is,a,d.key,this._styles),h||g.store(this.is,Object.create(a),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(a){var c=this._findStyleHost();c._styleProperties||c._computeStyleProperties();var d=Object.create(c._styleProperties);this.mixin(d,b.hostPropertiesFromStyles(this._styles)),a=a||b.propertyDataFromStyles(c._styles,this).properties,this.mixin(d,a),this.mixin(d,b.scopePropertiesFromStyles(this._styles)),b.mixinCustomStyle(d,this.customStyle),b.reify(d),this._styleProperties=d},_computeOwnStyleProperties:function(){for(var c,a={},b=0;b<this._ownStylePropertyNames.length;b++)c=this._ownStylePropertyNames[b],a[c]=this._styleProperties[c];this._ownStyleProperties=a},_scopeCount:0,_applyStyleProperties:function(a){var c=this._scopeSelector;this._scopeSelector=a?a._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;var d=b.applyElementStyle(this,this._styleProperties,this._scopeSelector,a&&a.style);return f||b.applyElementScopeSelector(this,this._scopeSelector,c,this._scopeCssViaAttr),d},serializeValueToAttribute:function(b,c,d){if(d=d||this,"class"===c&&!f){var e=d===this?this.domHost||this.dataHost:this;e&&(b=e._scopeElementClass(d,b))}d=Polymer.dom(d),a.call(this,b,c,d)},_scopeElementClass:function(a,b){return f||this._scopeCssViaAttr||(b+=(b?" ":"")+h+" "+this.is+(a._scopeSelector?" "+i+" "+a._scopeSelector:"")),b},updateStyles:function(a){this.isAttached&&(a&&this.mixin(this.customStyle,a),this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(a){a=a||this.root;for(var e,b=Polymer.dom(a)._query(function(a){return a.shadyRoot||a.shadowRoot}),c=0,d=b.length;c<d&&(e=b[c]);c++)e.updateStyles&&e.updateStyles()}}),Polymer.updateStyles=function(a){e.updateStyles(a),Polymer.Base._updateRootStyles(document)};var g=new Polymer.StyleCache;Polymer.customStyleCache=g;var h=c.SCOPE_NAME,i=b.XSCOPE_NAME}(),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepAttributes(),this._prepConstructor(),this._prepTemplate(),this._prepStyles(),this._prepStyleProperties(),this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepBindings(),this._prepShady()},_prepBehavior:function(a){this._addPropertyEffects(a.properties),this._addComplexObserverEffects(a.observers),this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._poolContent(),this._setupConfigure(),this._setupStyleProperties(),this._pushHost(),this._stampTemplate(),this._popHost(),this._marshalAnnotationReferences(),this._setupDebouncers(),this._marshalInstanceEffects(),this._marshalHostAttributes(),this._marshalBehaviors(),this._marshalAttributes(),this._tryReady()},_marshalBehavior:function(a){this._listenListeners(a.listeners)}}),function(){var b=(Polymer.Settings.useNativeShadow,Polymer.StyleProperties),c=Polymer.StyleUtil,d=Polymer.CssParse,e=Polymer.StyleDefaults,f=Polymer.StyleTransformer;Polymer({is:"custom-style",extends:"style",properties:{include:String},ready:function(){this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var a=this.__appliedElement||this;if(e.addStyle(a),a.textContent||this.include)this._apply();else{var b=new MutationObserver(function(){b.disconnect(),this._apply()}.bind(this));b.observe(a,{childList:!0})}}},_apply:function(){var a=this.__appliedElement||this;this.include&&(a.textContent=c.cssFromModules(this.include,!0)+a.textContent),a.textContent&&(c.forEachStyleRule(c.rulesForStyle(a),function(a){f.documentRule(a)}),this._applyCustomProperties(a))},_applyCustomProperties:function(a){this._computeStyleProperties();var e=this._styleProperties,f=c.rulesForStyle(a);a.textContent=c.toCssText(f,function(a){var c=a.cssText=a.parsedCssText;a.propertyInfo&&a.propertyInfo.cssText&&(c=d.removeCustomPropAssignment(c),a.cssText=b.valueForProperties(c,e))})}})}(),Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(a){if(this._templatized=a,a._content||(a._content=a.content),a._content._ctor)return this.ctor=a._content._ctor,void this._prepParentProperties(this.ctor.prototype,a);var b=Object.create(Polymer.Base);this._customPrepAnnotations(b,a),this._prepParentProperties(b,a),b._prepEffects(),this._customPrepEffects(b),b._prepBehaviors(),b._prepBindings(),b._notifyPathUp=this._notifyPathUpImpl,b._scopeElementClass=this._scopeElementClassImpl,b.listen=this._listenImpl,b._showHideChildren=this._showHideChildrenImpl;var c=this._constructorImpl,d=function(b,d){c.call(this,b,d)};d.prototype=b,b.constructor=d,a._content._ctor=d,this.ctor=d},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(a){for(var b=this._children,c=0;c<b.length;c++){var d=b[c];Boolean(a)!=Boolean(d.__hideTemplateChildren__)&&(d.nodeType===Node.TEXT_NODE?a?(d.__polymerTextContent__=d.textContent,d.textContent=""):d.textContent=d.__polymerTextContent__:d.style&&(a?(d.__polymerDisplay__=d.style.display,d.style.display="none"):d.style.display=d.__polymerDisplay__)),d.__hideTemplateChildren__=a}},_debounceTemplate:function(a){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",a))},_flushTemplates:function(a){Polymer.dom.flush()},_customPrepEffects:function(a){var b=a._parentProps;for(var c in b)a._addPropertyEffect(c,"function",this._createHostPropEffector(c));for(var c in this._instanceProps)a._addPropertyEffect(c,"function",this._createInstancePropEffector(c))},_customPrepAnnotations:function(a,b){a._template=b;var c=b._content;if(!c._notes){var d=a._rootDataHost;d&&(Polymer.Annotations.prepElement=d._prepElement.bind(d)),c._notes=Polymer.Annotations.parseAnnotations(b),Polymer.Annotations.prepElement=null,this._processAnnotations(c._notes)}a._notes=c._notes,a._parentProps=c._parentProps},_prepParentProperties:function(a,b){var c=this._parentProps=a._parentProps;if(this._forwardParentProp&&c){var e,d=a._parentPropProto;if(!d){for(e in this._instanceProps)delete c[e];d=a._parentPropProto=Object.create(null),b!=this&&(Polymer.Bind.prepareModel(d),Polymer.Base.prepareModelNotifyPath(d));for(e in c){var f=this._parentPropPrefix+e,g=[{kind:"function",effect:this._createForwardPropEffector(e)},{kind:"notify"}];Polymer.Bind._createAccessors(d,f,g)}}b!=this&&(Polymer.Bind.prepareInstance(b),b._forwardParentProp=this._forwardParentProp.bind(this)),this._extendTemplate(b,d),b._pathEffector=this._pathEffectorImpl.bind(this)}},_createForwardPropEffector:function(a){return function(b,c){this._forwardParentProp(a,c)}},_createHostPropEffector:function(a){var b=this._parentPropPrefix;return function(c,d){this.dataHost._templatized[b+a]=d}},_createInstancePropEffector:function(a){return function(b,c,d,e){e||this.dataHost._forwardInstanceProp(this,a,c)}},_extendTemplate:function(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=a[c],e=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(a,c,e),void 0!==d&&a._propertySetter(c,d)})},_showHideChildren:function(a){},_forwardInstancePath:function(a,b,c){},_forwardInstanceProp:function(a,b,c){},_notifyPathUpImpl:function(a,b){var c=this.dataHost,d=a.indexOf("."),e=d<0?a:a.slice(0,d);c._forwardInstancePath.call(c,this,a,b),e in c._parentProps&&c._templatized.notifyPath(c._parentPropPrefix+a,b)},_pathEffectorImpl:function(a,b,c){if(this._forwardParentPath&&0===a.indexOf(this._parentPropPrefix)){var d=a.substring(this._parentPropPrefix.length),e=this._modelForPath(d);e in this._parentProps&&this._forwardParentPath(d,b)}Polymer.Base._pathEffector.call(this._templatized,a,b,c)},_constructorImpl:function(a,b){this._rootDataHost=b._getRootDataHost(),this._setupConfigure(a),this._pushHost(b),this.root=this.instanceTemplate(this._template),this.root.__noContent=!this._notes._hasContent,this.root.__styleScoped=!0,this._popHost(),this._marshalAnnotatedNodes(),this._marshalInstanceEffects(),this._marshalAnnotatedListeners();for(var c=[],d=this.root.firstChild;d;d=d.nextSibling)c.push(d),d._templateInstance=this;this._children=c,b.__hideTemplateChildren__&&this._showHideChildren(!0),this._tryReady()},_listenImpl:function(a,b,c){var d=this,e=this._rootDataHost,f=e._createEventHandler(a,b,c),g=function(a){a.model=d,f(a)};e._listen(a,b,g)},_scopeElementClassImpl:function(a,b){var c=this._rootDataHost;if(c)return c._scopeElementClass(a,b)},stamp:function(a){if(a=a||{},this._parentProps){var b=this._templatized;for(var c in this._parentProps)a[c]=b[this._parentPropPrefix+c]}return new this.ctor(a,this)},modelForElement:function(a){for(var b;a;)if(b=a._templateInstance){if(b.dataHost==this)return b;a=b.dataHost}else a=a.parentNode}},Polymer({is:"dom-template",extends:"template",behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}}),Polymer._collections=new WeakMap,Polymer.Collection=function(a){Polymer._collections.set(a,this),this.userArray=a,this.store=a.slice(),this.initMap()},Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var a=this.omap=new WeakMap,b=this.pmap={},c=this.store,d=0;d<c.length;d++){var e=c[d];e&&"object"==typeof e?a.set(e,d):b[e]=d}},add:function(a){var b=this.store.push(a)-1;return a&&"object"==typeof a?this.omap.set(a,b):this.pmap[a]=b,"#"+b},removeKey:function(a){a=this._parseKey(a),this._removeFromMap(this.store[a]),delete this.store[a]},_removeFromMap:function(a){a&&"object"==typeof a?this.omap.delete(a):delete this.pmap[a]},remove:function(a){var b=this.getKey(a);return this.removeKey(b),b},getKey:function(a){var b;if(b=a&&"object"==typeof a?this.omap.get(a):this.pmap[a],void 0!=b)return"#"+b},getKeys:function(){return Object.keys(this.store).map(function(a){return"#"+a})},_parseKey:function(a){if("#"==a[0])return a.slice(1);throw new Error("unexpected key "+a)},setItem:function(a,b){a=this._parseKey(a);var c=this.store[a];c&&this._removeFromMap(c),b&&"object"==typeof b?this.omap.set(b,a):this.pmap[b]=a,this.store[a]=b},getItem:function(a){return a=this._parseKey(a),this.store[a]},getItems:function(){var a=[],b=this.store;for(var c in b)a.push(b[c]);return a},_applySplices:function(a){var c,d,b={};a.forEach(function(a){for(a.addedKeys=[],d=0;d<a.removed.length;d++)c=this.getKey(a.removed[d]),b[c]=b[c]?null:-1;for(d=0;d<a.addedCount;d++){var e=this.userArray[a.index+d];c=this.getKey(e),c=void 0===c?this.add(e):c,b[c]=b[c]?null:1,a.addedKeys.push(c)}},this);var e=[],f=[];for(var c in b)b[c]<0&&(this.removeKey(c),e.push(c)),b[c]>0&&f.push(c);return[{removed:e,added:f}]}},Polymer.Collection.get=function(a){return Polymer._collections.get(a)||new Polymer.Collection(a)},Polymer.Collection.applySplices=function(a,b){var c=Polymer._collections.get(a);return c?c._applySplices(b):null},Polymer({is:"dom-repeat",extends:"template",properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[]},detached:function(){for(var a=0;a<this._instances.length;a++)this._detachRow(a)},attached:function(){for(var a=Polymer.dom(this).parentNode,b=0;b<this._instances.length;b++)Polymer.dom(a).insertBefore(this._instances[b].root,this)},ready:function(){this._instanceProps={__key__:!0},this._instanceProps[this.as]=!0,this._instanceProps[this.indexAs]=!0,this.ctor||this.templatize(this)},_sortChanged:function(){var a=this._getRootDataHost(),b=this.sort;this._sortFn=b&&("function"==typeof b?b:function(){return a[b].apply(a,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_filterChanged:function(){var a=this._getRootDataHost(),b=this.filter;this._filterFn=b&&("function"==typeof b?b:function(){return a[b].apply(a,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(a){if("items"==a.path)Array.isArray(this.items)?this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._debounceTemplate(this._render);else if("items.splices"==a.path)this._keySplices=this._keySplices.concat(a.value.keySplices),this._indexSplices=this._indexSplices.concat(a.value.indexSplices),this._debounceTemplate(this._render);else{var b=a.path.slice(6);this._forwardItemPath(b,a.value),this._checkObservedPaths(b)}},_checkObservedPaths:function(a){if(this._observePaths){a=a.substring(a.indexOf(".")+1);for(var b=this._observePaths,c=0;c<b.length;c++)if(0===a.indexOf(b[c]))return this._needFullRefresh=!0,void(this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render))}},render:function(){this._needFullRefresh=!0,this._debounceTemplate(this._render),this._flushTemplates()},_render:function(){this.collection;this._needFullRefresh?(this._applyFullRefresh(),this._needFullRefresh=!1):this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices),this._keySplices=[],this._indexSplices=[];for(var b=this._keyToInstIdx={},c=0;c<this._instances.length;c++){var d=this._instances[c];b[d.__key__]=c,d.__setProperty(this.indexAs,c,!0)}this.fire("dom-change")},_applyFullRefresh:function(){var b,a=this.collection;if(this._sortFn)b=a?a.getKeys():[];else{b=[];var c=this.items;if(c)for(var d=0;d<c.length;d++)b.push(a.getKey(c[d]))}this._filterFn&&(b=b.filter(function(b){return this._filterFn(a.getItem(b))},this)),this._sortFn&&b.sort(function(b,c){return this._sortFn(a.getItem(b),a.getItem(c))}.bind(this));for(var d=0;d<b.length;d++){var e=b[d],f=this._instances[d];f?(f.__setProperty("__key__",e,!0),f.__setProperty(this.as,a.getItem(e),!0)):this._instances.push(this._insertRow(d,e))}for(;d<this._instances.length;d++)this._detachRow(d);this._instances.splice(b.length,this._instances.length-b.length)},_keySort:function(a,b){return this.collection.getKey(a)-this.collection.getKey(b)},_numericSort:function(a,b){return a-b},_applySplicesUserSort:function(a){var b=this.collection,c=this._instances,d={},e=[];this._sortFn||this._keySort.bind(this);a.forEach(function(a){for(var b=0;b<a.removed.length;b++){var c=a.removed[b];d[c]=d[c]?null:-1}for(var b=0;b<a.added.length;b++){var c=a.added[b];d[c]=d[c]?null:1}},this);var g=[],h=[];for(var i in d)d[i]===-1&&g.push(this._keyToInstIdx[i]),1===d[i]&&h.push(i);if(g.length){g.sort(this._numericSort);for(var j=g.length-1;j>=0;j--){var k=g[j];void 0!==k&&(e.push(this._detachRow(k)),c.splice(k,1))}}if(h.length){this._filterFn&&(h=h.filter(function(a){return this._filterFn(b.getItem(a))},this)),h.sort(function(a,c){return this._sortFn(b.getItem(a),b.getItem(c))}.bind(this));for(var l=0,j=0;j<h.length;j++)l=this._insertRowUserSort(l,h[j],e)}},_insertRowUserSort:function(a,b,c){for(var d=this.collection,e=d.getItem(b),f=this._instances.length-1,g=-1,h=this._sortFn||this._keySort.bind(this);a<=f;){var i=a+f>>1,j=this._instances[i].__key__,k=h(d.getItem(j),e);if(k<0)a=i+1;else{if(!(k>0)){g=i;break}f=i-1}}return g<0&&(g=f+1),this._instances.splice(g,0,this._insertRow(g,b,c)),g},_applySplicesArrayOrder:function(a){var b=[];this.collection;a.forEach(function(a){for(var c=0;c<a.removed.length;c++){var d=this._detachRow(a.index+c);d.isPlaceholder||b.push(d)}this._instances.splice(a.index,a.removed.length);for(var c=0;c<a.addedKeys.length;c++){var d={isPlaceholder:!0,key:a.addedKeys[c]};this._instances.splice(a.index+c,0,d)}},this);for(var d=this._instances.length-1;d>=0;d--){var e=this._instances[d];e.isPlaceholder&&(this._instances[d]=this._insertRow(d,e.key,b,!0))}},_detachRow:function(a){var b=this._instances[a];if(!b.isPlaceholder)for(var d=(Polymer.dom(this).parentNode,0);d<b._children.length;d++){var e=b._children[d];Polymer.dom(b.root).appendChild(e)}return b},_insertRow:function(a,b,c,d){var e;(e=c&&c.pop())?(e.__setProperty(this.as,this.collection.getItem(b),!0),e.__setProperty("__key__",b,!0)):e=this._generateRow(a,b);var f=this._instances[d?a+1:a],g=f?f._children[0]:this,h=Polymer.dom(this).parentNode;return Polymer.dom(h).insertBefore(e.root,g),e},_generateRow:function(a,b){var c={__key__:b};c[this.as]=this.collection.getItem(b),c[this.indexAs]=a;var d=this.stamp(c);return d},_showHideChildren:function(a){for(var b=0;b<this._instances.length;b++)this._instances[b]._showHideChildren(a)},_forwardInstanceProp:function(a,b,c){if(b==this.as){var d;d=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(a.__key__)):a[this.indexAs],this.set("items."+d,c)}},_forwardInstancePath:function(a,b,c){0===b.indexOf(this.as+".")&&this._notifyPath("items."+a.__key__+"."+b.slice(this.as.length+1),c)},_forwardParentProp:function(a,b){this._instances.forEach(function(c){c.__setProperty(a,b,!0)},this)},_forwardParentPath:function(a,b){this._instances.forEach(function(c){c._notifyPath(a,b,!0)},this)},_forwardItemPath:function(a,b){if(this._keyToInstIdx){var c=a.indexOf("."),d=a.substring(0,c<0?a.length:c),e=this._keyToInstIdx[d],f=this._instances[e];f&&(c>=0?(a=this.as+"."+a.substring(c+1),f._notifyPath(a,b,!0)):f.__setProperty(this.as,b,!0))}},itemForElement:function(a){var b=this.modelForElement(a);return b&&b[this.as]},keyForElement:function(a){var b=this.modelForElement(a);return b&&b.__key__},indexForElement:function(a){var b=this.modelForElement(a);return b&&b[this.indexAs]}}),Polymer({is:"array-selector",properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var a=0;a<this.selected.length;a++)this.unlinkPaths("selected."+a);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");this.multi?this.selected&&!this.selected.length||(this.selected=[],this._selectedColl=Polymer.Collection.get(this.selected)):(this.selected=null,this._selectedColl=null),this.selectedItem=null},isSelected:function(a){return this.multi?void 0!==this._selectedColl.getKey(a):this.selected==a},deselect:function(a){if(this.multi){if(this.isSelected(a)){var b=this._selectedColl.getKey(a);this.arrayDelete("selected",a),this.unlinkPaths("selected."+b)}}else this.selected=null,this.selectedItem=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(a){var b=Polymer.Collection.get(this.items),c=b.getKey(a);if(this.multi)if(this.isSelected(a))this.toggle&&this.deselect(a);else{this.push("selected",a);var d=this._selectedColl.getKey(a);this.linkPaths("selected."+d,"items."+c)}else this.toggle&&a==this.selected?this.deselect():(this.selected=a,this.selectedItem=a,this.linkPaths("selected","items."+c),this.linkPaths("selectedItem","items."+c))}}),Polymer({is:"dom-if",extends:"template",properties:{if:{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){this._teardownInstance()},attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance(),!this.restamp&&this._instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){if(!this._instance){this._instance=this.stamp();var a=this._instance.root,b=Polymer.dom(Polymer.dom(this).parentNode);b.insertBefore(a,this)}},_teardownInstance:function(){if(this._instance){var a=this._instance._children;if(a){var b=Polymer.dom(Polymer.dom(a[0]).parentNode);a.forEach(function(a){b.removeChild(a)})}this._instance=null}},_showHideChildren:function(){var a=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(a)},_forwardParentProp:function(a,b){this._instance&&(this._instance[a]=b)},_forwardParentPath:function(a,b){this._instance&&this._instance._notifyPath(a,b,!0)}}),Polymer({is:"dom-bind",extends:"template",created:function(){Polymer.RenderStatus.whenReady(this._markImportsReady.bind(this))},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0,this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var a=Polymer.dom(Polymer.dom(this).parentNode);a.insertBefore(this.root,this)},_removeChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this.root.appendChild(this._children[a])},_initFeatures:function(){},_scopeElementClass:function(a,b){return this.dataHost?this.dataHost._scopeElementClass(a,b):b},_prepConfigure:function(){var a={};for(var b in this._propertyEffects)a[b]=this[b];this._setupConfigure=this._setupConfigure.bind(this,a)},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady(),this._children||(this._template=this,this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),Polymer.Base._initFeatures.call(this),this._children=Array.prototype.slice.call(this.root.childNodes)),this._insertChildren(),this.fire("dom-change")}}),function(){var a={},b={},c=null;Polymer.IronMeta=Polymer({is:"iron-meta",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,observer:"_valueChanged"},self:{type:Boolean,observer:"_selfChanged"},list:{type:Array,notify:!0}},hostAttributes:{hidden:!0},factoryImpl:function(a){if(a)for(var b in a)switch(b){case"type":case"key":case"value":this[b]=a[b]}},created:function(){this._metaDatas=a,this._metaArrays=b},_keyChanged:function(a,b){this._resetRegistration(b)},_valueChanged:function(a){this._resetRegistration(this.key)},_selfChanged:function(a){a&&(this.value=this)},_typeChanged:function(c){this._unregisterKey(this.key),a[c]||(a[c]={}),this._metaData=a[c],b[c]||(b[c]=[]),this.list=b[c],this._registerKeyValue(this.key,this.value)},byKey:function(a){return this._metaData&&this._metaData[a]},_resetRegistration:function(a){this._unregisterKey(a),this._registerKeyValue(this.key,this.value)},_unregisterKey:function(a){this._unregister(a,this._metaData,this.list)},_registerKeyValue:function(a,b){this._register(a,b,this._metaData,this.list)},_register:function(a,b,c,d){a&&c&&void 0!==b&&(c[a]=b,d.push(b))},_unregister:function(a,b,c){if(a&&b&&a in b){var d=b[a];delete b[a],this.arrayDelete(c,d)}}}),Polymer.IronMeta.getIronMeta=function(){return null===c&&(c=new Polymer.IronMeta),c},Polymer.IronMetaQuery=Polymer({is:"iron-meta-query",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,readOnly:!0},list:{type:Array,notify:!0}},factoryImpl:function(a){if(a)for(var b in a)switch(b){case"type":case"key":this[b]=a[b]}},created:function(){this._metaDatas=a,this._metaArrays=b},_keyChanged:function(a){this._setValue(this._metaData&&this._metaData[a])},_typeChanged:function(c){this._metaData=a[c],this.list=b[c],this.key&&this._keyChanged(this.key)},byKey:function(a){return this._metaData&&this._metaData[a]}})}(),Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24}},attached:function(){this.style.display="none"},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(a){return this.name+":"+a},this)},applyIcon:function(a,b){a=a.root||a,this.removeIcon(a);var c=this._cloneIcon(b);if(c){var d=Polymer.dom(a);return d.insertBefore(c,d.childNodes[0]),a._svgIcon=c}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a).removeChild(a._svgIcon),a._svgIcon=null)},_nameChanged:function(){new Polymer.IronMeta({type:"iconset",key:this.name,value:this}),this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var a=Object.create(null);return Polymer.dom(this).querySelectorAll("[id]").forEach(function(b){a[b.id]=b}),a},_cloneIcon:function(a){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[a],this.size)},_prepareSvgClone:function(a,b){if(a){var c=a.cloneNode(!0),d=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=c.getAttribute("viewBox")||"0 0 "+b+" "+b;return d.setAttribute("viewBox",e),d.setAttribute("preserveAspectRatio","xMidYMid meet"),d.style.cssText="pointer-events: none; display: block; width: 100%; height: 100%;",d.appendChild(c).removeAttribute("id"),d}return null}}),function(){"use strict";function h(a){var b="";if(a){var c=a.toLowerCase();1==c.length?d.test(c)&&(b=c):b=f.test(c)?c.replace("arrow",""):g.test(c)?"space":"multiply"==c?"*":c}return b}function i(b){var c="";return b&&(c=e.test(b)?a[b]:b.toLowerCase()),c}function j(a){var c="";return Number(a)&&(c=a>=65&&a<=90?String.fromCharCode(32+a):a>=112&&a<=123?"f"+(a-112):a>=48&&a<=57?String(48-a):a>=96&&a<=105?String(96-a):b[a]),c}function k(a){return h(a.key)||i(a.keyIdentifier)||j(a.keyCode)||h(a.detail.key)||""}function l(a,b){return k(b)===a.key&&!!b.shiftKey==!!a.shiftKey&&!!b.ctrlKey==!!a.ctrlKey&&!!b.altKey==!!a.altKey&&!!b.metaKey==!!a.metaKey}function m(a){return a.split("+").reduce(function(a,b){var d=b.split(":"),e=d[0],f=d[1];return e in c?a[c[e]]=!0:(a.key=e,a.event=f||"keydown"),a},{combo:a.split(":").shift()})}function n(a){return a.split(" ").map(function(a){return m(a)})}var a={"U+0009":"tab","U+001B":"esc","U+0020":"space","U+002A":"*","U+0030":"0","U+0031":"1","U+0032":"2","U+0033":"3","U+0034":"4","U+0035":"5","U+0036":"6","U+0037":"7","U+0038":"8","U+0039":"9","U+0041":"a","U+0042":"b","U+0043":"c","U+0044":"d","U+0045":"e","U+0046":"f","U+0047":"g","U+0048":"h","U+0049":"i","U+004A":"j","U+004B":"k","U+004C":"l","U+004D":"m","U+004E":"n","U+004F":"o","U+0050":"p","U+0051":"q",
"U+0052":"r","U+0053":"s","U+0054":"t","U+0055":"u","U+0056":"v","U+0057":"w","U+0058":"x","U+0059":"y","U+005A":"z","U+007F":"del"},b={9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},c={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},d=/[a-z0-9*]/,e=/U\+/,f=/^arrow/,g=/^space(bar)?/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,b){var d,c=n(b);for(d=0;d<c.length;++d)if(l(c[d],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});return a.indexOf(this.keyBindings)===-1&&a.push(this.keyBindings),a},_prepKeyBindings:function(){this._keyBindings={},this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this);for(var a in this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a])},_addKeyBinding:function(a,b){n(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[],this._keyBindings[a.event].push([a,b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){Object.keys(this._keyBindings).forEach(function(a){var b=this._keyBindings[a],c=this._onKeyBindingEvent.bind(this,b);this._boundKeyHandlers.push([this.keyEventTarget,a,c]),this.keyEventTarget.addEventListener(a,c)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c,d;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),b=a[0],c=a[1],d=a[2],b.removeEventListener(c,d)},_onKeyBindingEvent:function(a,b){this.stopKeyboardEventPropagation&&b.stopPropagation(),a.forEach(function(a){var c=a[0],d=a[1];!b.defaultPrevented&&l(c,b)&&this._triggerKeyHandler(c,d,b)},this)},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;var e=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,e),e.defaultPrevented&&c.preventDefault()}}}(),Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){a.target===this?this._setFocused("focus"===a.type):this.shadowRoot||this.isLightDescendant(a.target)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},_disabledChanged:function(a,b){this.setAttribute("aria-disabled",a?"true":"false"),this.style.pointerEvents=a?"none":"",a?(this._oldTabIndex=this.tabIndex,this.focused=!1,this.tabIndex=-1):void 0!==this._oldTabIndex&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_detectKeyboardFocus(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==a&&(this.active=a,this.fire("change"))},_downHandler:function(a){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},__isFocusedLightDescendant:function(a){var b=Polymer.dom(this).getOwnerRoot()||document,c=b.activeElement;return this!==a&&this.isLightDescendant(a)&&a==c},_spaceKeyDownHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.__isFocusedLightDescendant(c)||(b.preventDefault(),b.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.__isFocusedLightDescendant(c)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(a){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a,b){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl],Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;b&&Polymer.dom(b).appendChild(this._ripple);var c=b===this.shadyRoot?this:b;if(a){var d=a.target;c.contains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}},Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3),this._setElevation(a)},_computeKeyboardClass:function(a){this.classList.toggle("keyboard-focus",a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a),this.hasRipple()&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl],Polymer.IronValidatableBehavior={properties:{validatorType:{type:String,value:"validator"},validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object}},observers:["_invalidChanged(invalid)"],get _validator(){return this._validatorMeta&&this._validatorMeta.byKey(this.validator)},ready:function(){this._validatorMeta=new Polymer.IronMeta({type:this.validatorType})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},hasValidator:function(){return null!=this._validator},validate:function(a){return this.invalid=!this._getValidity(a),!this.invalid},_getValidity:function(a){return!this.hasValidator()||this._validator.validate(a)}},Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1}},listeners:{input:"_onInput",keypress:"_onKeypress"},get _patternRegExp(){var a;if(this.allowedPattern)a=new RegExp(this.allowedPattern);else if(this.pattern)a=new RegExp(this.pattern);else switch(this.type){case"number":a=/[0-9.,e-]/}return a},ready:function(){this.bindValue=this.value},_bindValueChanged:function(){this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue?this.bindValue:""),this.fire("bind-value-changed",{value:this.bindValue})},_onInput:function(){if(this.preventInvalidInput&&!this._patternAlreadyChecked){var a=this._checkPatternValidity();a||(this.value=this._previousValidInput)}this.bindValue=this.value,this._previousValidInput=this.value,this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode,c=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||a.keyCode>32&&a.keyCode<41||a.keyCode>111&&a.keyCode<124;return!(b||0==a.charCode&&c)},_onKeypress:function(a){if(this.preventInvalidInput||"number"===this.type){var b=this._patternRegExp;if(b&&!(a.metaKey||a.ctrlKey||a.altKey)){this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode);this._isPrintable(a)&&!b.test(c)&&a.preventDefault()}}},_checkPatternValidity:function(){var a=this._patternRegExp;if(!a)return!0;for(var b=0;b<this.value.length;b++)if(!a.test(this.value[b]))return!1;return!0},validate:function(){if(!this.required&&""==this.value)return this.invalid=!1,!0;var a;return this.hasValidator()?a=Polymer.IronValidatableBehavior.validate.call(this,this.value):(this.invalid=!this.validity.valid,a=this.validity.valid),this.fire("iron-input-validate"),a}}),Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){this.fire("iron-form-element-register")},detached:function(){this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}},Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},observers:["_focusedControlStateChanged(focused)"],get inputElement(){return this.$.input},attached:function(){this._updateAriaLabelledBy()},_appendStringWithSpace:function(a,b){return a=a?a+" "+b:b},_onAddonAttached:function(a){var b=a.path?a.path[0]:a.target;if(b.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,b.id);else{var c="paper-input-add-on-"+Math.floor(1e5*Math.random());b.id=c,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,c)}},validate:function(){return this.inputElement.validate()},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;this.value=a,this.inputElement.selectionStart=b,this.inputElement.selectionEnd=b}catch(b){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_focusedControlStateChanged:function(a){(this.$.container||(this.$.container=Polymer.dom(this.root).querySelector("paper-input-container"),this.$.container))&&(a?this.$.container._onFocus():this.$.container._onBlur())},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector("label");if(!a)return void(this._ariaLabelledBy="");var b;a.id?b=a.id:(b="paper-input-label-"+(new Date).getUTCMilliseconds(),a.id=b),this._ariaLabelledBy=b},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.PaperInputBehaviorImpl],Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(a){}},Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:""}},observers:["_requiredChanged(required)"],_getValidity:function(a){return this.disabled||!this.required||this.required&&this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required","true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked,""===this.value&&(this.value=this.checked?"on":""),this.fire("iron-change")}},Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl],Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(a){a&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();return a.id="ink",a.setAttribute("center",""),a.classList.add("circle"),a}},Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl],Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this),this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this),this.disabled||this.isAttached&&(this.checked=this.active)}},Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl],!function(){function e(a){return a&&(a.ownerDocument||a.document||a).documentElement}function f(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function l(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function m(a){return null===a?NaN:+a}function n(a){return!isNaN(a)}function o(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function q(a){return a.length}function s(a){for(var b=1;a*b%1;)b*=10;return b}function t(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function u(){this._=Object.create(null)}function x(a){return(a+="")===v||a[0]===w?w+a:a}function y(a){return(a+="")[0]===w?a.slice(1):a}function z(a){return x(a)in this._}function A(a){return(a=x(a))in this._&&delete this._[a]}function B(){var a=[];for(var b in this._)a.push(y(b));return a}function C(){var a=0;for(var b in this._)++a;return a}function D(){for(var a in this._)return!1;return!0}function E(){this._=Object.create(null)}function F(a){return a}function G(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function H(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=I.length;c<d;++c){var e=I[c]+b;if(e in a)return e}}function J(){}function K(){}function L(a){function d(){for(var f,c=b,d=-1,e=c.length;++d<e;)(f=c[d].on)&&f.apply(this,arguments);return a}var b=[],c=new u;return d.on=function(d,e){var g,f=c.get(d);return arguments.length<2?f&&f.on:(f&&(f.on=null,b=b.slice(0,g=b.indexOf(f)).concat(b.slice(g+1)),c.remove(d)),e&&b.push(c.set(d,{on:e})),a)},d}function M(){a.event.preventDefault()}function N(){for(var c,b=a.event;c=b.sourceEvent;)b=c;return b}function O(b){for(var c=new K,d=0,e=arguments.length;++d<e;)c[arguments[d]]=L(c);return c.of=function(d,e){return function(f){try{var g=f.sourceEvent=a.event;f.target=b,a.event=f,c[f.type].apply(d,e)}finally{a.event=g}}},c}function R(a){return Q(a,V),a}function W(a){return"function"==typeof a?a:function(){return S(a,this)}}function X(a){return"function"==typeof a?a:function(){return T(a,this)}}function Z(b,c){function d(){this.removeAttribute(b)}function e(){this.removeAttributeNS(b.space,b.local)}function f(){this.setAttribute(b,c)}function g(){this.setAttributeNS(b.space,b.local,c)}function h(){var a=c.apply(this,arguments);null==a?this.removeAttribute(b):this.setAttribute(b,a)}function i(){var a=c.apply(this,arguments);null==a?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,a)}return b=a.ns.qualify(b),null==c?b.local?e:d:"function"==typeof c?b.local?i:h:b.local?g:f}function $(a){return a.trim().replace(/\s+/g," ")}function _(b){return new RegExp("(?:^|\\s+)"+a.requote(b)+"(?:\\s+|$)","g")}function aa(a){return(a+"").trim().split(/^|\s+/)}function ba(a,b){function d(){for(var d=-1;++d<c;)a[d](this,b)}function e(){for(var d=-1,e=b.apply(this,arguments);++d<c;)a[d](this,e)}a=aa(a).map(ca);var c=a.length;return"function"==typeof b?e:d}function ca(a){var b=_(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",$(e+" "+a))):c.setAttribute("class",$(e.replace(b," ")))}}function da(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function ea(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function fa(b){function c(){var a=this.ownerDocument,c=this.namespaceURI;return c?a.createElementNS(c,b):a.createElement(b)}function d(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"==typeof b?b:(b=a.ns.qualify(b)).local?d:c}function ga(){var a=this.parentNode;a&&a.removeChild(this)}function ha(a){return{__data__:a}}function ia(a){return function(){return U(this,a)}}function ja(a){return arguments.length||(a=l),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function ka(a,b){for(var c=0,d=a.length;c<d;c++)for(var h,e=a[c],f=0,g=e.length;f<g;f++)(h=e[f])&&b(h,f,c);return a}function la(a){return Q(a,ma),a}function na(a){var b,c;return function(d,e,f){var i,g=a[f].update,h=g.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(i=g[b])&&++b<h;);return i}}function oa(b,d,e){function j(){var a=this[f];a&&(this.removeEventListener(b,a,a.$),delete this[f])}function k(){var a=h(d,c(arguments));j.call(this),this.addEventListener(b,this[f]=a,a.$=e),a._=d}function l(){var d,c=new RegExp("^__on([^.]+)"+a.requote(b)+"$");for(var e in this)if(d=e.match(c)){var f=this[e];this.removeEventListener(d[1],f,f.$),delete this[e]}}var f="__on"+b,g=b.indexOf("."),h=qa;g>0&&(b=b.slice(0,g));var i=pa.get(b);return i&&(b=i,h=ra),g?d?k:j:d?J:l}function qa(b,c){return function(d){var e=a.event;a.event=d,c[0]=this.__data__;try{b.apply(this,c)}finally{a.event=e}}}function ra(a,b){var c=qa(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function ua(b){var c=".dragsuppress-"+ ++ta,d="click"+c,g=a.select(f(b)).on("touchmove"+c,M).on("dragstart"+c,M).on("selectstart"+c,M);if(null==sa&&(sa=!("onselectstart"in b)&&H(b.style,"userSelect")),sa){var h=e(b).style,i=h[sa];h[sa]="none"}return function(a){if(g.on(c,null),sa&&(h[sa]=i),a){var b=function(){g.on(d,null)};g.on(d,function(){M(),b()},!0),setTimeout(b,0)}}}function wa(b,c){c.changedTouches&&(c=c.changedTouches[0]);var d=b.ownerSVGElement||b;if(d.createSVGPoint){var e=d.createSVGPoint();if(va<0){var g=f(b);if(g.scrollX||g.scrollY){d=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var h=d[0][0].getScreenCTM();va=!(h.f||h.e),d.remove()}}return va?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(b.getScreenCTM().inverse()),[e.x,e.y]}var i=b.getBoundingClientRect();return[c.clientX-i.left-b.clientLeft,c.clientY-i.top-b.clientTop]}function xa(){return a.event.changedTouches[0].identifier}function Ga(a){return a>0?1:a<0?-1:0}function Ha(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Ia(a){return a>1?0:a<-1?Aa:Math.acos(a)}function Ja(a){return a>1?Da:a<-1?-Da:Math.asin(a)}function Ka(a){return((a=Math.exp(a))-1/a)/2}function La(a){return((a=Math.exp(a))+1/a)/2}function Ma(a){return((a=Math.exp(2*a))-1)/(a+1)}function Na(a){return(a=Math.sin(a/2))*a}function Ua(){}function Va(a,b,c){return this instanceof Va?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof Va?new Va(a.h,a.s,a.l):pb(""+a,qb,Va):new Va(a,b,c)}function Xa(a,b,c){function f(a){return a>360?a-=360:a<0&&(a+=360),a<60?d+(e-d)*a/60:a<180?e:a<240?d+(e-d)*(240-a)/60:d}function g(a){return Math.round(255*f(a))}var d,e;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,e=c<=.5?c*(1+b):c+b-c*b,d=2*c-e,new kb(g(a+120),g(a),g(a-120))}function Ya(b,c,d){return this instanceof Ya?(this.h=+b,this.c=+c,void(this.l=+d)):arguments.length<2?b instanceof Ya?new Ya(b.h,b.c,b.l):b instanceof _a?gb(b.l,b.a,b.b):gb((b=rb((b=a.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new Ya(b,c,d)}function $a(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new _a(c,Math.cos(a*=Ea)*b,Math.sin(a)*b)}function _a(a,b,c){return this instanceof _a?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof _a?new _a(a.l,a.a,a.b):a instanceof Ya?$a(a.h,a.c,a.l):rb((a=kb(a)).r,a.g,a.b):new _a(a,b,c)}function fb(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=hb(e)*bb,d=hb(d)*cb,f=hb(f)*db,new kb(jb(3.2404542*e-1.5371385*d-.4985314*f),jb(-.969266*e+1.8760108*d+.041556*f),jb(.0556434*e-.2040259*d+1.0572252*f))}function gb(a,b,c){return a>0?new Ya(Math.atan2(c,b)*Fa,Math.sqrt(b*b+c*c),a):new Ya(NaN,NaN,a)}function hb(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function ib(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function jb(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function kb(a,b,c){return this instanceof kb?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof kb?new kb(a.r,a.g,a.b):pb(""+a,kb,Xa):new kb(a,b,c)}function lb(a){return new kb(a>>16,a>>8&255,255&a)}function mb(a){return lb(a)+""}function ob(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function pb(a,b,c){a=a.toLowerCase();var g,h,i,d=0,e=0,f=0;if(g=/([a-z]+)\((.*)\)/.exec(a))switch(h=g[2].split(","),g[1]){case"hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case"rgb":return b(tb(h[0]),tb(h[1]),tb(h[2]))}return(i=ub.get(a))?b(i.r,i.g,i.b):(null==a||"#"!==a.charAt(0)||isNaN(i=parseInt(a.slice(1),16))||(4===a.length?(d=(3840&i)>>4,d|=d>>4,e=240&i,e|=e>>4,f=15&i,f|=f<<4):7===a.length&&(d=(16711680&i)>>16,e=(65280&i)>>8,f=255&i)),b(d,e,f))}function qb(a,b,c){var g,h,d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,i=(e+d)/2;return f?(h=i<.5?f/(e+d):f/(2-e-d),g=a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4,g*=60):(g=NaN,h=i>0&&i<1?0:g),new Va(g,h,i)}function rb(a,b,c){a=sb(a),b=sb(b),c=sb(c);var d=ib((.4124564*a+.3575761*b+.1804375*c)/bb),e=ib((.2126729*a+.7151522*b+.072175*c)/cb),f=ib((.0193339*a+.119192*b+.9503041*c)/db);return _a(116*e-16,500*(d-e),200*(e-f))}function sb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function tb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function vb(a){return"function"==typeof a?a:function(){return a}}function wb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),xb(b,c,a,d)}}function xb(b,d,e,f){function l(){var b,a=j.status;if(!a&&zb(j)||a>=200&&a<300||304===a){try{b=e.call(g,j)}catch(a){return void h.error.call(g,a)}h.load.call(g,b)}else h.error.call(g,j)}var g={},h=a.dispatch("beforesend","progress","load","error"),i={},j=new XMLHttpRequest,k=null;return!this.XDomainRequest||"withCredentials"in j||!/^(http(s)?:)?\/\//.test(b)||(j=new XDomainRequest),"onload"in j?j.onload=j.onerror=l:j.onreadystatechange=function(){j.readyState>3&&l()},j.onprogress=function(b){var c=a.event;a.event=b;try{h.progress.call(g,j)}finally{a.event=c}},g.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?i[a]:(null==b?delete i[a]:i[a]=b+"",g)},g.mimeType=function(a){return arguments.length?(d=null==a?null:a+"",g):d},g.responseType=function(a){return arguments.length?(k=a,g):k},g.response=function(a){return e=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(c(arguments)))}}),g.send=function(a,c,e){if(2===arguments.length&&"function"==typeof c&&(e=c,c=null),j.open(a,b,!0),null==d||"accept"in i||(i.accept=d+",*/*"),j.setRequestHeader)for(var f in i)j.setRequestHeader(f,i[f]);return null!=d&&j.overrideMimeType&&j.overrideMimeType(d),null!=k&&(j.responseType=k),null!=e&&g.on("error",e).on("load",function(a){e(null,a)}),h.beforesend.call(g,j),j.send(null==c?null:c),g},g.abort=function(){return j.abort(),g},a.rebind(g,h,"on"),null==f?g:g.get(yb(f))}function yb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function zb(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Gb(){var a=Hb(),b=Ib()-a;b>24?(isFinite(b)&&(clearTimeout(Db),Db=setTimeout(Gb,b)),Cb=0):(Cb=1,Fb(Gb))}function Hb(){var a=Date.now();for(Eb=Ab;Eb;)a>=Eb.t&&(Eb.f=Eb.c(a-Eb.t)),Eb=Eb.n;return a}function Ib(){for(var a,b=Ab,c=1/0;b;)b.f?b=a?a.n=b.n:Ab=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Bb=a,c}function Jb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Lb(a,b){var c=Math.pow(10,3*r(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Mb(b){var c=b.decimal,d=b.thousands,e=b.grouping,f=b.currency,g=e&&d?function(a,b){for(var c=a.length,f=[],g=0,h=e[0],i=0;c>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(c-=h,c+h)),!((i+=h+1)>b));)h=e[g=(g+1)%e.length];return f.reverse().join(d)}:F;return function(b){var d=Nb.exec(b),e=d[1]||" ",h=d[2]||">",i=d[3]||"-",j=d[4]||"",k=d[5],l=+d[6],m=d[7],n=d[8],o=d[9],p=1,q="",r="",s=!1,t=!0;switch(n&&(n=+n.substring(1)),(k||"0"===e&&"="===h)&&(k=e="0",h="="),o){case"n":m=!0,o="g";break;case"%":p=100,r="%",o="f";break;case"p":p=100,r="%",o="r";break;case"b":case"o":case"x":case"X":"#"===j&&(q="0"+o.toLowerCase());case"c":t=!1;case"d":s=!0,n=0;break;case"s":p=-1,o="r"}"$"===j&&(q=f[0],r=f[1]),"r"!=o||n||(o="g"),null!=n&&("g"==o?n=Math.max(1,Math.min(21,n)):"e"!=o&&"f"!=o||(n=Math.max(0,Math.min(20,n)))),o=Ob.get(o)||Pb;var u=k&&m;return function(b){var d=r;if(s&&b%1)return"";var f=b<0||0===b&&1/b<0?(b=-b,"-"):"-"===i?"":i;if(p<0){var j=a.formatPrefix(b,n);b=j.scale(b),d=j.symbol+r}else b*=p;b=o(b,n);var w,x,v=b.lastIndexOf(".");if(v<0){var y=t?b.lastIndexOf("e"):-1;y<0?(w=b,x=""):(w=b.substring(0,y),x=b.substring(y))}else w=b.substring(0,v),x=c+b.substring(v+1);!k&&m&&(w=g(w,1/0));var z=q.length+w.length+x.length+(u?0:f.length),A=z<l?new Array(z=l-z+1).join(e):"";return u&&(w=g(A+w,A.length?l-x.length:1/0)),f+=q,b=w+x,("<"===h?f+b+A:">"===h?A+f+b:"^"===h?A.substring(0,z>>=1)+f+b+A.substring(z):f+(u?b:A+b))+d}}}function Pb(a){return a+""}function Sb(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ub(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new Rb(c-1)),1),c}function f(a,c){return b(a=new Rb(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{Rb=Sb;var d=new Sb;return d._=a,g(d,b,c)}finally{Rb=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Vb(a);return i.floor=i,i.round=Vb(d),i.ceil=Vb(e),i.offset=Vb(f),i.range=h,a}function Vb(a){return function(b,c){try{Rb=Sb;var d=new Sb;return d._=b,a(d,c)._}finally{Rb=Date}}}function Wb(b){function k(a){function c(c){for(var g,h,i,d=[],e=-1,f=0;++e<b;)37===a.charCodeAt(e)&&(d.push(a.slice(f,e)),null!=(h=Xb[g=a.charAt(++e)])&&(g=a.charAt(++e)),(i=v[g])&&(g=i(c,null==h?"e"===g?" ":"0":h)),d.push(g),f=e+1);return d.push(a.slice(f,e)),d.join("")}var b=a.length;return c.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},d=l(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=null!=c.Z&&Rb!==Sb,f=new(e?Sb:Rb);return"j"in c?f.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(f.setFullYear(c.y,0,1),f.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(f.getDay()+5)%7:c.w+7*c.U-(f.getDay()+6)%7)):f.setFullYear(c.y,c.m,c.d),f.setHours(c.H+(c.Z/100|0),c.M+c.Z%100,c.S,c.L),e?f._:f},c.toString=function(){return a},c}function l(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=w[g in Xb?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function x(a,b,c){p.lastIndex=0;var d=p.exec(b.slice(c));return d?(a.w=q.get(d[0].toLowerCase()),c+d[0].length):-1}function y(a,b,c){n.lastIndex=0;var d=n.exec(b.slice(c));return d?(a.w=o.get(d[0].toLowerCase()),c+d[0].length):-1}function z(a,b,c){t.lastIndex=0;var d=t.exec(b.slice(c));return d?(a.m=u.get(d[0].toLowerCase()),c+d[0].length):-1}function A(a,b,c){r.lastIndex=0;var d=r.exec(b.slice(c));return d?(a.m=s.get(d[0].toLowerCase()),c+d[0].length):-1}function B(a,b,c){return l(a,v.c.toString(),b,c)}function C(a,b,c){return l(a,v.x.toString(),b,c)}function D(a,b,c){return l(a,v.X.toString(),b,c)}function E(a,b,c){var d=m.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var c=b.dateTime,d=b.date,e=b.time,f=b.periods,g=b.days,h=b.shortDays,i=b.months,j=b.shortMonths;k.utc=function(a){function c(a){try{Rb=Sb;var c=new Rb;return c._=a,b(c)}finally{Rb=Date}}var b=k(a);return c.parse=function(a){try{Rb=Sb;var c=b.parse(a);return c&&c._}finally{Rb=Date}},c.toString=b.toString,c},k.multi=k.utc.multi=rc;var m=a.map(),n=_b(g),o=ac(g),p=_b(h),q=ac(h),r=_b(i),s=ac(i),t=_b(j),u=ac(j);f.forEach(function(a,b){m.set(a.toLowerCase(),b)});var v={a:function(a){return h[a.getDay()];
},A:function(a){return g[a.getDay()]},b:function(a){return j[a.getMonth()]},B:function(a){return i[a.getMonth()]},c:k(c),d:function(a,b){return $b(a.getDate(),b,2)},e:function(a,b){return $b(a.getDate(),b,2)},H:function(a,b){return $b(a.getHours(),b,2)},I:function(a,b){return $b(a.getHours()%12||12,b,2)},j:function(a,b){return $b(1+Qb.dayOfYear(a),b,3)},L:function(a,b){return $b(a.getMilliseconds(),b,3)},m:function(a,b){return $b(a.getMonth()+1,b,2)},M:function(a,b){return $b(a.getMinutes(),b,2)},p:function(a){return f[+(a.getHours()>=12)]},S:function(a,b){return $b(a.getSeconds(),b,2)},U:function(a,b){return $b(Qb.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return $b(Qb.mondayOfYear(a),b,2)},x:k(d),X:k(e),y:function(a,b){return $b(a.getFullYear()%100,b,2)},Y:function(a,b){return $b(a.getFullYear()%1e4,b,4)},Z:pc,"%":function(){return"%"}},w={a:x,A:y,b:z,B:A,c:B,d:jc,e:jc,H:lc,I:lc,j:kc,L:oc,m:ic,M:mc,p:E,S:nc,U:cc,w:bc,W:dc,x:C,X:D,y:fc,Y:ec,Z:gc,"%":qc};return k}function $b(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function _b(b){return new RegExp("^(?:"+b.map(a.requote).join("|")+")","i")}function ac(a){for(var b=new u,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function bc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function cc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function dc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function ec(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function fc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.y=hc(+d[0]),c+d[0].length):-1}function gc(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function hc(a){return a+(a>68?1900:2e3)}function ic(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function jc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function kc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function lc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function mc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function nc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function oc(a,b,c){Yb.lastIndex=0;var d=Yb.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function pc(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=r(b)/60|0,e=r(b)%60;return c+$b(d,"0",2)+$b(e,"0",2)}function qc(a,b,c){Zb.lastIndex=0;var d=Zb.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function rc(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function tc(){}function vc(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function wc(a,b){a&&yc.hasOwnProperty(a.type)&&yc[a.type](a,b)}function zc(a,b,c){var f,d=-1,e=a.length-c;for(b.lineStart();++d<e;)f=a[d],b.point(f[0],f[1],f[2]);b.lineEnd()}function Ac(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)zc(a[c],b,1);b.polygonEnd()}function Ec(){function f(a,b){a*=Ea,b=b*Ea/2+Aa/4;var f=a-c,g=f>=0?1:-1,h=g*f,i=Math.cos(b),j=Math.sin(b),k=e*j,l=d*i+k*Math.cos(h),m=k*g*Math.sin(h);Cc.add(Math.atan2(m,l)),c=a,d=i,e=j}var a,b,c,d,e;Dc.point=function(g,h){Dc.point=f,c=(a=g)*Ea,d=Math.cos(h=(b=h)*Ea/2+Aa/4),e=Math.sin(h)},Dc.lineEnd=function(){f(a,b)}}function Fc(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Gc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Hc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Ic(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function Jc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Kc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function Lc(a){return[Math.atan2(a[1],a[0]),Ja(a[2])]}function Mc(a,b){return r(a[0]-b[0])<ya&&r(a[1]-b[1])<ya}function Zc(a,b){a*=Ea;var c=Math.cos(b*=Ea);$c(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function $c(a,b,c){++Nc,Pc+=(a-Pc)/Nc,Qc+=(b-Qc)/Nc,Rc+=(c-Rc)/Nc}function _c(){function d(d,e){d*=Ea;var f=Math.cos(e*=Ea),g=f*Math.cos(d),h=f*Math.sin(d),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=b*i-c*h)*j+(j=c*g-a*i)*j+(j=a*h-b*g)*j),a*g+b*h+c*i);Oc+=j,Sc+=j*(a+(a=g)),Tc+=j*(b+(b=h)),Uc+=j*(c+(c=i)),$c(a,b,c)}var a,b,c;Yc.point=function(e,f){e*=Ea;var g=Math.cos(f*=Ea);a=g*Math.cos(e),b=g*Math.sin(e),c=Math.sin(f),Yc.point=d,$c(a,b,c)}}function ad(){Yc.point=Zc}function bd(){function f(a,b){a*=Ea;var f=Math.cos(b*=Ea),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(b),j=d*i-e*h,k=e*g-c*i,l=c*h-d*g,m=Math.sqrt(j*j+k*k+l*l),n=c*g+d*h+e*i,o=m&&-Ia(n)/m,p=Math.atan2(m,n);Vc+=o*j,Wc+=o*k,Xc+=o*l,Oc+=p,Sc+=p*(c+(c=g)),Tc+=p*(d+(d=h)),Uc+=p*(e+(e=i)),$c(c,d,e)}var a,b,c,d,e;Yc.point=function(g,h){a=g,b=h,Yc.point=f,g*=Ea;var i=Math.cos(h*=Ea);c=i*Math.cos(g),d=i*Math.sin(g),e=Math.sin(h),$c(c,d,e)},Yc.lineEnd=function(){f(a,b),Yc.lineEnd=ad,Yc.point=Zc}}function cd(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function dd(){return!0}function ed(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(Mc(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new gd(c,a,null,!0),j=new gd(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new gd(d,a,null,!1),j=new gd(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),fd(f),fd(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var l,m,k=f[0];;){for(var n=k,o=!0;n.v;)if((n=n.n)===k)return;l=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=l.length;h<j;++h)e.point((m=l[h])[0],m[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){l=n.p.z;for(var h=l.length-1;h>=0;--h)e.point((m=l[h])[0],m[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,l=n.z,o=!o}while(!n.v);e.lineEnd()}}}function fd(a){if(b=a.length){for(var b,e,c=0,d=a[0];++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0],e.p=d}}function gd(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function hd(b,c,d,e){return function(f,g){function k(a,c){var d=f(a,c);b(a=d[0],c=d[1])&&g.point(a,c)}function l(a,b){var c=f(a,b);h.point(c[0],c[1])}function m(){j.point=l,h.lineStart()}function n(){j.point=k,h.lineEnd()}function u(a,b){t.push([a,b]);var c=f(a,b);q.point(c[0],c[1])}function v(){q.lineStart(),t=[]}function w(){u(t[0][0],t[0][1]),q.lineEnd();var c,a=q.clean(),b=p.buffer(),d=b.length;if(t.pop(),s.push(t),t=null,d)if(1&a){c=b[0];var f,d=c.length-1,e=-1;if(d>0){for(r||(g.polygonStart(),r=!0),g.lineStart();++e<d;)g.point((f=c[e])[0],f[1]);g.lineEnd()}}else d>1&&2&a&&b.push(b.pop().concat(b.shift())),o.push(b.filter(id))}var o,s,t,h=c(g),i=f.invert(e[0],e[1]),j={point:k,lineStart:m,lineEnd:n,polygonStart:function(){j.point=u,j.lineStart=v,j.lineEnd=w,o=[],s=[]},polygonEnd:function(){j.point=k,j.lineStart=m,j.lineEnd=n,o=a.merge(o);var b=pd(i,s);o.length?(r||(g.polygonStart(),r=!0),ed(o,kd,b,d,g)):b&&(r||(g.polygonStart(),r=!0),g.lineStart(),d(null,null,1,g),g.lineEnd()),r&&(g.polygonEnd(),r=!1),o=s=null},sphere:function(){g.polygonStart(),g.lineStart(),d(null,null,1,g),g.lineEnd(),g.polygonEnd()}},p=jd(),q=c(p),r=!1;return j}}function id(a){return a.length>1}function jd(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:J,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function kd(a,b){return((a=a.x)[0]<0?a[1]-Da-ya:Da-a[1])-((b=b.x)[0]<0?b[1]-Da-ya:Da-b[1])}function md(a){var e,b=NaN,c=NaN,d=NaN;return{lineStart:function(){a.lineStart(),e=1},point:function(f,g){var h=f>0?Aa:-Aa,i=r(f-b);r(i-Aa)<ya?(a.point(b,c=(c+g)/2>0?Da:-Da),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),a.point(f,c),e=0):d!==h&&i>=Aa&&(r(b-d)<ya&&(b-=d*ya),r(f-h)<ya&&(f-=h*ya),c=nd(b,c,f,g),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),e=0),a.point(b=f,c=g),d=h},lineEnd:function(){a.lineEnd(),b=c=NaN},clean:function(){return 2-e}}}function nd(a,b,c,d){var e,f,g=Math.sin(a-c);return r(g)>ya?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function od(a,b,c,d){var e;if(null==a)e=c*Da,d.point(-Aa,e),d.point(0,e),d.point(Aa,e),d.point(Aa,0),d.point(Aa,-e),d.point(0,-e),d.point(-Aa,-e),d.point(-Aa,0),d.point(-Aa,e);else if(r(a[0]-b[0])>ya){var f=a[0]<b[0]?Aa:-Aa;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function pd(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;Cc.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Aa/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Aa/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Aa,z=o*t;if(Cc.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ba:v,y^m>=c^r>=c){var A=Hc(Fc(l),Fc(a));Kc(A);var B=Hc(e,A);Kc(B);var C=(y^v>=0?-1:1)*Ja(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-ya||f<ya&&Cc<0)^1&g}function qd(a){function f(a,c){return Math.cos(a)*Math.cos(c)>b}function g(a){var b,e,g,j,k;return{lineStart:function(){j=g=!1,k=1},point:function(l,m){var o,n=[l,m],p=f(l,m),q=c?p?0:i(l,m):p?i(l+(l<0?Aa:-Aa),m):0;if(!b&&(j=g=p)&&a.lineStart(),p!==g&&(o=h(b,n),(Mc(b,o)||Mc(n,o))&&(n[0]+=ya,n[1]+=ya,p=f(n[0],n[1]))),p!==g)k=0,p?(a.lineStart(),o=h(n,b),a.point(o[0],o[1])):(o=h(b,n),a.point(o[0],o[1]),a.lineEnd()),b=o;else if(d&&b&&c^p){var r;q&e||!(r=h(n,b,!0))||(k=0,c?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||b&&Mc(b,n)||a.point(n[0],n[1]),b=n,g=p,e=q},lineEnd:function(){g&&a.lineEnd(),b=null},clean:function(){return k|(j&&g)<<1}}}function h(a,c,d){var e=Fc(a),f=Fc(c),g=[1,0,0],h=Hc(e,f),i=Gc(h,h),j=h[0],k=i-j*j;if(!k)return!d&&a;var l=b*i/k,m=-b*j/k,n=Hc(g,h),o=Jc(g,l),p=Jc(h,m);Ic(o,p);var q=n,s=Gc(o,q),t=Gc(q,q),u=s*s-t*(Gc(o,o)-1);if(!(u<0)){var v=Math.sqrt(u),w=Jc(q,(-s-v)/t);if(Ic(w,o),w=Lc(w),!d)return w;var B,x=a[0],y=c[0],z=a[1],A=c[1];y<x&&(B=x,x=y,y=B);var C=y-x,D=r(C-Aa)<ya,E=D||C<ya;if(!D&&A<z&&(B=z,z=A,A=B),E?D?z+A>0^w[1]<(r(w[0]-x)<ya?z:A):z<=w[1]&&w[1]<=A:C>Aa^(x<=w[0]&&w[0]<=y)){var F=Jc(q,(-s+v)/t);return Ic(F,o),[w,Lc(F)]}}}function i(b,d){var e=c?a:Aa-a,f=0;return b<-e?f|=1:b>e&&(f|=2),d<-e?f|=4:d>e&&(f|=8),f}var b=Math.cos(a),c=b>0,d=r(b)>ya,e=_d(a,6*Ea);return hd(f,g,e,c?[0,-a]:[-Aa,a-Aa])}function rd(a,b,c,d){return function(e){var p,f=e.a,g=e.b,h=f.x,i=f.y,j=g.x,k=g.y,l=0,m=1,n=j-h,o=k-i;if(p=a-h,n||!(p>0)){if(p/=n,n<0){if(p<l)return;p<m&&(m=p)}else if(n>0){if(p>m)return;p>l&&(l=p)}if(p=c-h,n||!(p<0)){if(p/=n,n<0){if(p>m)return;p>l&&(l=p)}else if(n>0){if(p<l)return;p<m&&(m=p)}if(p=b-i,o||!(p>0)){if(p/=o,o<0){if(p<l)return;p<m&&(m=p)}else if(o>0){if(p>m)return;p>l&&(l=p)}if(p=d-i,o||!(p<0)){if(p/=o,o<0){if(p>m)return;p>l&&(l=p)}else if(o>0){if(p<l)return;p<m&&(m=p)}return l>0&&(e.a={x:h+l*n,y:i+l*o}),m<1&&(e.b={x:h+m*n,y:i+m*o}),e}}}}}}function td(b,c,d,e){function f(a,e){return r(a[0]-b)<ya?e>0?0:3:r(a[0]-d)<ya?e>0?2:1:r(a[1]-c)<ya?e>0?1:0:e>0?3:2}function g(a,b){return h(a.x,b.x)}function h(a,b){var c=f(a,1),d=f(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(i){function q(a){for(var b=0,c=n.length,d=a[1],e=0;e<c;++e)for(var j,f=1,g=n[e],h=g.length,i=g[0];f<h;++f)j=g[f],i[1]<=d?j[1]>d&&Ha(i,j,a)>0&&++b:j[1]<=d&&Ha(i,j,a)<0&&--b,i=j;return 0!==b}function r(a,g,i,j){var k=0,l=0;if(null==a||(k=f(a,i))!==(l=f(g,i))||h(a,g)<0^i>0){do j.point(0===k||3===k?b:d,k>1?e:c);while((k=(k+i+4)%4)!==l)}else j.point(g[0],g[1])}function s(a,f){return b<=a&&a<=d&&c<=f&&f<=e}function t(a,b){s(a,b)&&i.point(a,b)}function C(){p.point=E,n&&n.push(o=[]),A=!0,z=!1,x=y=NaN}function D(){m&&(E(u,v),w&&z&&k.rejoin(),m.push(k.buffer())),p.point=t,z&&i.lineEnd()}function E(a,b){a=Math.max(-sd,Math.min(sd,a)),b=Math.max(-sd,Math.min(sd,b));var c=s(a,b);if(n&&o.push([a,b]),A)u=a,v=b,w=c,A=!1,c&&(i.lineStart(),i.point(a,b));else if(c&&z)i.point(a,b);else{var d={a:{x:x,y:y},b:{x:a,y:b}};l(d)?(z||(i.lineStart(),i.point(d.a.x,d.a.y)),i.point(d.b.x,d.b.y),c||i.lineEnd(),B=!1):c&&(i.lineStart(),i.point(a,b),B=!1)}x=a,y=b,z=c}var m,n,o,u,v,w,x,y,z,A,B,j=i,k=jd(),l=rd(b,c,d,e),p={point:t,lineStart:C,lineEnd:D,polygonStart:function(){i=k,m=[],n=[],B=!0},polygonEnd:function(){i=j,m=a.merge(m);var c=q([b,e]),d=B&&c,f=m.length;(d||f)&&(i.polygonStart(),d&&(i.lineStart(),r(null,null,1,i),i.lineEnd()),f&&ed(m,g,c,r,i),i.polygonEnd()),m=n=o=null}};return p}}function ud(a){var b=0,c=Aa/3,d=Td(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Aa/180,c=a[1]*Aa/180):[b/Aa*180,c/Aa*180]},e}function vd(a,b){function g(a,b){var c=Math.sqrt(e-2*d*Math.sin(b))/d;return[c*Math.sin(a*=d),f-c*Math.cos(a)]}var c=Math.sin(a),d=(c+Math.sin(b))/2,e=1+c*(2*d-c),f=Math.sqrt(e)/d;return g.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/d,Ja((e-(a*a+c*c)*d*d)/(2*d))]},g}function zd(){function e(a,b){xd+=d*a-c*b,c=a,d=b}var a,b,c,d;yd.point=function(f,g){yd.point=e,a=c=f,b=d=g},yd.lineEnd=function(){e(a,b)}}function Fd(a,b){a<Ad&&(Ad=a),a>Cd&&(Cd=a),b<Bd&&(Bd=b),b>Dd&&(Dd=b)}function Gd(){function d(c,d){b.push("M",c,",",d,a)}function e(a,d){b.push("M",a,",",d),c.point=f}function f(a,c){b.push("L",a,",",c)}function g(){c.point=d}function h(){b.push("Z")}var a=Hd(4.5),b=[],c={point:d,lineStart:function(){c.point=e},lineEnd:g,polygonStart:function(){c.lineEnd=h},polygonEnd:function(){c.lineEnd=g,c.point=d},pointRadius:function(b){return a=Hd(b),c},result:function(){if(b.length){var a=b.join("");return b=[],a}}};return c}function Hd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Jd(a,b){Pc+=a,Qc+=b,++Rc}function Kd(){function c(c,d){var e=c-a,f=d-b,g=Math.sqrt(e*e+f*f);Sc+=g*(a+c)/2,Tc+=g*(b+d)/2,Uc+=g,Jd(a=c,b=d)}var a,b;Id.point=function(d,e){Id.point=c,Jd(a=d,b=e)}}function Ld(){Id.point=Jd}function Md(){function e(a,b){var e=a-c,f=b-d,g=Math.sqrt(e*e+f*f);Sc+=g*(c+a)/2,Tc+=g*(d+b)/2,Uc+=g,g=d*a-c*b,Vc+=g*(c+a),Wc+=g*(d+b),Xc+=3*g,Jd(c=a,d=b)}var a,b,c,d;Id.point=function(f,g){Id.point=e,Jd(a=c=f,b=d=g)},Id.lineEnd=function(){e(a,b)}}function Nd(a){function d(c,d){a.moveTo(c+b,d),a.arc(c,d,b,0,Ba)}function e(b,d){a.moveTo(b,d),c.point=f}function f(b,c){a.lineTo(b,c)}function g(){c.point=d}function h(){a.closePath()}var b=4.5,c={point:d,lineStart:function(){c.point=e},lineEnd:g,polygonStart:function(){c.lineEnd=h},polygonEnd:function(){c.lineEnd=g,c.point=d},pointRadius:function(a){return b=a,c},result:J};return c}function Od(a){function e(a){return(d?g:f)(a)}function f(b){return Rd(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function g(b){function s(c,d){c=a(c,d),b.point(c[0],c[1])}function t(){m=NaN,r.point=u,b.lineStart()}function u(c,e){var f=Fc([c,e]),g=a(c,e);h(m,n,l,o,p,q,m=g[0],n=g[1],l=c,o=f[0],p=f[1],q=f[2],d,b),b.point(m,n)}function v(){r.point=s,b.lineEnd()}function w(){t(),r.point=x,r.lineEnd=y}function x(a,b){u(c=a,e=b),f=m,g=n,i=o,j=p,k=q,r.point=u}function y(){h(m,n,l,o,p,q,f,g,c,i,j,k,d,b),r.lineEnd=v,v()}var c,e,f,g,i,j,k,l,m,n,o,p,q,r={point:s,lineStart:t,lineEnd:v,polygonStart:function(){b.polygonStart(),r.lineStart=w},polygonEnd:function(){b.polygonEnd(),r.lineStart=t}};return r}function h(d,e,f,g,i,j,k,l,m,n,o,p,q,s){var t=k-d,u=l-e,v=t*t+u*u;if(v>4*b&&q--){var w=g+n,x=i+o,y=j+p,z=Math.sqrt(w*w+x*x+y*y),A=Math.asin(y/=z),B=r(r(y)-1)<ya||r(f-m)<ya?(f+m)/2:Math.atan2(x,w),C=a(B,A),D=C[0],E=C[1],F=D-d,G=E-e,H=u*F-t*G;(H*H/v>b||r((t*F+u*G)/v-.5)>.3||g*n+i*o+j*p<c)&&(h(d,e,f,g,i,j,D,E,B,w/=z,x/=z,y,q,s),s.point(D,E),h(D,E,B,w,x,y,k,l,m,n,o,p,q,s))}}var b=.5,c=Math.cos(30*Ea),d=16;return e.precision=function(a){return arguments.length?(d=(b=a*a)>0&&16,e):Math.sqrt(b)},e}function Pd(a){var b=Od(function(b,c){return a([b*Fa,c*Fa])});return function(a){return Ud(b(a))}}function Qd(a){this.stream=a}function Rd(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Sd(a){return Td(function(){return a})()}function Td(b){function v(a){return a=e(a[0]*Ea,a[1]*Ea),[a[0]*g+o,p-a[1]*g]}function w(a){return a=e.invert((a[0]-o)/g,(p-a[1])/g),a&&[a[0]*Fa,a[1]*Fa]}function x(){e=cd(d=Xd(l,m,n),c);var a=c(j,k);return o=h-a[0]*g,p=i+a[1]*g,y()}function y(){return u&&(u.valid=!1,u=null),v}var c,d,e,o,p,u,f=Od(function(a,b){return a=c(a,b),[a[0]*g+o,p-a[1]*g]}),g=150,h=480,i=250,j=0,k=0,l=0,m=0,n=0,q=ld,r=F,s=null,t=null;return v.stream=function(a){return u&&(u.valid=!1),u=Ud(q(d,f(r(a)))),u.valid=!0,u},v.clipAngle=function(a){return arguments.length?(q=null==a?(s=a,ld):qd((s=+a)*Ea),y()):s},v.clipExtent=function(a){return arguments.length?(t=a,r=a?td(a[0][0],a[0][1],a[1][0],a[1][1]):F,y()):t},v.scale=function(a){return arguments.length?(g=+a,x()):g},v.translate=function(a){return arguments.length?(h=+a[0],i=+a[1],x()):[h,i]},v.center=function(a){return arguments.length?(j=a[0]%360*Ea,k=a[1]%360*Ea,x()):[j*Fa,k*Fa]},v.rotate=function(a){return arguments.length?(l=a[0]%360*Ea,m=a[1]%360*Ea,n=a.length>2?a[2]%360*Ea:0,x()):[l*Fa,m*Fa,n*Fa]},a.rebind(v,f,"precision"),function(){return c=b.apply(this,arguments),v.invert=c.invert&&w,x()}}function Ud(a){return Rd(a,function(b,c){a.point(b*Ea,c*Ea)})}function Vd(a,b){return[a,b]}function Wd(a,b){return[a>Aa?a-Ba:a<-Aa?a+Ba:a,b]}function Xd(a,b,c){return a?b||c?cd(Zd(a),$d(b,c)):Zd(a):b||c?$d(b,c):Wd}function Yd(a){return function(b,c){return b+=a,[b>Aa?b-Ba:b<-Aa?b+Ba:b,c]}}function Zd(a){var b=Yd(a);return b.invert=Yd(-a),b}function $d(a,b){function g(a,b){var g=Math.cos(b),h=Math.cos(a)*g,i=Math.sin(a)*g,j=Math.sin(b),k=j*c+h*d;return[Math.atan2(i*e-k*f,h*c-j*d),Ja(k*e+i*f)]}var c=Math.cos(a),d=Math.sin(a),e=Math.cos(b),f=Math.sin(b);return g.invert=function(a,b){var g=Math.cos(b),h=Math.cos(a)*g,i=Math.sin(a)*g,j=Math.sin(b),k=j*e-i*f;return[Math.atan2(i*e+j*f,h*c+k*d),Ja(k*c-h*d)]},g}function _d(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=ae(c,e),f=ae(c,f),(g>0?e<f:e>f)&&(e+=g*Ba)):(e=a+g*Ba,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=Lc([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function ae(a,b){var c=Fc(b);c[0]-=a,Kc(c);var d=Ia(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-ya)%(2*Math.PI)}function be(b,c,d){var e=a.range(b,c-ya,d).concat(c);return function(a){return e.map(function(b){return[a,b]})}}function ce(b,c,d){var e=a.range(b,c-ya,d).concat(c);return function(a){return e.map(function(b){return[b,a]})}}function de(a){return a.source}function ee(a){return a.target}function fe(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(Na(d-b)+e*g*Na(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Fa,Math.atan2(g,Math.sqrt(d*d+e*e))*Fa]}:function(){return[a*Fa,b*Fa]};return o.distance=m,o}function ie(){function d(d,e){var f=Math.sin(e*=Ea),g=Math.cos(e),h=r((d*=Ea)-a),i=Math.cos(h);ge+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=c*f-b*g*i)*h),b*f+c*g*i),a=d,b=f,c=g}var a,b,c;he.point=function(e,f){a=e*Ea,b=Math.sin(f*=Ea),c=Math.cos(f),he.point=d},he.lineEnd=function(){he.point=he.lineEnd=J}}function je(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function me(a,b){function g(a,b){f>0?b<-Da+ya&&(b=-Da+ya):b>Da-ya&&(b=Da-ya);var c=f/Math.pow(d(b),e);return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var c=Math.cos(a),d=function(a){return Math.tan(Aa/4+a/2)},e=a===b?Math.sin(a):Math.log(c/Math.cos(b))/Math.log(d(b)/d(a)),f=c*Math.pow(d(a),e)/e;return e?(g.invert=function(a,b){var c=f-b,d=Ga(e)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-Da]},g):pe}function ne(a,b){function f(a,b){var c=e-b;return[c*Math.sin(d*a),e-c*Math.cos(d*a)]}var c=Math.cos(a),d=a===b?Math.sin(a):(c-Math.cos(b))/(b-a),e=c/d+a;return r(d)<ya?Vd:(f.invert=function(a,b){var c=e-b;return[Math.atan2(a,c)/d,e-Ga(d)*Math.sqrt(a*a+c*c)]},f)}function pe(a,b){return[a,Math.log(Math.tan(Aa/4+b/2))]}function qe(a){var f,b=Sd(a),c=b.scale,d=b.translate,e=b.clipExtent;return b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a},b.translate=function(){var a=d.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a},b.clipExtent=function(a){var g=e.apply(b,arguments);if(g===b){if(f=null==a){var h=Aa*c(),i=d();e([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else f&&(g=null);return g},b.clipExtent(null)}function te(a,b){return[Math.log(Math.tan(Aa/4+b/2)),-a]}function ue(a){return a[0]}function ve(a){return a[1]}function we(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&Ha(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function xe(a,b){return a[0]-b[0]||a[1]-b[1]}function ze(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ae(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Be(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Je(){cf(this),this.edge=this.site=this.circle=null}function Ke(a){var b=Fe.pop()||new Je;return b.site=a,b}function Le(a){Ve(a),Ee.remove(a),Fe.push(a),cf(a)}function Me(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Le(a);for(var i=f;i.circle&&r(c-i.circle.x)<ya&&r(d-i.circle.cy)<ya;)f=i.P,h.unshift(i),Le(i),i=f;h.unshift(i),Ve(i);for(var j=g;j.circle&&r(c-j.circle.x)<ya&&r(d-j.circle.cy)<ya;)g=j.N,h.push(j),Le(j),j=g;h.push(j),Ve(j);var l,k=h.length;for(l=1;l<k;++l)j=h[l],i=h[l-1],_e(j.edge,i.site,j.site,e);i=h[0],j=h[k-1],j.edge=Ze(i.site,j.site,null,e),Ue(i),Ue(j)}function Ne(a){for(var d,e,f,g,b=a.x,c=a.y,h=Ee._;h;)if(f=Oe(h,c)-b,f>ya)h=h.L;else{if(g=b-Pe(h,c),!(g>ya)){f>-ya?(d=h.P,e=h):g>-ya?(d=h,e=h.N):d=e=h;break}if(!h.R){d=h;break}h=h.R}var i=Ke(a);if(Ee.insert(d,i),d||e){if(d===e)return Ve(d),e=Ke(d.site),Ee.insert(i,e),i.edge=e.edge=Ze(d.site,i.site),Ue(d),void Ue(e);if(!e)return void(i.edge=Ze(d.site,i.site));Ve(d),Ve(e);var j=d.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=e.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_e(e.edge,j,o,u),i.edge=Ze(j,a,null,u),e.edge=Ze(a,o,null,u),Ue(d),Ue(e)}}function Oe(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pe(a,b){var c=a.N;if(c)return Oe(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qe(a){this.site=a,this.edges=[]}function Re(a){for(var f,g,h,i,l,m,n,o,p,q,b=a[0][0],c=a[1][0],d=a[0][1],e=a[1][1],j=De,k=j.length;k--;)if(l=j[k],l&&l.prepare())for(n=l.edges,o=n.length,m=0;m<o;)q=n[m].end(),h=q.x,i=q.y,p=n[++m%o].start(),f=p.x,g=p.y,(r(h-f)>ya||r(i-g)>ya)&&(n.splice(m,0,new af($e(l.site,q,r(h-b)<ya&&e-i>ya?{x:b,y:r(f-b)<ya?g:e}:r(i-e)<ya&&c-h>ya?{x:r(g-e)<ya?f:c,y:e}:r(h-c)<ya&&i-d>ya?{x:c,y:r(f-c)<ya?g:d}:r(i-d)<ya&&h-b>ya?{x:r(g-d)<ya?f:b,y:d}:null),l.site,null)),++o)}function Se(a,b){return b.angle-a.angle}function Te(){cf(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ue(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-za)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=Ie.pop()||new Te;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=He._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}He.insert(s,r),s||(Ge=r)}}}}function Ve(a){var b=a.circle;b&&(b.P||(Ge=b.N),He.remove(b),Ie.push(b),cf(b),a.circle=null)}function We(a){for(var e,b=Ce,c=rd(a[0][0],a[0][1],a[1][0],a[1][1]),d=b.length;d--;)e=b[d],(!Xe(e,a)||!c(e)||r(e.a.x-e.b.x)<ya&&r(e.a.y-e.b.y)<ya)&&(e.a=e.b=null,b.splice(d,1))}function Xe(a,b){var c=a.b;if(c)return!0;var q,r,d=a.a,e=b[0][0],f=b[1][0],g=b[0][1],h=b[1][1],i=a.l,j=a.r,k=i.x,l=i.y,m=j.x,n=j.y,o=(k+m)/2,p=(l+n)/2;if(n===l){if(o<e||o>=f)return;if(k>m){if(d){if(d.y>=h)return}else d={x:o,y:g};c={x:o,y:h}}else{if(d){if(d.y<g)return}else d={x:o,y:h};c={x:o,y:g}}}else if(q=(k-m)/(n-l),r=p-q*o,q<-1||q>1)if(k>m){if(d){if(d.y>=h)return}else d={x:(g-r)/q,y:g};c={x:(h-r)/q,y:h}}else{if(d){if(d.y<g)return}else d={x:(h-r)/q,y:h};c={x:(g-r)/q,y:g}}else if(l<n){if(d){if(d.x>=f)return}else d={x:e,y:q*e+r};c={x:f,y:q*f+r}}else{if(d){if(d.x<e)return}else d={x:f,y:q*f+r};c={x:e,y:q*e+r}}return a.a=d,a.b=c,!0}function Ye(a,b){this.l=a,this.r=b,this.a=this.b=null}function Ze(a,b,c,d){var e=new Ye(a,b);return Ce.push(e),c&&_e(e,a,b,c),d&&_e(e,b,a,d),De[a.i].edges.push(new af(e,a,b)),De[b.i].edges.push(new af(e,b,a)),e}function $e(a,b,c){var d=new Ye(a,null);return d.a=b,d.b=c,Ce.push(d),d}function _e(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function af(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function bf(){this._=null}function cf(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function df(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ef(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ff(a){for(;a.L;)a=a.L;return a}function gf(a,b){var d,e,f,c=a.sort(hf).pop();for(Ce=[],De=new Array(a.length),Ee=new bf,He=new bf;;)if(f=Ge,c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x))c.x===d&&c.y===e||(De[c.i]=new Qe(c),Ne(c),d=c.x,e=c.y),c=a.pop();else{if(!f)break;Me(f.arc)}b&&(We(b),Re(b));var g={cells:De,edges:Ce};return Ee=He=Ce=De=null,g}function hf(a,b){return b.y-a.y||b.x-a.x}function kf(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function lf(a){return a.x}function mf(a){return a.y}function nf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function of(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&of(a,i[0],c,d,g,h),i[1]&&of(a,i[1],g,d,e,h),i[2]&&of(a,i[2],c,h,g,f),i[3]&&of(a,i[3],g,h,e,f)}}function pf(a,b,c,d,e,f,g){var i,h=1/0;return function a(j,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=j.point){var o,p=b-j.x,q=c-j.y,r=p*p+q*q;if(r<h){var s=Math.sqrt(h=r);d=b-s,e=c-s,f=b+s,g=c+s,i=o}}for(var t=j.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(j=t[3&y])switch(3&y){case 0:a(j,k,l,u,v);break;case 1:a(j,u,l,m,v);break;case 2:a(j,k,v,u,n);break;case 3:a(j,u,v,m,n)}}}(a,d,e,f,g),i}function qf(b,c){b=a.rgb(b),c=a.rgb(c);var d=b.r,e=b.g,f=b.b,g=c.r-d,h=c.g-e,i=c.b-f;return function(a){return"#"+ob(Math.round(d+g*a))+ob(Math.round(e+h*a))+ob(Math.round(f+i*a))}}function rf(a,b){var e,c={},d={};for(e in a)e in b?c[e]=wf(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function sf(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function tf(a,b){var d,e,f,c=uf.lastIndex=vf.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(d=uf.exec(a))&&(e=vf.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),h[g]?h[g]+=f:h[++g]=f),(d=d[0])===(e=e[0])?h[g]?h[g]+=e:h[++g]=e:(h[++g]=null,i.push({i:g,x:sf(d,e)})),c=vf.lastIndex;return c<b.length&&(f=b.slice(c),h[g]?h[g]+=f:h[++g]=f),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var d,c=0;c<b;++c)h[(d=i[c]).i]=d.x(a);return h.join("")})}function wf(b,c){for(var e,d=a.interpolators.length;--d>=0&&!(e=a.interpolators[d](b,c)););return e}function xf(a,b){var h,c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length);for(h=0;h<g;++h)c.push(wf(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<f;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}}function Bf(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function Cf(a){return function(b){return 1-a(1-b)}}function Df(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function Ef(a){return a*a}function Ff(a){return a*a*a}function Gf(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Hf(a){return function(b){return Math.pow(b,a)}}function If(a){return 1-Math.cos(a*Da)}function Jf(a){return Math.pow(2,10*(a-1))}function Kf(a){return 1-Math.sqrt(1-a*a)}function Lf(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ba*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ba/b)}}function Mf(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Nf(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Of(b,c){b=a.hcl(b),c=a.hcl(c);var d=b.h,e=b.c,f=b.l,g=c.h-d,h=c.c-e,i=c.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?c.c:e),isNaN(g)?(g=0,d=isNaN(d)?c.h:d):g>180?g-=360:g<-180&&(g+=360),function(a){return $a(d+g*a,e+h*a,f+i*a)+""}}function Pf(b,c){b=a.hsl(b),c=a.hsl(c);var d=b.h,e=b.s,f=b.l,g=c.h-d,h=c.s-e,i=c.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?c.s:e),isNaN(g)?(g=0,d=isNaN(d)?c.h:d):g>180?g-=360:g<-180&&(g+=360),function(a){return Xa(d+g*a,e+h*a,f+i*a)+""}}function Qf(b,c){b=a.lab(b),c=a.lab(c);var d=b.l,e=b.a,f=b.b,g=c.l-d,h=c.a-e,i=c.b-f;return function(a){return fb(d+g*a,e+h*a,f+i*a)+""}}function Rf(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Sf(a){var b=[a.a,a.b],c=[a.c,a.d],d=Uf(b),e=Tf(b,c),f=Uf(Vf(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Fa,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Fa:0}function Tf(a,b){return a[0]*b[0]+a[1]*b[1]}function Uf(a){var b=Math.sqrt(Tf(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Vf(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Xf(b,c){var f,d=[],e=[],g=a.transform(b),h=a.transform(c),i=g.translate,j=h.translate,k=g.rotate,l=h.rotate,m=g.skew,n=h.skew,o=g.scale,p=h.scale;return i[0]!=j[0]||i[1]!=j[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:sf(i[0],j[0])},{i:3,x:sf(i[1],j[1])})):j[0]||j[1]?d.push("translate("+j+")"):d.push(""),k!=l?(k-l>180?l+=360:l-k>180&&(k+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:sf(k,l)})):l&&d.push(d.pop()+"rotate("+l+")"),m!=n?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:sf(m,n)}):n&&d.push(d.pop()+"skewX("+n+")"),o[0]!=p[0]||o[1]!=p[1]?(f=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:f-4,x:sf(o[0],p[0])},{i:f-2,x:sf(o[1],p[1])})):1==p[0]&&1==p[1]||d.push(d.pop()+"scale("+p+")"),f=e.length,function(a){for(var c,b=-1;++b<f;)d[(c=e[b]).i]=c.x(a);return d.join("")}}function Yf(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Zf(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function $f(a){for(var b=a.source,c=a.target,d=ag(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function _f(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function ag(a,b){if(a===b)return a;for(var c=_f(a),d=_f(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function bg(a){a.fixed|=2}function cg(a){a.fixed&=-7}function dg(a){a.fixed|=4,a.px=a.x,a.py=a.y}function eg(a){a.fixed&=-5}function fg(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var i,f=a.nodes,g=f.length,h=-1;++h<g;)i=f[h],
null!=i&&(fg(i,b,c),a.charge+=i.charge,d+=i.charge*i.cx,e+=i.charge*i.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function jg(b,c){return a.rebind(b,c,"sort","children","value"),b.nodes=b,b.links=pg,b}function kg(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function lg(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(g=a.children)&&(f=g.length))for(var f,g,e=-1;++e<f;)c.push(g[e]);for(;null!=(a=d.pop());)b(a)}function mg(a){return a.children}function ng(a){return a.value}function og(a,b){return b.value-a.value}function pg(b){return a.merge(b.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function rg(a){return a.x}function sg(a){return a.y}function tg(a,b,c){a.y0=b,a.y=c}function wg(b){return a.range(b.length)}function xg(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function yg(a){for(var e,b=1,c=0,d=a[0][1],f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function zg(a){return a.reduce(Ag,0)}function Ag(a,b){return a+b[1]}function Bg(a,b){return Cg(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Cg(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Dg(b){return[a.min(b),a.max(b)]}function Eg(a,b){return a.value-b.value}function Fg(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function Gg(a,b){a._pack_next=b,b._pack_prev=a}function Hg(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ig(a){function n(a){c=Math.min(a.x-a.r,c),d=Math.max(a.x+a.r,d),e=Math.min(a.y-a.r,e),f=Math.max(a.y+a.r,f)}if((b=a.children)&&(m=b.length)){var b,g,h,i,j,k,l,m,c=1/0,d=-(1/0),e=1/0,f=-(1/0);if(b.forEach(Jg),g=b[0],g.x=-g.r,g.y=0,n(g),m>1&&(h=b[1],h.x=h.r,h.y=0,n(h),m>2))for(i=b[2],Mg(g,h,i),n(i),Fg(g,i),g._pack_prev=i,Fg(i,h),h=g._pack_next,j=3;j<m;j++){Mg(g,h,i=b[j]);var o=0,p=1,q=1;for(k=h._pack_next;k!==h;k=k._pack_next,p++)if(Hg(k,i)){o=1;break}if(1==o)for(l=g._pack_prev;l!==k._pack_prev&&!Hg(l,i);l=l._pack_prev,q++);o?(p<q||p==q&&h.r<g.r?Gg(g,h=k):Gg(g=l,h),j--):(Fg(g,i),h=i,n(i))}var r=(c+d)/2,s=(e+f)/2,t=0;for(j=0;j<m;j++)i=b[j],i.x-=r,i.y-=s,t=Math.max(t,i.r+Math.sqrt(i.x*i.x+i.y*i.y));a.r=t,b.forEach(Kg)}}function Jg(a){a._pack_next=a._pack_prev=a}function Kg(a){delete a._pack_next,delete a._pack_prev}function Lg(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Lg(e[f],b,c,d)}function Mg(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ng(a,b){return a.parent==b.parent?1:2}function Og(a){var b=a.children;return b.length?b[0]:a.t}function Pg(a){var c,b=a.children;return(c=b.length)?b[c-1]:a.t}function Qg(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Rg(a){for(var f,b=0,c=0,d=a.children,e=d.length;--e>=0;)f=d[e],f.z+=b,f.m+=b,b+=f.s+(c+=f.c)}function Sg(a,b,c){return a.a.parent===b.parent?a.a:c}function Tg(b){return 1+a.max(b,function(a){return a.y})}function Ug(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Vg(a){var b=a.children;return b&&b.length?Vg(b[0]):a}function Wg(a){var c,b=a.children;return b&&(c=b.length)?Wg(b[c-1]):a}function Xg(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Yg(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Zg(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function $g(a){return a.rangeExtent?a.rangeExtent():Zg(a.range())}function _g(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function ah(a,b){var g,c=0,d=a.length-1,e=a[c],f=a[d];return f<e&&(g=c,c=d,d=g,g=e,e=f,f=g),a[c]=b.floor(e),a[d]=b.ceil(f),a}function bh(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:ch}function dh(b,c,d,e){var f=[],g=[],h=0,i=Math.min(b.length,c.length)-1;for(b[i]<b[0]&&(b=b.slice().reverse(),c=c.slice().reverse());++h<=i;)f.push(d(b[h-1],b[h])),g.push(e(c[h-1],c[h]));return function(c){var d=a.bisect(b,c,1,i)-1;return g[d](f[d](c))}}function eh(a,b,c,d){function g(){var g=Math.min(a.length,b.length)>2?dh:_g,i=d?Zf:Yf;return e=g(a,b,i,c),f=g(b,a,i,wf),h}function h(a){return e(a)}var e,f;return h.invert=function(a){return f(a)},h.domain=function(b){return arguments.length?(a=b.map(Number),g()):a},h.range=function(a){return arguments.length?(b=a,g()):b},h.rangeRound=function(a){return h.range(a).interpolate(Rf)},h.clamp=function(a){return arguments.length?(d=a,g()):d},h.interpolate=function(a){return arguments.length?(c=a,g()):c},h.ticks=function(b){return ih(a,b)},h.tickFormat=function(b,c){return jh(a,b,c)},h.nice=function(b){return gh(a,b),g()},h.copy=function(){return eh(a,b,c,d)},g()}function fh(b,c){return a.rebind(b,c,"range","rangeRound","interpolate","clamp")}function gh(a,b){return ah(a,bh(hh(a,b)[2]))}function hh(a,b){null==b&&(b=10);var c=Zg(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function ih(b,c){return a.range.apply(a,hh(b,c))}function jh(b,c,d){var e=hh(b,c);if(d){var f=Nb.exec(d);if(f.shift(),"s"===f[8]){var g=a.formatPrefix(Math.max(r(e[0]),r(e[1])));return f[7]||(f[7]="."+lh(g.scale(e[2]))),f[8]="f",d=a.format(f.join("")),function(a){return d(g.scale(a))+g.symbol}}f[7]||(f[7]="."+mh(f[8],e)),d=f.join("")}else d=",."+lh(e[2])+"f";return a.format(d)}function lh(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function mh(a,b){var c=lh(b[2]);return a in kh?Math.abs(c-lh(Math.max(r(b[0]),r(b[1]))))+ +("e"!==a):c-2*("%"===a)}function nh(b,c,d,e){function f(a){return(d?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(c)}function g(a){return d?Math.pow(c,a):-Math.pow(c,-a)}function h(a){return b(f(a))}return h.invert=function(a){return g(b.invert(a))},h.domain=function(a){return arguments.length?(d=a[0]>=0,b.domain((e=a.map(Number)).map(f)),h):e},h.base=function(a){return arguments.length?(c=+a,b.domain(e.map(f)),h):c},h.nice=function(){var a=ah(e.map(f),d?Math:ph);return b.domain(a),e=a.map(g),h},h.ticks=function(){var a=Zg(e),b=[],h=a[0],i=a[1],j=Math.floor(f(h)),k=Math.ceil(f(i)),l=c%1?2:c;if(isFinite(k-j)){if(d){for(;j<k;j++)for(var m=1;m<l;m++)b.push(g(j)*m);b.push(g(j))}else for(b.push(g(j));j++<k;)for(var m=l-1;m>0;m--)b.push(g(j)*m);for(j=0;b[j]<h;j++);for(k=b.length;b[k-1]>i;k--);b=b.slice(j,k)}return b},h.tickFormat=function(b,c){if(!arguments.length)return oh;arguments.length<2?c=oh:"function"!=typeof c&&(c=a.format(c));var j,e=Math.max(.1,b/h.ticks().length),i=d?(j=1e-12,Math.ceil):(j=-1e-12,Math.floor);return function(a){return a/g(i(f(a)+j))<=e?c(a):""}},h.copy=function(){return nh(b.copy(),c,d,e)},fh(h,b)}function qh(a,b,c){function f(b){return a(d(b))}var d=rh(b),e=rh(1/b);return f.invert=function(b){return e(a.invert(b))},f.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(d)),f):c},f.ticks=function(a){return ih(c,a)},f.tickFormat=function(a,b){return jh(c,a,b)},f.nice=function(a){return f.domain(gh(c,a))},f.exponent=function(g){return arguments.length?(d=rh(b=g),e=rh(1/b),a.domain(c.map(d)),f):b},f.copy=function(){return qh(a.copy(),b,c)},fh(f,a)}function rh(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function sh(b,c){function g(a){return e[((d.get(a)||("range"===c.t?d.set(a,b.push(a)):NaN))-1)%e.length]}function h(c,d){return a.range(b.length).map(function(a){return c+d*a})}var d,e,f;return g.domain=function(a){if(!arguments.length)return b;b=[],d=new u;for(var h,e=-1,f=a.length;++e<f;)d.has(h=a[e])||d.set(h,b.push(h));return g[c.t].apply(g,c.a)},g.range=function(a){return arguments.length?(e=a,f=0,c={t:"range",a:arguments},g):e},g.rangePoints=function(a,d){arguments.length<2&&(d=0);var i=a[0],j=a[1],k=b.length<2?(i=(i+j)/2,0):(j-i)/(b.length-1+d);return e=h(i+k*d/2,k),f=0,c={t:"rangePoints",a:arguments},g},g.rangeRoundPoints=function(a,d){arguments.length<2&&(d=0);var i=a[0],j=a[1],k=b.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(b.length-1+d)|0;return e=h(i+Math.round(k*d/2+(j-i-(b.length-1+d)*k)/2),k),f=0,c={t:"rangeRoundPoints",a:arguments},g},g.rangeBands=function(a,d,i){arguments.length<2&&(d=0),arguments.length<3&&(i=d);var j=a[1]<a[0],k=a[j-0],l=a[1-j],m=(l-k)/(b.length-d+2*i);return e=h(k+m*i,m),j&&e.reverse(),f=m*(1-d),c={t:"rangeBands",a:arguments},g},g.rangeRoundBands=function(a,d,i){arguments.length<2&&(d=0),arguments.length<3&&(i=d);var j=a[1]<a[0],k=a[j-0],l=a[1-j],m=Math.floor((l-k)/(b.length-d+2*i));return e=h(k+Math.round((l-k-(b.length-d)*m)/2),m),j&&e.reverse(),f=Math.round(m*(1-d)),c={t:"rangeRoundBands",a:arguments},g},g.rangeBand=function(){return f},g.rangeExtent=function(){return Zg(c.a[0])},g.copy=function(){return sh(b,c)},g.domain(b)}function xh(b,c){function e(){var e=0,g=c.length;for(d=[];++e<g;)d[e-1]=a.quantile(b,e/g);return f}function f(b){if(!isNaN(b=+b))return c[a.bisect(d,b)]}var d;return f.domain=function(a){return arguments.length?(b=a.map(m).filter(n).sort(l),e()):b},f.range=function(a){return arguments.length?(c=a,e()):c},f.quantiles=function(){return d},f.invertExtent=function(a){return a=c.indexOf(a),a<0?[NaN,NaN]:[a>0?d[a-1]:b[0],a<d.length?d[a]:b[b.length-1]]},f.copy=function(){return xh(b,c)},e()}function yh(a,b,c){function f(b){return c[Math.max(0,Math.min(e,Math.floor(d*(b-a))))]}function g(){return d=c.length/(b-a),e=c.length-1,f}var d,e;return f.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],g()):[a,b]},f.range=function(a){return arguments.length?(c=a,g()):c},f.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/d+a,[b,b+1/d]},f.copy=function(){return yh(a,b,c)},g()}function zh(b,c){function d(d){if(d<=d)return c[a.bisect(b,d)]}return d.domain=function(a){return arguments.length?(b=a,d):b},d.range=function(a){return arguments.length?(c=a,d):c},d.invertExtent=function(a){return a=c.indexOf(a),[b[a-1],b[a]]},d.copy=function(){return zh(b,c)},d}function Ah(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return ih(a,b)},b.tickFormat=function(b,c){return jh(a,b,c)},b.copy=function(){return Ah(a)},b}function Bh(){return 0}function Dh(a){return a.innerRadius}function Eh(a){return a.outerRadius}function Fh(a){return a.startAngle}function Gh(a){return a.endAngle}function Hh(a){return a&&a.padAngle}function Ih(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function Jh(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function Kh(a){function h(f){function o(){h.push("M",e(a(i),g))}for(var l,h=[],i=[],j=-1,k=f.length,m=vb(b),n=vb(c);++j<k;)d.call(this,l=f[j],j)?i.push([+m.call(this,l,j),+n.call(this,l,j)]):i.length&&(o(),i=[]);return i.length&&o(),h.length?h.join(""):null}var b=ue,c=ve,d=dd,e=Mh,f=e.key,g=.7;return h.x=function(a){return arguments.length?(b=a,h):b},h.y=function(a){return arguments.length?(c=a,h):c},h.defined=function(a){return arguments.length?(d=a,h):d},h.interpolate=function(a){return arguments.length?(f="function"==typeof a?e=a:(e=Lh.get(a)||Mh).key,h):f},h.tension=function(a){return arguments.length?(g=a,h):g},h}function Mh(a){return a.join("L")}function Nh(a){return Mh(a)+"Z"}function Oh(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function Ph(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Qh(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Rh(a,b){return a.length<4?Mh(a):a[1]+Uh(a.slice(1,-1),Vh(a,b))}function Sh(a,b){return a.length<3?Mh(a):a[0]+Uh((a.push(a[0]),a),Vh([a[a.length-2]].concat(a,[a[1]]),b))}function Th(a,b){return a.length<3?Mh(a):a[0]+Uh(a,Vh(a,b))}function Uh(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return Mh(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Vh(a,b){for(var e,c=[],d=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function Wh(a){if(a.length<3)return Mh(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",$h(bi,g),",",$h(bi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),ci(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Xh(a){if(a.length<4)return Mh(a);for(var e,b=[],c=-1,d=a.length,f=[0],g=[0];++c<3;)e=a[c],f.push(e[0]),g.push(e[1]);for(b.push($h(bi,f)+","+$h(bi,g)),--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),ci(b,f,g);return b.join("")}function Yh(a){for(var b,f,c=-1,d=a.length,e=d+4,g=[],h=[];++c<4;)f=a[c%d],g.push(f[0]),h.push(f[1]);for(b=[$h(bi,g),",",$h(bi,h)],--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),ci(b,g,h);return b.join("")}function Zh(a,b){var c=a.length-1;if(c)for(var i,j,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1;++h<=c;)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*f),i[1]=b*i[1]+(1-b)*(e+j*g);return Wh(a)}function $h(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function ci(a,b,c){a.push("C",$h(_h,b),",",$h(_h,c),",",$h(ai,b),",",$h(ai,c),",",$h(bi,b),",",$h(bi,c))}function di(a,b){return(b[1]-a[1])/(b[0]-a[0])}function ei(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=di(e,f);++b<c;)d[b]=(g+(g=di(e=f,f=a[b+1])))/2;return d[b]=g,d}function fi(a){for(var c,d,e,f,b=[],g=ei(a),h=-1,i=a.length-1;++h<i;)c=di(a[h],a[h+1]),r(c)<ya?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=3*c/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));for(h=-1;++h<=i;)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function gi(a){return a.length<3?Mh(a):a[0]+Uh(a,fi(a))}function hi(a){for(var b,e,f,c=-1,d=a.length;++c<d;)b=a[c],e=b[0],f=b[1]-Da,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function ii(a){function l(h){function x(){l.push("M",g(a(n),k),j,i(a(m.reverse()),k),"Z")}for(var q,v,w,l=[],m=[],n=[],o=-1,p=h.length,r=vb(b),s=vb(d),t=b===c?function(){return v}:vb(c),u=d===e?function(){return w}:vb(e);++o<p;)f.call(this,q=h[o],o)?(m.push([v=+r.call(this,q,o),w=+s.call(this,q,o)]),n.push([+t.call(this,q,o),+u.call(this,q,o)])):m.length&&(x(),m=[],n=[]);return m.length&&x(),l.length?l.join(""):null}var b=ue,c=ue,d=0,e=ve,f=dd,g=Mh,h=g.key,i=g,j="L",k=.7;return l.x=function(a){return arguments.length?(b=c=a,l):c},l.x0=function(a){return arguments.length?(b=a,l):b},l.x1=function(a){return arguments.length?(c=a,l):c},l.y=function(a){return arguments.length?(d=e=a,l):e},l.y0=function(a){return arguments.length?(d=a,l):d},l.y1=function(a){return arguments.length?(e=a,l):e},l.defined=function(a){return arguments.length?(f=a,l):f},l.interpolate=function(a){return arguments.length?(h="function"==typeof a?g=a:(g=Lh.get(a)||Mh).key,i=g.reverse||g,j=g.closed?"M":"L",l):h},l.tension=function(a){return arguments.length?(k=a,l):k},l}function ji(a){return a.radius}function ki(a){return[a.x,a.y]}function li(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Da;return[c*Math.cos(d),c*Math.sin(d)]}}function mi(){return 64}function ni(){return"circle"}function oi(a){var b=Math.sqrt(a/Aa);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function ti(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function ui(a,b,c){return Q(a,vi),a.namespace=b,a.id=c,a}function zi(a,b,c,d){var e=a.id,f=a.namespace;return ka(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Ai(a){return null==a&&(a=""),function(){this.textContent=a}}function Bi(a){return null==a?"__transition__":"__transition_"+a+"__"}function Ci(b,c,d,e,f){var g=b[d]||(b[d]={active:0,count:0}),h=g[e];if(!h){var i=f.time;h=g[e]={tween:new u,time:i,delay:f.delay,duration:f.duration,ease:f.ease,index:c},f=null,++g.count,a.timer(function(f){function o(d){if(g.active>e)return q();var f=g[g.active];f&&(--g.count,delete g[g.active],f.event&&f.event.interrupt.call(b,b.__data__,f.index)),g.active=e,h.event&&h.event.start.call(b,b.__data__,c),h.tween.forEach(function(a,d){(d=d.call(b,b.__data__,c))&&n.push(d)}),l=h.ease,k=h.duration,a.timer(function(){return m.c=p(d||1)?dd:p,1},0,i)}function p(a){if(g.active!==e)return 1;for(var d=a/k,f=l(d),i=n.length;i>0;)n[--i].call(b,f);return d>=1?(h.event&&h.event.end.call(b,b.__data__,c),q()):void 0}function q(){return--g.count?delete g[e]:delete b[d],1}var k,l,j=h.delay,m=Eb,n=[];return m.t=j+i,j<=f?o(f-j):void(m.c=o)},0,i)}}function Fi(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Gi(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Mi(a){return a.toISOString()}function Ni(b,c,d){function e(a){return b(a)}function f(b,d){var e=b[1]-b[0],f=e/d,g=a.bisect(Pi,f);return g==Pi.length?[c.year,hh(b.map(function(a){return a/31536e6}),d)[2]]:g?c[f/Pi[g-1]<Pi[g]/f?g-1:g]:[Si,hh(b,d)[2]]}return e.invert=function(a){return Oi(b.invert(a))},e.domain=function(a){return arguments.length?(b.domain(a),e):b.domain().map(Oi)},e.nice=function(a,b){function h(c){return!isNaN(c)&&!a.range(c,Oi(+c+1),b).length}var c=e.domain(),d=Zg(c),g=null==a?f(d,10):"number"==typeof a&&f(d,a);return g&&(a=g[0],b=g[1]),e.domain(ah(c,b>1?{floor:function(b){for(;h(b=a.floor(b));)b=Oi(b-1);return b},ceil:function(b){for(;h(b=a.ceil(b));)b=Oi(+b+1);return b}}:a))},e.ticks=function(a,b){var c=Zg(e.domain()),d=null==a?f(c,10):"number"==typeof a?f(c,a):!a.range&&[{range:a},b];return d&&(a=d[0],b=d[1]),a.range(c[0],Oi(+c[1]+1),b<1?1:b)},e.tickFormat=function(){return d},e.copy=function(){return Ni(b.copy(),c,d)},fh(e,b)}function Oi(a){return new Date(a)}function Vi(a){return JSON.parse(a.responseText)}function Wi(a){var b=d.createRange();return b.selectNode(d.body),b.createContextualFragment(a.responseText)}var a={version:"3.5.6"},b=[].slice,c=function(a){return b.call(a)},d=this.document;if(d)try{c(d.documentElement.childNodes)[0].nodeType}catch(a){c=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),d)try{d.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var g=this.Element.prototype,h=g.setAttribute,i=g.setAttributeNS,j=this.CSSStyleDeclaration.prototype,k=j.setProperty;g.setAttribute=function(a,b){h.call(this,a,b+"")},g.setAttributeNS=function(a,b,c){i.call(this,a,b,c+"")},j.setProperty=function(a,b,c){k.call(this,a,b+"",c)}}a.ascending=l,a.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},a.min=function(a,b){var e,f,c=-1,d=a.length;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e},a.max=function(a,b){var e,f,c=-1,d=a.length;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=f;break}for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e},a.extent=function(a,b){var e,f,g,c=-1,d=a.length;if(1===arguments.length){for(;++c<d;)if(null!=(f=a[c])&&f>=f){e=g=f;break}for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d;)if(null!=(f=b.call(a,a[c],c))&&f>=f){e=g=f;break}for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=f))}return[e,g]},a.sum=function(a,b){var e,c=0,d=a.length,f=-1;if(1===arguments.length)for(;++f<d;)n(e=+a[f])&&(c+=e);else for(;++f<d;)n(e=+b.call(a,a[f],f))&&(c+=e);return c},a.mean=function(a,b){var e,c=0,d=a.length,f=-1,g=d;if(1===arguments.length)for(;++f<d;)n(e=m(a[f]))?c+=e:--g;else for(;++f<d;)n(e=m(b.call(a,a[f],f)))?c+=e:--g;if(g)return c/g},a.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},a.median=function(b,c){var f,d=[],e=b.length,g=-1;if(1===arguments.length)for(;++g<e;)n(f=m(b[g]))&&d.push(f);else for(;++g<e;)n(f=m(c.call(b,b[g],g)))&&d.push(f);if(d.length)return a.quantile(d.sort(l),.5)},a.variance=function(a,b){var e,f,c=a.length,d=0,g=0,h=-1,i=0;if(1===arguments.length)for(;++h<c;)n(e=m(a[h]))&&(f=e-d,d+=f/++i,g+=f*(e-d));else for(;++h<c;)n(e=m(b.call(a,a[h],h)))&&(f=e-d,d+=f/++i,g+=f*(e-d));if(i>1)return g/(i-1)},a.deviation=function(){var b=a.variance.apply(this,arguments);return b?Math.sqrt(b):b};var p=o(l);a.bisectLeft=p.left,a.bisect=a.bisectRight=p.right,a.bisector=function(a){return o(1===a.length?function(b,c){return l(a(b),c)}:a)},a.shuffle=function(a,b,c){(d=arguments.length)<3&&(c=a.length,d<2&&(b=0));for(var e,f,d=c-b;d;)f=Math.random()*d--|0,e=a[d+b],a[d+b]=a[f+b],a[f+b]=e;return a},a.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},a.pairs=function(a){for(var d,b=0,c=a.length-1,e=a[0],f=new Array(c<0?0:c);b<c;)f[b]=[d=e,e=a[++b]];return f},a.zip=function(){if(!(f=arguments.length))return[];for(var b=-1,c=a.min(arguments,q),d=new Array(c);++b<c;)for(var f,e=-1,g=d[b]=new Array(f);++e<f;)g[e]=arguments[e][b];return d},a.transpose=function(b){return a.zip.apply(a,b)},a.keys=function(a){var b=[];for(var c in a)b.push(c);return b},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},a.merge=function(a){for(var c,f,g,b=a.length,d=-1,e=0;++d<b;)e+=a[d].length;for(f=new Array(e);--b>=0;)for(g=a[b],c=g.length;--c>=0;)f[--e]=g[c];return f};var r=Math.abs;a.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var g,d=[],e=s(r(c)),f=-1;if(a*=e,b*=e,c*=e,c<0)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d},a.map=function(a,b){var c=new u;if(a instanceof u)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var f,d=-1,e=a.length;if(1===arguments.length)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b.call(a,f=a[d],d),f)}else for(var g in a)c.set(g,a[g]);return c};var v="__proto__",w="\0";t(u,{has:z,get:function(a){return this._[x(a)]},set:function(a,b){return this._[x(a)]=b},remove:A,keys:B,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:y(b),value:this._[b]});return a},size:C,empty:D,forEach:function(a){for(var b in this._)a.call(this,y(b),this._[b])}}),a.nest=function(){function g(a,d,h){if(h>=c.length)return f?f.call(b,d):e?d.sort(e):d;for(var l,m,n,p,i=-1,j=d.length,k=c[h++],o=new u;++i<j;)(p=o.get(l=k(m=d[i])))?p.push(m):o.set(l,[m]);return a?(m=a(),n=function(b,c){m.set(b,g(a,c,h))}):(m={},n=function(b,c){m[b]=g(a,c,h)}),o.forEach(n),m}function h(a,b){if(b>=c.length)return a;var e=[],f=d[b++];return a.forEach(function(a,c){e.push({key:a,values:h(c,b)})}),f?e.sort(function(a,b){return f(a.key,b.key)}):e}var e,f,b={},c=[],d=[];return b.map=function(a,b){return g(b,a,0)},b.entries=function(b){return h(g(a.map,b,0),0)},b.key=function(a){return c.push(a),b},b.sortKeys=function(a){return d[c.length-1]=a,b},b.sortValues=function(a){return e=a,b},b.rollup=function(a){return f=a,b},b},a.set=function(a){var b=new E;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},t(E,{has:z,add:function(a){return this._[x(a+="")]=!0,a},remove:A,values:B,size:C,empty:D,forEach:function(a){for(var b in this._)a.call(this,y(b))}}),a.behavior={},a.rebind=function(a,b){for(var e,c=1,d=arguments.length;++c<d;)a[e=arguments[c]]=G(a,b,b[e]);return a};var I=["webkit","ms","moz","Moz","o","O"];a.dispatch=function(){for(var a=new K,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=L(a);return a},K.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},a.event=null,a.requote=function(a){return a.replace(P,"\\$&")};var P=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Q={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},S=function(a,b){return b.querySelector(a)},T=function(a,b){return b.querySelectorAll(a)},U=function(a,b){var c=a.matches||a[H(a,"matchesSelector")];return(U=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(S=function(a,b){return Sizzle(a,b)[0]||null},T=Sizzle,U=Sizzle.matchesSelector),a.selection=function(){return a.select(d.documentElement)};var V=a.selection.prototype=[];V.select=function(a){var c,d,e,f,b=[];a=W(a);for(var g=-1,h=this.length;++g<h;){b.push(c=[]),c.parentNode=(e=this[g]).parentNode;for(var i=-1,j=e.length;++i<j;)(f=e[i])?(c.push(d=a.call(f,f.__data__,i,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return R(b)},V.selectAll=function(a){var d,e,b=[];a=X(a);for(var f=-1,g=this.length;++f<g;)for(var h=this[f],i=-1,j=h.length;++i<j;)(e=h[i])&&(b.push(d=c(a.call(e,e.__data__,i,f))),d.parentNode=e);return R(b)};var Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:Y,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),Y.hasOwnProperty(c)?{space:Y[c],local:a}:a}},V.attr=function(b,c){if(arguments.length<2){if("string"==typeof b){var d=this.node();return b=a.ns.qualify(b),b.local?d.getAttributeNS(b.space,b.local):d.getAttribute(b)}for(c in b)this.each(Z(c,b[c]));return this}return this.each(Z(b,c))},V.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=aa(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!_(a[e]).test(b))return!1;return!0}for(b in a)this.each(ba(b,a[b]));return this}return this.each(ba(a,b))},V.style=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b="");for(c in a)this.each(da(c,a[c],b));return this}if(d<2){var e=this.node();return f(e).getComputedStyle(e,null).getPropertyValue(a)}c=""}return this.each(da(a,b,c))},V.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(ea(b,a[b]));return this}return this.each(ea(a,b))},V.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},V.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},V.append=function(a){return a=fa(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},V.insert=function(a,b){return a=fa(a),b=W(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},V.remove=function(){return this.each(ga)},V.data=function(a,b){function g(a,c){var d,n,o,e=a.length,f=c.length,g=Math.min(e,f),k=new Array(f),l=new Array(f),m=new Array(e);if(b){var r,p=new u,q=new Array(e);for(d=-1;++d<e;)p.has(r=b.call(n=a[d],n.__data__,d))?m[d]=n:p.set(r,n),q[d]=r;for(d=-1;++d<f;)(n=p.get(r=b.call(c,o=c[d],d)))?n!==!0&&(k[d]=n,n.__data__=o):l[d]=ha(o),p.set(r,!0);for(d=-1;++d<e;)p.get(q[d])!==!0&&(m[d]=a[d])}else{for(d=-1;++d<g;)n=a[d],o=c[d],n?(n.__data__=o,k[d]=n):l[d]=ha(o);for(;d<f;++d)l[d]=ha(c[d]);for(;d<e;++d)m[d]=a[d]}l.update=k,l.parentNode=k.parentNode=m.parentNode=a.parentNode,h.push(l),i.push(k),j.push(m)}var e,f,c=-1,d=this.length;if(!arguments.length){for(a=new Array(d=(e=this[0]).length);++c<d;)(f=e[c])&&(a[c]=f.__data__);return a}var h=la([]),i=R([]),j=R([]);if("function"==typeof a)for(;++c<d;)g(e=this[c],a.call(e,e.parentNode.__data__,c));else for(;++c<d;)g(e=this[c],a);return i.enter=function(){return h},i.exit=function(){return j},i},V.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},V.filter=function(a){var c,d,e,b=[];"function"!=typeof a&&(a=ia(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]),c.parentNode=(d=this[f]).parentNode;for(var h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return R(b)},V.order=function(){for(var a=-1,b=this.length;++a<b;)for(var f,c=this[a],d=c.length-1,e=c[d];--d>=0;)(f=c[d])&&(e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f);return this},V.sort=function(a){a=ja.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},V.each=function(a){return ka(this,function(b,c,d){a.call(b,b.__data__,c,d)})},V.call=function(a){var b=c(arguments);return a.apply(b[0]=this,b),this},V.empty=function(){return!this.node()},V.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},V.size=function(){var a=0;return ka(this,function(){++a}),a};var ma=[];a.selection.enter=la,a.selection.enter.prototype=ma,ma.append=V.append,ma.empty=V.empty,ma.node=V.node,ma.call=V.call,ma.size=V.size,ma.select=function(a){for(var c,d,e,f,g,b=[],h=-1,i=this.length;++h<i;){e=(f=this[h]).update,b.push(c=[]),c.parentNode=f.parentNode;for(var j=-1,k=f.length;++j<k;)(g=f[j])?(c.push(e[j]=d=a.call(f.parentNode,g.__data__,j,h)),d.__data__=g.__data__):c.push(null)}return R(b)},ma.insert=function(a,b){return arguments.length<2&&(b=na(this)),V.insert.call(this,a,b)},a.select=function(a){var b;return"string"==typeof a?(b=[S(a,d)],b.parentNode=d.documentElement):(b=[a],b.parentNode=e(a)),R([b])},a.selectAll=function(a){var b;return"string"==typeof a?(b=c(T(a,d)),b.parentNode=d.documentElement):(b=a,b.parentNode=null),R([b])},V.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(oa(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(oa(a,b,c))};var pa=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});d&&pa.forEach(function(a){"on"+a in d&&pa.remove(a)});var sa,ta=0;a.mouse=function(a){return wa(a,N())};var va=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;a.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=N().changedTouches),b)for(var f,d=0,e=b.length;d<e;++d)if((f=b[d]).identifier===c)return wa(a,f)},a.behavior.drag=function(){function g(){this.on("mousedown.drag",d).on("touchstart.drag",e)}function h(d,e,f,g,h){return function(){function t(){var b,c,a=e(k,n);a&&(b=a[0]-s[0],c=a[1]-s[1],m|=b|c,s=a,l({type:"drag",x:a[0]+p[0],y:a[1]+p[1],dx:b,dy:c}))}function u(){e(k,n)&&(q.on(g+o,null).on(h+o,null),
r(m&&a.event.target===j),l({type:"dragend"}))}var p,i=this,j=a.event.target,k=i.parentNode,l=b.of(i,arguments),m=0,n=d(),o=".drag"+(null==n?"":"-"+n),q=a.select(f(j)).on(g+o,t).on(h+o,u),r=ua(j),s=e(k,n);c?(p=c.apply(i,arguments),p=[p.x-s[0],p.y-s[1]]):p=[0,0],l({type:"dragstart"})}}var b=O(g,"drag","dragstart","dragend"),c=null,d=h(J,a.mouse,f,"mousemove","mouseup"),e=h(xa,a.touch,F,"touchmove","touchend");return g.origin=function(a){return arguments.length?(c=a,g):c},a.rebind(g,b,"on")},a.touches=function(a,b){return arguments.length<2&&(b=N().touches),b?c(b).map(function(b){var c=wa(a,b);return c.identifier=b.identifier,c}):[]};var ya=1e-6,za=ya*ya,Aa=Math.PI,Ba=2*Aa,Ca=Ba-ya,Da=Aa/2,Ea=Aa/180,Fa=180/Aa,Oa=Math.SQRT2,Pa=2,Qa=4;a.interpolateZoom=function(a,b){function s(a){var b=a*r;if(q){var f=La(o),g=e/(Pa*l)*(f*Ma(Oa*b+o)-Ka(o));return[c+g*i,d+g*j,e*f/La(Oa*b+o)]}return[c+a*i,d+a*j,e*Math.exp(Oa*b)]}var c=a[0],d=a[1],e=a[2],f=b[0],g=b[1],h=b[2],i=f-c,j=g-d,k=i*i+j*j,l=Math.sqrt(k),m=(h*h-e*e+Qa*k)/(2*e*Pa*l),n=(h*h-e*e-Qa*k)/(2*h*Pa*l),o=Math.log(Math.sqrt(m*m+1)-m),p=Math.log(Math.sqrt(n*n+1)-n),q=p-o,r=(q||Math.log(h/e))/Oa;return s.duration=1e3*r,s},a.behavior.zoom=function(){function w(a){a.on(l,G).on(Ta+".zoom",I).on("dblclick.zoom",J).on(p,H)}function x(a){return[(a[0]-b.x)/b.k,(a[1]-b.y)/b.k]}function y(a){return[a[0]*b.k+b.x,a[1]*b.k+b.y]}function z(a){b.k=Math.max(i[0],Math.min(i[1],a))}function A(a,c){c=y(c),b.x+=a[0]-c[0],b.y+=a[1]-c[1]}function B(c,d,f,g){c.__chart__={x:b.x,y:b.y,k:b.k},z(Math.pow(2,g)),A(e=d,f),c=a.select(c),j>0&&(c=c.transition().duration(j)),c.call(w.event)}function C(){t&&t.domain(s.range().map(function(a){return(a-b.x)/b.k}).map(s.invert)),v&&v.domain(u.range().map(function(a){return(a-b.y)/b.k}).map(u.invert))}function D(a){k++||a({type:"zoomstart"})}function E(a){C(),a({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function F(a){--k||(a({type:"zoomend"}),e=null)}function G(){function j(){e=1,A(a.mouse(b),h),E(d)}function k(){g.on(m,null).on(n,null),i(e&&a.event.target===c),F(d)}var b=this,c=a.event.target,d=r.of(b,arguments),e=0,g=a.select(f(b)).on(m,j).on(n,k),h=x(a.mouse(b)),i=ua(b);si.call(b),D(d)}function H(){function o(){var d=a.touches(c);return g=b.k,d.forEach(function(a){a.identifier in e&&(e[a.identifier]=x(a))}),d}function s(){var d=a.event.target;a.select(d).on(i,t).on(j,u),k.push(d);for(var g=a.event.changedTouches,h=0,l=g.length;h<l;++h)e[g[h].identifier]=null;var m=o(),n=Date.now();if(1===m.length){if(n-q<500){var p=m[0];B(c,p,e[p.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),M()}q=n}else if(m.length>1){var p=m[0],r=m[1],s=p[0]-r[0],v=p[1]-r[1];f=s*s+v*v}}function t(){var h,i,j,k,b=a.touches(c);si.call(c);for(var l=0,m=b.length;l<m;++l,k=null)if(j=b[l],k=e[j.identifier]){if(i)break;h=j,i=k}if(k){var n=(n=j[0]-h[0])*n+(n=j[1]-h[1])*n,o=f&&Math.sqrt(n/f);h=[(h[0]+j[0])/2,(h[1]+j[1])/2],i=[(i[0]+k[0])/2,(i[1]+k[1])/2],z(o*g)}q=null,A(h,i),E(d)}function u(){if(a.event.touches.length){for(var b=a.event.changedTouches,c=0,f=b.length;c<f;++c)delete e[b[c].identifier];for(var g in e)return void o()}a.selectAll(k).on(h,null),m.on(l,G).on(p,H),n(),F(d)}var g,c=this,d=r.of(c,arguments),e={},f=0,h=".zoom-"+a.event.changedTouches[0].identifier,i="touchmove"+h,j="touchend"+h,k=[],m=a.select(c),n=ua(c);s(),D(d),m.on(l,null).on(p,s)}function I(){var d=r.of(this,arguments);o?clearTimeout(o):(si.call(this),c=x(e=g||a.mouse(this)),D(d)),o=setTimeout(function(){o=null,F(d)},50),M(),z(Math.pow(2,.002*Sa())*b.k),A(e,c),E(d)}function J(){var c=a.mouse(this),d=Math.log(b.k)/Math.LN2;B(this,c,x(c),a.event.shiftKey?Math.ceil(d)-1:Math.floor(d)+1)}var c,e,g,o,q,s,t,u,v,b={x:0,y:0,k:1},h=[960,500],i=Ra,j=250,k=0,l="mousedown.zoom",m="mousemove.zoom",n="mouseup.zoom",p="touchstart.zoom",r=O(w,"zoomstart","zoom","zoomend");return Ta||(Ta="onwheel"in d?(Sa=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in d?(Sa=function(){return a.event.wheelDelta},"mousewheel"):(Sa=function(){return-a.event.detail},"MozMousePixelScroll")),w.event=function(c){c.each(function(){var c=r.of(this,arguments),d=b;xi?a.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},D(c)}).tween("zoom:zoom",function(){var f=h[0],g=h[1],i=e?e[0]:f/2,j=e?e[1]:g/2,k=a.interpolateZoom([(i-b.x)/b.k,(j-b.y)/b.k,f/b.k],[(i-d.x)/d.k,(j-d.y)/d.k,f/d.k]);return function(a){var d=k(a),e=f/d[2];this.__chart__=b={x:i-d[0]*e,y:j-d[1]*e,k:e},E(c)}}).each("interrupt.zoom",function(){F(c)}).each("end.zoom",function(){F(c)}):(this.__chart__=b,D(c),E(c),F(c))})},w.translate=function(a){return arguments.length?(b={x:+a[0],y:+a[1],k:b.k},C(),w):[b.x,b.y]},w.scale=function(a){return arguments.length?(b={x:b.x,y:b.y,k:+a},C(),w):b.k},w.scaleExtent=function(a){return arguments.length?(i=null==a?Ra:[+a[0],+a[1]],w):i},w.center=function(a){return arguments.length?(g=a&&[+a[0],+a[1]],w):g},w.size=function(a){return arguments.length?(h=a&&[+a[0],+a[1]],w):h},w.duration=function(a){return arguments.length?(j=+a,w):j},w.x=function(a){return arguments.length?(t=a,s=a.copy(),b={x:0,y:0,k:1},w):t},w.y=function(a){return arguments.length?(v=a,u=a.copy(),b={x:0,y:0,k:1},w):v},a.rebind(w,r,"on")};var Sa,Ta,Ra=[0,1/0];a.color=Ua,Ua.prototype.toString=function(){return this.rgb()+""},a.hsl=Va;var Wa=Va.prototype=new Ua;Wa.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new Va(this.h,this.s,this.l/a)},Wa.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new Va(this.h,this.s,a*this.l)},Wa.rgb=function(){return Xa(this.h,this.s,this.l)},a.hcl=Ya;var Za=Ya.prototype=new Ua;Za.brighter=function(a){return new Ya(this.h,this.c,Math.min(100,this.l+ab*(arguments.length?a:1)))},Za.darker=function(a){return new Ya(this.h,this.c,Math.max(0,this.l-ab*(arguments.length?a:1)))},Za.rgb=function(){return $a(this.h,this.c,this.l).rgb()},a.lab=_a;var ab=18,bb=.95047,cb=1,db=1.08883,eb=_a.prototype=new Ua;eb.brighter=function(a){return new _a(Math.min(100,this.l+ab*(arguments.length?a:1)),this.a,this.b)},eb.darker=function(a){return new _a(Math.max(0,this.l-ab*(arguments.length?a:1)),this.a,this.b)},eb.rgb=function(){return fb(this.l,this.a,this.b)},a.rgb=kb;var nb=kb.prototype=new Ua;nb.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new kb(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new kb(e,e,e)},nb.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new kb(a*this.r,a*this.g,a*this.b)},nb.hsl=function(){return qb(this.r,this.g,this.b)},nb.toString=function(){return"#"+ob(this.r)+ob(this.g)+ob(this.b)};var ub=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ub.forEach(function(a,b){ub.set(a,lb(b))}),a.functor=vb,a.xhr=wb(F),a.dsv=function(a,b){function e(a,c,d){arguments.length<3&&(d=c,c=null);var e=xb(a,b,null==c?f:g(c),d);return e.row=function(a){return arguments.length?e.response(null==(c=a)?f:g(a)):c},e}function f(a){return e.parse(a.responseText)}function g(a){return function(b){return e.parse(b.responseText,a)}}function h(b){return b.map(i).join(a)}function i(a){return c.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var c=new RegExp('["'+a+"\n]"),d=a.charCodeAt(0);return e.parse=function(a,b){var c;return e.parseRows(a,function(a,d){if(c)return c(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,c){return b(e(a),c)}:e})},e.parseRows=function(a,b){function l(){if(h>=g)return e;if(k)return k=!1,c;var b=h;if(34===a.charCodeAt(b)){for(var f=b;f++<g;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}h=f+2;var i=a.charCodeAt(f+1);return 13===i?(k=!0,10===a.charCodeAt(f+2)&&++h):10===i&&(k=!0),a.slice(b+1,f).replace(/""/g,'"')}for(;h<g;){var i=a.charCodeAt(h++),j=1;if(10===i)k=!0;else if(13===i)k=!0,10===a.charCodeAt(h)&&(++h,++j);else if(i!==d)continue;return a.slice(b,h-j)}return a.slice(b)}for(var j,k,c={},e={},f=[],g=a.length,h=0,i=0;(j=l())!==e;){for(var m=[];j!==c&&j!==e;)m.push(j),j=l();b&&null==(m=b(m,i++))||f.push(m)}return f},e.format=function(b){if(Array.isArray(b[0]))return e.formatRows(b);var c=new E,d=[];return b.forEach(function(a){for(var b in a)c.has(b)||d.push(c.add(b))}),[d.map(i).join(a)].concat(b.map(function(b){return d.map(function(a){return i(b[a])}).join(a)})).join("\n")},e.formatRows=function(a){return a.map(h).join("\n")},e},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var Ab,Bb,Cb,Db,Eb,Fb=this[H(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};a.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Bb?Bb.n=f:Ab=f,Bb=f,Cb||(Db=clearTimeout(Db),Cb=1,Fb(Gb))},a.timer.flush=function(){Hb(),Ib()},a.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Kb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Lb);a.formatPrefix=function(b,c){var d=0;return b&&(b<0&&(b*=-1),c&&(b=a.round(b,Jb(b,c))),d=1+Math.floor(1e-12+Math.log(b)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d-1)/3)))),Kb[8+d/3]};var Nb=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ob=a.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(b,c){return(b=a.round(b,Jb(b,c))).toFixed(Math.max(0,Math.min(20,Jb(b*(1+1e-15),c))))}}),Qb=a.time={},Rb=Date;Sb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Tb.setUTCDate.apply(this._,arguments)},setDay:function(){Tb.setUTCDay.apply(this._,arguments)},setFullYear:function(){Tb.setUTCFullYear.apply(this._,arguments)},setHours:function(){Tb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Tb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Tb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Tb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Tb.setUTCSeconds.apply(this._,arguments)},setTime:function(){Tb.setTime.apply(this._,arguments)}};var Tb=Date.prototype;Qb.year=Ub(function(a){return a=Qb.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),Qb.years=Qb.year.range,Qb.years.utc=Qb.year.utc.range,Qb.day=Ub(function(a){var b=new Rb(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),Qb.days=Qb.day.range,Qb.days.utc=Qb.day.utc.range,Qb.dayOfYear=function(a){var b=Qb.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=Qb[a]=Ub(function(a){return(a=Qb.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=Qb.year(a).getDay();return Math.floor((Qb.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});Qb[a+"s"]=c.range,Qb[a+"s"].utc=c.utc.range,Qb[a+"OfYear"]=function(a){var c=Qb.year(a).getDay();return Math.floor((Qb.dayOfYear(a)+(c+b)%7)/7)}}),Qb.week=Qb.sunday,Qb.weeks=Qb.sunday.range,Qb.weeks.utc=Qb.sunday.utc.range,Qb.weekOfYear=Qb.sundayOfYear;var Xb={"-":"",_:" ",0:"0"},Yb=/^\s*\d+/,Zb=/^%/;a.locale=function(a){return{numberFormat:Mb(a),timeFormat:Wb(a)}};var sc=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});a.format=sc.numberFormat,a.geo={},tc.prototype={s:0,t:0,add:function(a){vc(a,this.t,uc),vc(uc.s,this.s,this),this.s?this.t+=uc.t:this.s=uc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uc=new tc;a.geo.stream=function(a,b){a&&xc.hasOwnProperty(a.type)?xc[a.type](a,b):wc(a,b)};var xc={Feature:function(a,b){wc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)wc(c[d].geometry,b)}},yc={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){zc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)zc(c[d],b,0)},Polygon:function(a,b){Ac(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Ac(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)wc(c[d],b)}};a.geo.area=function(b){return Bc=0,a.geo.stream(b,Dc),Bc};var Bc,Cc=new tc,Dc={sphere:function(){Bc+=4*Aa},point:J,lineStart:J,lineEnd:J,polygonStart:function(){Cc.reset(),Dc.lineStart=Ec},polygonEnd:function(){var a=2*Cc;Bc+=a<0?4*Aa+a:a,Dc.lineStart=Dc.lineEnd=Dc.point=J}};a.geo.bounds=function(){function n(a,f){k.push(l=[b=a,d=a]),f<c&&(c=f),f>e&&(e=f)}function o(a,g){var h=Fc([a*Ea,g*Ea]);if(i){var j=Hc(i,h),k=[j[1],-j[0],0],l=Hc(k,j);Kc(l),l=Lc(l);var m=a-f,o=m>0?1:-1,p=l[0]*Fa*o,q=r(m)>180;if(q^(o*f<p&&p<o*a)){var s=l[1]*Fa;s>e&&(e=s)}else if(p=(p+360)%360-180,q^(o*f<p&&p<o*a)){var s=-l[1]*Fa;s<c&&(c=s)}else g<c&&(c=g),g>e&&(e=g);q?a<f?v(b,a)>v(b,d)&&(d=a):v(a,d)>v(b,d)&&(b=a):d>=b?(a<b&&(b=a),a>d&&(d=a)):a>f?v(b,a)>v(b,d)&&(d=a):v(a,d)>v(b,d)&&(b=a)}else n(a,g);i=h,f=a}function p(){m.point=o}function q(){l[0]=b,l[1]=d,m.point=n,i=null}function s(a,b){if(i){var c=a-f;j+=r(c)>180?c+(c>0?360:-360):c}else g=a,h=b;Dc.point(a,b),o(a,b)}function t(){Dc.lineStart()}function u(){s(g,h),Dc.lineEnd(),r(j)>ya&&(b=-(d=180)),l[0]=b,l[1]=d,i=null}function v(a,b){return(b-=a)<0?b+360:b}function w(a,b){return a[0]-b[0]}function x(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var b,c,d,e,f,g,h,i,j,k,l,m={point:n,lineStart:p,lineEnd:q,polygonStart:function(){m.point=s,m.lineStart=t,m.lineEnd=u,j=0,Dc.polygonStart()},polygonEnd:function(){Dc.polygonEnd(),m.point=n,m.lineStart=p,m.lineEnd=q,Cc<0?(b=-(d=180),c=-(e=90)):j>ya?e=90:j<-ya&&(c=-90),l[0]=b,l[1]=d}};return function(f){e=d=-(b=c=1/0),k=[],a.geo.stream(f,m);var g=k.length;if(g){k.sort(w);for(var j,h=1,i=k[0],n=[i];h<g;++h)j=k[h],x(j[0],i)||x(j[1],i)?(v(i[0],j[1])>v(i[0],i[1])&&(i[1]=j[1]),v(j[0],i[1])>v(i[0],i[1])&&(i[0]=j[0])):n.push(i=j);for(var p,j,o=-(1/0),g=n.length-1,h=0,i=n[g];h<=g;i=j,++h)j=n[h],(p=v(i[1],j[0]))>o&&(o=p,b=j[0],d=i[1])}return k=l=null,b===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[b,c],[d,e]]}}(),a.geo.centroid=function(b){Nc=Oc=Pc=Qc=Rc=Sc=Tc=Uc=Vc=Wc=Xc=0,a.geo.stream(b,Yc);var c=Vc,d=Wc,e=Xc,f=c*c+d*d+e*e;return f<za&&(c=Sc,d=Tc,e=Uc,Oc<ya&&(c=Pc,d=Qc,e=Rc),f=c*c+d*d+e*e,f<za)?[NaN,NaN]:[Math.atan2(d,c)*Fa,Ja(e/Math.sqrt(f))*Fa]};var Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc,Xc,Yc={sphere:J,point:Zc,lineStart:_c,lineEnd:ad,polygonStart:function(){Yc.lineStart=bd},polygonEnd:function(){Yc.lineStart=_c}},ld=hd(dd,md,od,[-Aa,-Aa/2]),sd=1e9;a.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=td(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(a.geo.conicEqualArea=function(){return ud(vd)}).raw=vd,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){function j(a){var b=a[0],c=a[1];return e=null,g(b,c),e||(h(b,c),e)||i(b,c),e}var e,g,h,i,b=a.geo.albers(),c=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(a,b){e=[a,b]}};return j.invert=function(a){var e=b.scale(),f=b.translate(),g=(a[0]-f[0])/e,h=(a[1]-f[1])/e;return(h>=.12&&h<.234&&g>=-.425&&g<-.214?c:h>=.166&&h<.234&&g>=-.214&&g<-.115?d:b).invert(a)},j.stream=function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b),f.point(a,b),g.point(a,b)},sphere:function(){e.sphere(),f.sphere(),g.sphere()},lineStart:function(){e.lineStart(),f.lineStart(),g.lineStart()},lineEnd:function(){e.lineEnd(),f.lineEnd(),g.lineEnd()},polygonStart:function(){e.polygonStart(),f.polygonStart(),g.polygonStart()},polygonEnd:function(){e.polygonEnd(),f.polygonEnd(),g.polygonEnd()}}},j.precision=function(a){return arguments.length?(b.precision(a),c.precision(a),d.precision(a),j):b.precision()},j.scale=function(a){return arguments.length?(b.scale(a),c.scale(.35*a),d.scale(a),j.translate(b.translate())):b.scale()},j.translate=function(a){if(!arguments.length)return b.translate();var e=b.scale(),k=+a[0],l=+a[1];return g=b.translate(a).clipExtent([[k-.455*e,l-.238*e],[k+.455*e,l+.238*e]]).stream(f).point,h=c.translate([k-.307*e,l+.201*e]).clipExtent([[k-.425*e+ya,l+.12*e+ya],[k-.214*e-ya,l+.234*e-ya]]).stream(f).point,i=d.translate([k-.205*e,l+.212*e]).clipExtent([[k-.214*e+ya,l+.166*e+ya],[k-.115*e-ya,l+.234*e-ya]]).stream(f).point,j},j.scale(1070)};var wd,xd,Ad,Bd,Cd,Dd,yd={point:J,lineStart:J,lineEnd:J,polygonStart:function(){xd=0,yd.lineStart=zd},polygonEnd:function(){yd.lineStart=yd.lineEnd=yd.point=J,wd+=r(xd/2)}},Ed={point:Fd,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J},Id={point:Jd,lineStart:Kd,lineEnd:Ld,polygonStart:function(){Id.lineStart=Md},polygonEnd:function(){Id.point=Jd,Id.lineStart=Kd,Id.lineEnd=Ld}};a.geo.path=function(){function h(c){return c&&("function"==typeof b&&f.pointRadius(+b.apply(this,arguments)),g&&g.valid||(g=e(f)),a.geo.stream(c,g)),f.result()}function i(){return g=null,h}var c,d,e,f,g,b=4.5;return h.area=function(b){return wd=0,a.geo.stream(b,e(yd)),wd},h.centroid=function(b){return Pc=Qc=Rc=Sc=Tc=Uc=Vc=Wc=Xc=0,a.geo.stream(b,e(Id)),Xc?[Vc/Xc,Wc/Xc]:Uc?[Sc/Uc,Tc/Uc]:Rc?[Pc/Rc,Qc/Rc]:[NaN,NaN]},h.bounds=function(b){return Cd=Dd=-(Ad=Bd=1/0),a.geo.stream(b,e(Ed)),[[Ad,Bd],[Cd,Dd]]},h.projection=function(a){return arguments.length?(e=(c=a)?a.stream||Pd(a):F,i()):c},h.context=function(a){return arguments.length?(f=null==(d=a)?new Gd:new Nd(a),"function"!=typeof b&&f.pointRadius(b),i()):d},h.pointRadius=function(a){return arguments.length?(b="function"==typeof a?a:(f.pointRadius(+a),+a),h):b},h.projection(a.geo.albersUsa()).context(null)},a.geo.transform=function(a){return{stream:function(b){var c=new Qd(b);for(var d in a)c[d]=a[d];return c}}},Qd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},a.geo.projection=Sd,a.geo.projectionMutator=Td,(a.geo.equirectangular=function(){return Sd(Vd)}).raw=Vd.invert=Vd,a.geo.rotation=function(a){function b(b){return b=a(b[0]*Ea,b[1]*Ea),b[0]*=Fa,b[1]*=Fa,b}return a=Xd(a[0]%360*Ea,a[1]*Ea,a.length>2?a[2]*Ea:0),b.invert=function(b){return b=a.invert(b[0]*Ea,b[1]*Ea),b[0]*=Fa,b[1]*=Fa,b},b},Wd.invert=Vd,a.geo.circle=function(){function e(){var b="function"==typeof a?a.apply(this,arguments):a,c=Xd(-b[0]*Ea,-b[1]*Ea,0).invert,e=[];return d(null,null,1,{point:function(a,b){e.push(a=c(a,b)),a[0]*=Fa,a[1]*=Fa}}),{type:"Polygon",coordinates:[e]}}var b,d,a=[0,0],c=6;return e.origin=function(b){return arguments.length?(a=b,e):a},e.angle=function(a){return arguments.length?(d=_d((b=+a)*Ea,c*Ea),e):b},e.precision=function(a){return arguments.length?(d=_d(b*Ea,(c=+a)*Ea),e):c},e.angle(90)},a.geo.distance=function(a,b){var l,c=(b[0]-a[0])*Ea,d=a[1]*Ea,e=b[1]*Ea,f=Math.sin(c),g=Math.cos(c),h=Math.sin(d),i=Math.cos(d),j=Math.sin(e),k=Math.cos(e);return Math.atan2(Math.sqrt((l=k*f)*l+(l=i*j-h*k*g)*l),h*j+i*k*g)},a.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:u()}}function u(){return a.range(Math.ceil(e/l)*l,d,l).map(p).concat(a.range(Math.ceil(i/m)*m,h,m).map(q)).concat(a.range(Math.ceil(c/j)*j,b,j).filter(function(a){return r(a%l)>ya}).map(n)).concat(a.range(Math.ceil(g/k)*k,f,k).filter(function(a){return r(a%m)>ya}).map(o))}var b,c,d,e,f,g,h,i,n,o,p,q,j=10,k=j,l=90,m=360,s=2.5;return t.lines=function(){return u().map(function(a){return{type:"LineString",coordinates:a}})},t.outline=function(){return{type:"Polygon",coordinates:[p(e).concat(q(h).slice(1),p(d).reverse().slice(1),q(i).reverse().slice(1))]}},t.extent=function(a){return arguments.length?t.majorExtent(a).minorExtent(a):t.minorExtent()},t.majorExtent=function(a){return arguments.length?(e=+a[0][0],d=+a[1][0],i=+a[0][1],h=+a[1][1],e>d&&(a=e,e=d,d=a),i>h&&(a=i,i=h,h=a),t.precision(s)):[[e,i],[d,h]]},t.minorExtent=function(a){return arguments.length?(c=+a[0][0],b=+a[1][0],g=+a[0][1],f=+a[1][1],c>b&&(a=c,c=b,b=a),g>f&&(a=g,g=f,f=a),t.precision(s)):[[c,g],[b,f]]},t.step=function(a){return arguments.length?t.majorStep(a).minorStep(a):t.minorStep()},t.majorStep=function(a){return arguments.length?(l=+a[0],m=+a[1],t):[l,m]},t.minorStep=function(a){return arguments.length?(j=+a[0],k=+a[1],t):[j,k]},t.precision=function(a){return arguments.length?(s=+a,n=be(g,f,90),o=ce(c,b,s),p=be(i,h,90),q=ce(e,d,s),t):s},t.majorExtent([[-180,-90+ya],[180,90-ya]]).minorExtent([[-180,-80-ya],[180,80+ya]])},a.geo.greatArc=function(){function f(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var c,e,b=de,d=ee;return f.distance=function(){return a.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))},f.source=function(a){return arguments.length?(b=a,c="function"==typeof a?null:a,f):b},f.target=function(a){return arguments.length?(d=a,e="function"==typeof a?null:a,f):d},f.precision=function(){return arguments.length?f:0},f},a.geo.interpolate=function(a,b){return fe(a[0]*Ea,a[1]*Ea,b[0]*Ea,b[1]*Ea)},a.geo.length=function(b){return ge=0,a.geo.stream(b,he),ge};var ge,he={sphere:J,point:J,lineStart:ie,lineEnd:J,polygonStart:J,polygonEnd:J},ke=je(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(a.geo.azimuthalEqualArea=function(){return Sd(ke)}).raw=ke;var le=je(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},F);(a.geo.azimuthalEquidistant=function(){return Sd(le)}).raw=le,(a.geo.conicConformal=function(){return ud(me)}).raw=me,(a.geo.conicEquidistant=function(){return ud(ne)}).raw=ne;var oe=je(function(a){return 1/a},Math.atan);(a.geo.gnomonic=function(){return Sd(oe)}).raw=oe,pe.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Da]},(a.geo.mercator=function(){return qe(pe)}).raw=pe;var re=je(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Sd(re)}).raw=re;var se=je(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(a.geo.stereographic=function(){return Sd(se)}).raw=se,te.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Da]},(a.geo.transverseMercator=function(){var a=qe(te),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=te,a.geom={},a.geom.hull=function(a){function d(a){if(a.length<3)return[];var f,d=vb(b),e=vb(c),g=a.length,h=[],i=[];for(f=0;f<g;f++)h.push([+d.call(this,a[f],f),+e.call(this,a[f],f),f]);for(h.sort(xe),f=0;f<g;f++)i.push([h[f][0],-h[f][1]]);var j=we(h),k=we(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(f=j.length-1;f>=0;--f)n.push(a[h[j[f]][2]]);for(f=+l;f<k.length-m;++f)n.push(a[h[k[f]][2]]);return n}var b=ue,c=ve;return arguments.length?d(a):(d.x=function(a){return arguments.length?(b=a,d):b},d.y=function(a){return arguments.length?(c=a,d):c},d)},a.geom.polygon=function(a){return Q(a,ye),a};var ye=a.geom.polygon.prototype=[];ye.area=function(){for(var c,a=-1,b=this.length,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e},ye.centroid=function(a){var f,h,b=-1,c=this.length,d=0,e=0,g=this[c-1];for(arguments.length||(a=-1/(6*this.area()));++b<c;)f=g,g=this[b],h=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*h,e+=(f[1]+g[1])*h;return[d*a,e*a]},ye.clip=function(a){for(var b,f,g,i,j,k,c=Be(a),d=-1,e=this.length-Be(this),h=this[e-1];++d<e;){for(b=a.slice(),a.length=0,i=this[d],j=b[(g=b.length-c)-1],f=-1;++f<g;)k=b[f],ze(k,h,i)?(ze(j,h,i)||a.push(Ae(j,k,h,i)),a.push(k)):ze(j,h,i)&&a.push(Ae(j,k,h,i)),j=k;c&&a.push(a[0]),h=i}return a};var Ce,De,Ee,Ge,He,Fe=[],Ie=[];Qe.prototype.prepare=function(){for(var c,a=this.edges,b=a.length;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);return a.sort(Se),a.length},af.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},bf.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ff(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(df(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ef(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ef(this,c),a=c,c=a.U),c.C=!1,d.C=!0,df(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var c,f,g,b=a.U,d=a.L,e=a.R;if(f=d?e?ff(e):d:e,b?b.L===a?b.L=f:b.R=f:this._=f,d&&e?(g=f.C,f.C=a.C,f.L=d,d.U=f,f!==e?(b=f.U,f.U=a.U,a=f.R,b.L=a,f.R=e,e.U=f):(f.U=b,b=f,a=f.R)):(g=a.C,a=f),a&&(a.U=b),!g){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===b.L){if(c=b.R,c.C&&(c.C=!1,b.C=!0,df(this,b),c=b.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,ef(this,c),c=b.R),c.C=b.C,b.C=c.R.C=!1,df(this,b),a=this._;break}}else if(c=b.L,c.C&&(c.C=!1,b.C=!0,ef(this,b),c=b.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,df(this,c),c=b.L),c.C=b.C,b.C=c.L.C=!1,ef(this,b),a=this._;break}c.C=!0,a=b,b=b.U}while(!a.C);a&&(a.C=!1)}}},a.geom.voronoi=function(a){function g(a){var b=new Array(a.length),c=f[0][0],d=f[0][1],e=f[1][0],g=f[1][1];return gf(h(a),f).cells.forEach(function(f,h){var i=f.edges,j=f.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=c&&j.x<=e&&j.y>=d&&j.y<=g?[[c,g],[e,g],[e,d],[c,d]]:[];k.point=a[h]}),b}function h(a){return a.map(function(a,b){return{x:Math.round(d(a,b)/ya)*ya,y:Math.round(e(a,b)/ya)*ya,i:b}})}var b=ue,c=ve,d=b,e=c,f=jf;return a?g(a):(g.links=function(a){return gf(h(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},g.triangles=function(a){var b=[];return gf(h(a)).cells.forEach(function(c,d){for(var i,j,e=c.site,f=c.edges.sort(Se),g=-1,h=f.length,k=f[h-1].edge,l=k.l===e?k.r:k.l;++g<h;)i=k,j=l,k=f[g].edge,l=k.l===e?k.r:k.l,d<j.i&&d<l.i&&kf(e,j,l)<0&&b.push([a[d],a[j.i],a[l.i]])}),b},g.x=function(a){return arguments.length?(d=vb(b=a),g):b},g.y=function(a){return arguments.length?(e=vb(c=a),g):c},g.clipExtent=function(a){return arguments.length?(f=null==a?jf:a,g):f===jf?null:f},g.size=function(a){return arguments.length?g.clipExtent(a&&[[0,0],a]):f===jf?null:f&&f[1]},g)};var jf=[[-1e6,-1e6],[1e6,1e6]];a.geom.delaunay=function(b){return a.geom.voronoi().triangles(b)},a.geom.quadtree=function(a,b,c,d,e){function i(a){function y(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,j=a.y;if(null!=i)if(r(i-c)+r(j-d)<.01)z(a,b,c,d,e,f,g,h);else{var k=a.point;a.x=a.y=a.point=null,z(a,k,i,j,e,f,g,h),z(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else z(a,b,c,d,e,f,g,h)}function z(a,b,c,d,e,f,g,h){var i=.5*(e+g),j=.5*(f+h),k=c>=i,l=d>=j,m=l<<1|k;a.leaf=!1,a=a.nodes[m]||(a.nodes[m]=nf()),k?e=i:g=i,l?f=j:h=j,y(a,b,c,d,e,f,g,h)}var i,l,m,n,o,p,q,s,t,j=vb(f),k=vb(g);if(null!=b)p=b,q=c,s=d,t=e;else if(s=t=-(p=q=1/0),l=[],m=[],o=a.length,h)for(n=0;n<o;++n)i=a[n],i.x<p&&(p=i.x),i.y<q&&(q=i.y),i.x>s&&(s=i.x),i.y>t&&(t=i.y),l.push(i.x),m.push(i.y);else for(n=0;n<o;++n){var u=+j(i=a[n],n),v=+k(i,n);u<p&&(p=u),v<q&&(q=v),u>s&&(s=u),v>t&&(t=v),l.push(u),m.push(v)}var w=s-p,x=t-q;w>x?t=q+w:s=p+x;var A=nf();if(A.add=function(a){y(A,a,+j(a,++n),+k(a,n),p,q,s,t)},A.visit=function(a){of(a,A,p,q,s,t)},A.find=function(a){return pf(A,a[0],a[1],p,q,s,t)},n=-1,null==b){for(;++n<o;)y(A,a[n],l[n],m[n],p,q,s,t);--n}else a.forEach(A.add);return l=m=a=i=null,A}var h,f=ue,g=ve;return(h=arguments.length)?(f=lf,g=mf,3===h&&(e=c,d=b,c=b=0),i(a)):(i.x=function(a){
return arguments.length?(f=a,i):f},i.y=function(a){return arguments.length?(g=a,i):g},i.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),i):null==b?null:[[b,c],[d,e]]},i.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),i):null==b?null:[d-b,e-c]},i)},a.interpolateRgb=qf,a.interpolateObject=rf,a.interpolateNumber=sf,a.interpolateString=tf;var uf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vf=new RegExp(uf.source,"g");a.interpolate=wf,a.interpolators=[function(a,b){var c=typeof b;return("string"===c?ub.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?qf:tf:b instanceof Ua?qf:Array.isArray(b)?xf:"object"===c&&isNaN(b)?rf:sf)(a,b)}],a.interpolateArray=xf;var yf=function(){return F},zf=a.map({linear:yf,poly:Hf,quad:function(){return Ef},cubic:function(){return Ff},sin:function(){return If},exp:function(){return Jf},circle:function(){return Kf},elastic:Lf,back:Mf,bounce:function(){return Nf}}),Af=a.map({in:F,out:Cf,"in-out":Df,"out-in":function(a){return Df(Cf(a))}});a.ease=function(a){var c=a.indexOf("-"),d=c>=0?a.slice(0,c):a,e=c>=0?a.slice(c+1):"in";return d=zf.get(d)||yf,e=Af.get(e)||F,Bf(e(d.apply(null,b.call(arguments,1))))},a.interpolateHcl=Of,a.interpolateHsl=Pf,a.interpolateLab=Qf,a.interpolateRound=Rf,a.transform=function(b){var c=d.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(a){if(null!=a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new Sf(b?b.matrix:Wf)})(b)},Sf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wf={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=Xf,a.layout={},a.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push($f(a[c]));return b}},a.layout.chord=function(){function k(){var o,p,q,r,s,b={},k=[],m=a.range(f),n=[];for(c=[],d=[],o=0,r=-1;++r<f;){for(p=0,s=-1;++s<f;)p+=e[r][s];k.push(p),n.push(a.range(f)),o+=p}for(h&&m.sort(function(a,b){return h(k[a],k[b])}),i&&n.forEach(function(a,b){a.sort(function(a,c){return i(e[b][a],e[b][c])})}),o=(Ba-g*f)/o,p=0,r=-1;++r<f;){for(q=p,s=-1;++s<f;){var t=m[r],u=n[t][s],v=e[t][u],w=p,x=p+=v*o;b[t+"-"+u]={index:t,subindex:u,startAngle:w,endAngle:x,value:v}}d[t]={index:t,startAngle:q,endAngle:p,value:(p-q)/o},p+=g}for(r=-1;++r<f;)for(s=r-1;++s<f;){var y=b[r+"-"+s],z=b[s+"-"+r];(y.value||z.value)&&c.push(y.value<z.value?{source:z,target:y}:{source:y,target:z})}j&&l()}function l(){c.sort(function(a,b){return j((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,h,i,j,b={},g=0;return b.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,b):e},b.padding=function(a){return arguments.length?(g=a,c=d=null,b):g},b.sortGroups=function(a){return arguments.length?(h=a,c=d=null,b):h},b.sortSubgroups=function(a){return arguments.length?(i=a,c=null,b):i},b.sortChords=function(a){return arguments.length?(j=a,c&&l(),b):j},b.chords=function(){return c||k(),c},b.groups=function(){return d||k(),d},b},a.layout.force=function(){function s(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/m<i){if(i<k){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<k){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function t(c){c.px=a.event.x,c.py=a.event.y,b.resume()}var e,f,p,q,r,b={},c=a.dispatch("start","tick","end"),d=[1,1],g=.9,h=gg,i=hg,j=-30,k=ig,l=.1,m=.64,n=[],o=[];return b.tick=function(){if((f*=.99)<.005)return c.end({type:"end",alpha:f=0}),!0;var h,i,k,m,t,u,v,w,x,b=n.length,e=o.length;for(i=0;i<e;++i)k=o[i],m=k.source,t=k.target,w=t.x-m.x,x=t.y-m.y,(u=w*w+x*x)&&(u=f*q[i]*((u=Math.sqrt(u))-p[i])/u,w*=u,x*=u,t.x-=w*(v=m.weight/(t.weight+m.weight)),t.y-=x*v,m.x+=w*(v=1-v),m.y+=x*v);if((v=f*l)&&(w=d[0]/2,x=d[1]/2,i=-1,v))for(;++i<b;)k=n[i],k.x+=(w-k.x)*v,k.y+=(x-k.y)*v;if(j)for(fg(h=a.geom.quadtree(n),f,r),i=-1;++i<b;)(k=n[i]).fixed||h.visit(s(k));for(i=-1;++i<b;)k=n[i],k.fixed?(k.x=k.px,k.y=k.py):(k.x-=(k.px-(k.px=k.x))*g,k.y-=(k.py-(k.py=k.y))*g);c.tick({type:"tick",alpha:f})},b.nodes=function(a){return arguments.length?(n=a,b):n},b.links=function(a){return arguments.length?(o=a,b):o},b.size=function(a){return arguments.length?(d=a,b):d},b.linkDistance=function(a){return arguments.length?(h="function"==typeof a?a:+a,b):h},b.distance=b.linkDistance,b.linkStrength=function(a){return arguments.length?(i="function"==typeof a?a:+a,b):i},b.friction=function(a){return arguments.length?(g=+a,b):g},b.charge=function(a){return arguments.length?(j="function"==typeof a?a:+a,b):j},b.chargeDistance=function(a){return arguments.length?(k=a*a,b):Math.sqrt(k)},b.gravity=function(a){return arguments.length?(l=+a,b):l},b.theta=function(a){return arguments.length?(m=a*a,b):Math.sqrt(m)},b.alpha=function(d){return arguments.length?(d=+d,f?f=d>0?d:0:d>0&&(c.start({type:"start",alpha:f=d}),a.timer(b.tick)),b):f},b.start=function(){function m(b,d){if(!k){for(k=new Array(c),h=0;h<c;++h)k[h]=[];for(h=0;h<e;++h){var f=o[h];k[f.source.index].push(f.target),k[f.target.index].push(f.source)}}for(var j,g=k[a],h=-1,i=g.length;++h<i;)if(!isNaN(j=g[h][b]))return j;return Math.random()*d}var a,k,l,c=n.length,e=o.length,f=d[0],g=d[1];for(a=0;a<c;++a)(l=n[a]).index=a,l.weight=0;for(a=0;a<e;++a)l=o[a],"number"==typeof l.source&&(l.source=n[l.source]),"number"==typeof l.target&&(l.target=n[l.target]),++l.source.weight,++l.target.weight;for(a=0;a<c;++a)l=n[a],isNaN(l.x)&&(l.x=m("x",f)),isNaN(l.y)&&(l.y=m("y",g)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);if(p=[],"function"==typeof h)for(a=0;a<e;++a)p[a]=+h.call(this,o[a],a);else for(a=0;a<e;++a)p[a]=h;if(q=[],"function"==typeof i)for(a=0;a<e;++a)q[a]=+i.call(this,o[a],a);else for(a=0;a<e;++a)q[a]=i;if(r=[],"function"==typeof j)for(a=0;a<c;++a)r[a]=+j.call(this,n[a],a);else for(a=0;a<c;++a)r[a]=j;return b.resume()},b.resume=function(){return b.alpha(.1)},b.stop=function(){return b.alpha(0)},b.drag=function(){return e||(e=a.behavior.drag().origin(F).on("dragstart.force",bg).on("drag.force",t).on("dragend.force",cg)),arguments.length?void this.on("mouseover.force",dg).on("mouseout.force",eg).call(e):e},a.rebind(b,c,"on")};var gg=20,hg=1,ig=1/0;a.layout.hierarchy=function(){function d(e){var h,f=[e],g=[];for(e.depth=0;null!=(h=f.pop());)if(g.push(h),(j=b.call(d,h,h.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)f.push(k=j[i]),k.parent=h,k.depth=h.depth+1;c&&(h.value=0),h.children=j}else c&&(h.value=+c.call(d,h,h.depth)||0),delete h.children;return lg(e,function(b){var d,e;a&&(d=b.children)&&d.sort(a),c&&(e=b.parent)&&(e.value+=b.value)}),g}var a=og,b=mg,c=ng;return d.sort=function(b){return arguments.length?(a=b,d):a},d.children=function(a){return arguments.length?(b=a,d):b},d.value=function(a){return arguments.length?(c=a,d):c},d.revalue=function(a){return c&&(kg(a,function(a){a.children&&(a.value=0)}),lg(a,function(a){var b;a.children||(a.value=+c.call(d,a,a.depth)||0),(b=a.parent)&&(b.value+=a.value)})),a},d},a.layout.partition=function(){function d(a,b,c,e){var f=a.children;if(a.x=b,a.y=a.depth*e,a.dx=c,a.dy=e,f&&(h=f.length)){var h,i,j,g=-1;for(c=a.value?c/a.value:0;++g<h;)d(i=f[g],b,j=i.value*c,e),b+=j}}function e(a){var b=a.children,c=0;if(b&&(f=b.length))for(var f,d=-1;++d<f;)c=Math.max(c,e(b[d]));return 1+c}function f(a,f){var g=b.call(this,a,f);return d(g[0],0,c[0],c[1]/e(g[0])),g}var b=a.layout.hierarchy(),c=[1,1];return f.size=function(a){return arguments.length?(c=a,f):c},jg(f,b)},a.layout.pie=function(){function g(h){var r,i=h.length,j=h.map(function(a,c){return+b.call(g,a,c)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=(l-i*n)/a.sum(j),p=a.range(i),q=[];return null!=c&&p.sort(c===qg?function(a,b){return j[b]-j[a]}:function(a,b){return c(h[a],h[b])}),p.forEach(function(a){q[a]={data:h[a],value:r=j[a],startAngle:k,endAngle:k+=r*o+n,padAngle:m}}),q}var b=Number,c=qg,d=0,e=Ba,f=0;return g.value=function(a){return arguments.length?(b=a,g):b},g.sort=function(a){return arguments.length?(c=a,g):c},g.startAngle=function(a){return arguments.length?(d=a,g):d},g.endAngle=function(a){return arguments.length?(e=a,g):e},g.padAngle=function(a){return arguments.length?(f=a,g):f},g};var qg={};a.layout.stack=function(){function h(i,j){if(!(p=i.length))return i;var k=i.map(function(a,c){return b.call(h,a,c)}),l=k.map(function(a){return a.map(function(a,b){return[f.call(h,a,b),g.call(h,a,b)]})}),m=c.call(h,l,j);k=a.permute(k,m),l=a.permute(l,m);var p,q,r,s,n=d.call(h,l,j),o=k[0].length;for(r=0;r<o;++r)for(e.call(h,k[0][r],s=n[r],l[0][r][1]),q=1;q<p;++q)e.call(h,k[q][r],s+=l[q-1][r][1],l[q][r][1]);return i}var b=F,c=wg,d=xg,e=tg,f=rg,g=sg;return h.values=function(a){return arguments.length?(b=a,h):b},h.order=function(a){return arguments.length?(c="function"==typeof a?a:ug.get(a)||wg,h):c},h.offset=function(a){return arguments.length?(d="function"==typeof a?a:vg.get(a)||xg,h):d},h.x=function(a){return arguments.length?(f=a,h):f},h.y=function(a){return arguments.length?(g=a,h):g},h.out=function(a){return arguments.length?(e=a,h):e},h};var ug=a.map({"inside-out":function(b){var d,e,c=b.length,f=b.map(yg),g=b.map(zg),h=a.range(c).sort(function(a,b){return f[a]-f[b]}),i=0,j=0,k=[],l=[];for(d=0;d<c;++d)e=h[d],i<j?(i+=g[e],k.push(e)):(j+=g[e],l.push(e));return l.reverse().concat(k)},reverse:function(b){return a.range(b.length).reverse()},default:wg}),vg=a.map({silhouette:function(a){var f,g,h,b=a.length,c=a[0].length,d=[],e=0,i=[];for(g=0;g<c;++g){for(f=0,h=0;f<b;f++)h+=a[f][g][1];h>e&&(e=h),d.push(h)}for(g=0;g<c;++g)i[g]=(e-d[g])/2;return i},wiggle:function(a){var e,f,g,h,i,j,k,l,m,b=a.length,c=a[0],d=c.length,n=[];for(n[0]=l=m=0,f=1;f<d;++f){for(e=0,h=0;e<b;++e)h+=a[e][f][1];for(e=0,i=0,k=c[f][0]-c[f-1][0];e<b;++e){for(g=0,j=(a[e][f][1]-a[e][f-1][1])/(2*k);g<e;++g)j+=(a[g][f][1]-a[g][f-1][1])/k;i+=j*a[e][f][1]}n[f]=l-=h?i/h*k:0,l<m&&(m=l)}for(f=0;f<d;++f)n[f]-=m;return n},expand:function(a){var e,f,g,b=a.length,c=a[0].length,d=1/b,h=[];for(f=0;f<c;++f){for(e=0,g=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)h[f]=0;return h},zero:xg});a.layout.histogram=function(){function f(f,g){for(var l,p,h=[],i=f.map(c,this),j=d.call(this,i,g),k=e.call(this,j,i,g),g=-1,m=i.length,n=k.length-1,o=b?1:1/m;++g<n;)l=h[g]=[],l.dx=k[g+1]-(l.x=k[g]),l.y=0;if(n>0)for(g=-1;++g<m;)p=i[g],p>=j[0]&&p<=j[1]&&(l=h[a.bisect(k,p,1,n)-1],l.y+=o,l.push(f[g]));return h}var b=!0,c=Number,d=Dg,e=Bg;return f.value=function(a){return arguments.length?(c=a,f):c},f.range=function(a){return arguments.length?(d=vb(a),f):d},f.bins=function(a){return arguments.length?(e="number"==typeof a?function(b){return Cg(b,a)}:vb(a),f):e},f.frequency=function(a){return arguments.length?(b=!!a,f):b},f},a.layout.pack=function(){function f(a,f){var g=b.call(this,a,f),h=g[0],i=d[0],j=d[1],k=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(h.x=h.y=0,lg(h,function(a){a.r=+k(a.value)}),lg(h,Ig),c){var l=c*(e?1:Math.max(2*h.r/i,2*h.r/j))/2;lg(h,function(a){a.r+=l}),lg(h,Ig),lg(h,function(a){a.r-=l})}return Lg(h,i/2,j/2,e?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var e,b=a.layout.hierarchy().sort(Eg),c=0,d=[1,1];return f.size=function(a){return arguments.length?(d=a,f):d},f.radius=function(a){return arguments.length?(e=null==a||"function"==typeof a?a:+a,f):e},f.padding=function(a){return arguments.length?(c=+a,f):c},jg(f,b)},a.layout.tree=function(){function f(a,f){var j=b.call(this,a,f),l=j[0],m=g(l);if(lg(m,h),m.parent.m=-m.z,kg(m,i),e)kg(l,k);else{var n=l,o=l,p=l;kg(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=c(n,o)/2-n.x,r=d[0]/(o.x+c(o,n)/2+q),s=d[1]/(p.depth||1);kg(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return j}function g(a){for(var d,b={A:null,children:[a]},c=[b];null!=(d=c.pop());)for(var f,e=d.children,g=0,h=e.length;g<h;++g)c.push((e[g]=f={_:e[g],parent:d,children:(f=e[g].children)&&f.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=f);return b.children[0]}function h(a){var b=a.children,d=a.parent.children,e=a.i?d[a.i-1]:null;if(b.length){Rg(a);var f=(b[0].z+b[b.length-1].z)/2;e?(a.z=e.z+c(a._,e._),a.m=a.z-f):a.z=f}else e&&(a.z=e.z+c(a._,e._));a.parent.A=j(a,e,a.parent.A||d[0])}function i(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function j(a,b,d){if(b){for(var m,e=a,f=a,g=b,h=e.parent.children[0],i=e.m,j=f.m,k=g.m,l=h.m;g=Pg(g),e=Og(e),g&&e;)h=Og(h),f=Pg(f),f.a=a,m=g.z+k-e.z-i+c(g._,e._),m>0&&(Qg(Sg(g,a,d),a,m),i+=m,j+=m),k+=g.m,i+=e.m,l+=h.m,j+=f.m;g&&!Pg(f)&&(f.t=g,f.m+=k-j),e&&!Og(h)&&(h.t=e,h.m+=i-l,d=a)}return d}function k(a){a.x*=d[0],a.y=a.depth*d[1]}var b=a.layout.hierarchy().sort(null).value(null),c=Ng,d=[1,1],e=null;return f.separation=function(a){return arguments.length?(c=a,f):c},f.size=function(a){return arguments.length?(e=null==(d=a)?k:null,f):e?null:d},f.nodeSize=function(a){return arguments.length?(e=null==(d=a)?null:k,f):e?d:null},jg(f,b)},a.layout.cluster=function(){function f(a,f){var i,g=b.call(this,a,f),h=g[0],j=0;lg(h,function(a){var b=a.children;b&&b.length?(a.x=Ug(b),a.y=Tg(b)):(a.x=i?j+=c(a,i):0,a.y=0,i=a)});var k=Vg(h),l=Wg(h),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return lg(h,e?function(a){a.x=(a.x-h.x)*d[0],a.y=(h.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=a.layout.hierarchy().sort(null).value(null),c=Ng,d=[1,1],e=!1;return f.separation=function(a){return arguments.length?(c=a,f):c},f.size=function(a){return arguments.length?(e=null==(d=a),f):e?null:d},f.nodeSize=function(a){return arguments.length?(e=null!=(d=a),f):e?d:null},jg(f,b)},a.layout.treemap=function(){function k(a,b){for(var e,f,c=-1,d=a.length;++c<d;)f=(e=a[c]).value*(b<0?0:b),e.area=isNaN(f)||f<=0?0:f}function l(a){var b=a.children;if(b&&b.length){var g,j,p,c=f(a),d=[],e=b.slice(),h=1/0,m="slice"===i?c.dx:"dice"===i?c.dy:"slice-dice"===i?1&a.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(k(e,c.dx*c.dy/a.value),d.area=0;(p=e.length)>0;)d.push(g=e[p-1]),d.area+=g.area,"squarify"!==i||(j=n(d,m))<=h?(e.pop(),h=j):(d.area-=d.pop().area,o(d,m,c,!1),m=Math.min(c.dx,c.dy),d.length=d.area=0,h=1/0);d.length&&(o(d,m,c,!0),d.length=d.area=0),b.forEach(l)}}function m(a){var b=a.children;if(b&&b.length){var e,c=f(a),d=b.slice(),g=[];for(k(d,c.dx*c.dy/a.value),g.area=0;e=d.pop();)g.push(e),g.area+=e.area,null!=e.z&&(o(g,e.z?c.dx:c.dy,c,!d.length),g.length=g.area=0);b.forEach(m)}}function n(a,b){for(var d,c=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(d=a[g].area)&&(d<f&&(f=d),d>e&&(e=d));return c*=c,b*=b,c?Math.max(b*e*j/c,c/(b*f*j)):1/0}function o(a,b,d,e){var k,f=-1,g=a.length,h=d.x,i=d.y,j=b?c(a.area/b):0;if(b==d.dx){for((e||j>d.dy)&&(j=d.dy);++f<g;)k=a[f],k.x=h,k.y=i,k.dy=j,h+=k.dx=Math.min(d.x+d.dx-h,j?c(k.area/j):0);k.z=!0,k.dx+=d.x+d.dx-h,d.y+=j,d.dy-=j}else{for((e||j>d.dx)&&(j=d.dx);++f<g;)k=a[f],k.x=h,k.y=i,k.dx=j,i+=k.dy=Math.min(d.y+d.dy-i,j?c(k.area/j):0);k.z=!1,k.dy+=d.y+d.dy-i,d.x+=j,d.dx-=j}}function p(a){var c=h||b(a),e=c[0];return e.x=0,e.y=0,e.dx=d[0],e.dy=d[1],h&&b.revalue(e),k([e],e.dx*e.dy/e.value),(h?m:l)(e),g&&(h=c),c}var h,b=a.layout.hierarchy(),c=Math.round,d=[1,1],e=null,f=Xg,g=!1,i="squarify",j=.5*(1+Math.sqrt(5));return p.size=function(a){return arguments.length?(d=a,p):d},p.padding=function(a){function b(b){var c=a.call(p,b,b.depth);return null==c?Xg(b):Yg(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Yg(b,a)}if(!arguments.length)return e;var d;return f=null==(e=a)?Xg:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,p},p.round=function(a){return arguments.length?(c=a?Math.round:Number,p):c!=Number},p.sticky=function(a){return arguments.length?(g=a,h=null,p):g},p.ratio=function(a){return arguments.length?(j=a,p):j},p.mode=function(a){return arguments.length?(i=a+"",p):i},jg(p,b)},a.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var b=a.random.normal.apply(a,arguments);return function(){return Math.exp(b())}},bates:function(b){var c=a.random.irwinHall(b);return function(){return c()/b}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},a.scale={};var ch={floor:F,ceil:F};a.scale.linear=function(){return eh([0,1],[0,1],wf,!1)};var kh={s:1,g:1,p:1,r:1,e:1};a.scale.log=function(){return nh(a.scale.linear().domain([0,1]),10,!0,[1,10])};var oh=a.format(".0e"),ph={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};a.scale.pow=function(){return qh(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return sh([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(th)},a.scale.category20=function(){return a.scale.ordinal().range(uh)},a.scale.category20b=function(){return a.scale.ordinal().range(vh)},a.scale.category20c=function(){return a.scale.ordinal().range(wh)};var th=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mb),uh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mb),vh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mb),wh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mb);a.scale.quantile=function(){return xh([],[])},a.scale.quantize=function(){return yh(0,1,[0,1])},a.scale.threshold=function(){return zh([.5],[0,1])},a.scale.identity=function(){return Ah([0,1])},a.svg={},a.svg.arc=function(){function h(){var h=Math.max(0,+a.apply(this,arguments)),j=Math.max(0,+b.apply(this,arguments)),k=e.apply(this,arguments)-Da,l=f.apply(this,arguments)-Da,m=Math.abs(l-k),n=k>l?0:1;if(j<h&&(o=j,j=h,h=o),m>=Ca)return i(j,n)+(h?i(h,1-n):"")+"Z";var o,p,q,r,u,v,w,x,y,z,A,B,s=0,t=0,C=[];if((r=(+g.apply(this,arguments)||0)/2)&&(q=d===Ch?Math.sqrt(h*h+j*j):+d.apply(this,arguments),n||(t*=-1),j&&(t=Ja(q/j*Math.sin(r))),h&&(s=Ja(q/h*Math.sin(r)))),j){u=j*Math.cos(k+t),v=j*Math.sin(k+t),w=j*Math.cos(l-t),x=j*Math.sin(l-t);var D=Math.abs(l-k-2*t)<=Aa?0:1;if(t&&Ih(u,v,w,x)===n^D){var E=(k+l)/2;u=j*Math.cos(E),v=j*Math.sin(E),w=x=null}}else u=v=0;if(h){y=h*Math.cos(l-s),z=h*Math.sin(l-s),A=h*Math.cos(k+s),B=h*Math.sin(k+s);var F=Math.abs(k-l+2*s)<=Aa?0:1;if(s&&Ih(y,z,A,B)===1-n^F){var G=(k+l)/2;y=h*Math.cos(G),z=h*Math.sin(G),A=B=null}}else y=z=0;if((o=Math.min(Math.abs(j-h)/2,+c.apply(this,arguments)))>.001){p=h<j^n?0:1;var H=null==A?[y,z]:null==w?[u,v]:Ae([u,v],[A,B],[w,x],[y,z]),I=u-H[0],J=v-H[1],K=w-H[0],L=x-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=w){var O=Math.min(o,(j-N)/(M+1)),P=Jh(null==A?[y,z]:[A,B],[u,v],j,O,n),Q=Jh([w,x],[y,z],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^Ih(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",u,",",v);if(null!=A){var R=Math.min(o,(h-N)/(M-1)),S=Jh([u,v],[A,B],h,-R,n),T=Jh([y,z],null==w?[u,v]:[w,x],h,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",h,",",h," 0 ",n^Ih(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",y,",",z)}else C.push("M",u,",",v),null!=w&&C.push("A",j,",",j," 0 ",D,",",n," ",w,",",x),C.push("L",y,",",z),null!=A&&C.push("A",h,",",h," 0 ",F,",",1-n," ",A,",",B);return C.push("Z"),C.join("")}function i(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var a=Dh,b=Eh,c=Bh,d=Ch,e=Fh,f=Gh,g=Hh;return h.innerRadius=function(b){return arguments.length?(a=vb(b),h):a},h.outerRadius=function(a){return arguments.length?(b=vb(a),h):b},h.cornerRadius=function(a){return arguments.length?(c=vb(a),h):c},h.padRadius=function(a){return arguments.length?(d=a==Ch?Ch:vb(a),h):d},h.startAngle=function(a){return arguments.length?(e=vb(a),h):e},h.endAngle=function(a){return arguments.length?(f=vb(a),h):f},h.padAngle=function(a){return arguments.length?(g=vb(a),h):g},h.centroid=function(){var c=(+a.apply(this,arguments)+ +b.apply(this,arguments))/2,d=(+e.apply(this,arguments)+ +f.apply(this,arguments))/2-Da;return[Math.cos(d)*c,Math.sin(d)*c]},h};var Ch="auto";a.svg.line=function(){return Kh(F)};var Lh=a.map({linear:Mh,"linear-closed":Nh,step:Oh,"step-before":Ph,"step-after":Qh,basis:Wh,"basis-open":Xh,"basis-closed":Yh,bundle:Zh,cardinal:Th,"cardinal-open":Rh,"cardinal-closed":Sh,monotone:gi});Lh.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var _h=[0,2/3,1/3,0],ai=[0,1/3,2/3,0],bi=[0,1/6,2/3,1/6];a.svg.line.radial=function(){var a=Kh(hi);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},Ph.reverse=Qh,Qh.reverse=Ph,a.svg.area=function(){return ii(F)},a.svg.area.radial=function(){var a=ii(hi);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},a.svg.chord=function(){function f(c,d){var e=g(this,a,c,d),f=g(this,b,c,d);return"M"+e.p0+i(e.r,e.p1,e.a1-e.a0)+(h(e,f)?j(e.r,e.p1,e.r,e.p0):j(e.r,e.p1,f.r,f.p0)+i(f.r,f.p1,f.a1-f.a0)+j(f.r,f.p1,e.r,e.p0))+"Z"}function g(a,b,f,g){var h=b.call(a,f,g),i=c.call(a,h,g),j=d.call(a,h,g)-Da,k=e.call(a,h,g)-Da;return{r:i,a0:j,a1:k,p0:[i*Math.cos(j),i*Math.sin(j)],p1:[i*Math.cos(k),i*Math.sin(k)]}}function h(a,b){return a.a0==b.a0&&a.a1==b.a1}function i(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Aa)+",1 "+b}function j(a,b,c,d){return"Q 0,0 "+d}var a=de,b=ee,c=ji,d=Fh,e=Gh;return f.radius=function(a){return arguments.length?(c=vb(a),f):c},f.source=function(b){return arguments.length?(a=vb(b),f):a},f.target=function(a){return arguments.length?(b=vb(a),f):b},f.startAngle=function(a){return arguments.length?(d=vb(a),f):d},f.endAngle=function(a){return arguments.length?(e=vb(a),f):e},f},a.svg.diagonal=function(){function d(d,e){var f=a.call(this,d,e),g=b.call(this,d,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(c),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var a=de,b=ee,c=ki;return d.source=function(b){return arguments.length?(a=vb(b),d):a},d.target=function(a){return arguments.length?(b=vb(a),d):b},d.projection=function(a){return arguments.length?(c=a,d):c},d},a.svg.diagonal.radial=function(){var b=a.svg.diagonal(),c=ki,d=b.projection;return b.projection=function(a){return arguments.length?d(li(c=a)):c},b},a.svg.symbol=function(){function c(c,d){return(pi.get(a.call(this,c,d))||oi)(b.call(this,c,d))}var a=ni,b=mi;return c.type=function(b){return arguments.length?(a=vb(b),c):a},c.size=function(a){return arguments.length?(b=vb(a),c):b},c};var pi=a.map({circle:oi,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*ri)),c=b*ri;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/qi),c=b*qi/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/qi),c=b*qi/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});a.svg.symbolTypes=pi.keys();var qi=Math.sqrt(3),ri=Math.tan(30*Ea);V.transition=function(a){for(var e,f,b=xi||++wi,c=Bi(a),d=[],g=yi||{time:Date.now(),ease:Gf,delay:0,duration:250},h=-1,i=this.length;++h<i;){d.push(e=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(f=j[k])&&Ci(f,k,c,b,g),e.push(f)}return ui(d,c,b)},V.interrupt=function(a){return this.each(null==a?si:ti(Bi(a)))};var xi,yi,si=ti(Bi()),vi=[],wi=0;vi.call=V.call,vi.empty=V.empty,vi.node=V.node,vi.size=V.size,a.transition=function(b,c){return b&&b.transition?xi?b.transition(c):b:a.selection().transition(b)},a.transition.prototype=vi,vi.select=function(a){var e,f,g,b=this.id,c=this.namespace,d=[];a=W(a);for(var h=-1,i=this.length;++h<i;){d.push(e=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(g=j[k])&&(f=a.call(g,g.__data__,k,h))?("__data__"in g&&(f.__data__=g.__data__),Ci(f,k,c,b,g[c][b]),e.push(f)):e.push(null)}return ui(d,c,b)},vi.selectAll=function(a){var e,f,g,h,i,b=this.id,c=this.namespace,d=[];a=X(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(g=l[m]){i=g[c][b],f=a.call(g,g.__data__,m,j),d.push(e=[]);for(var o=-1,p=f.length;++o<p;)(h=f[o])&&Ci(h,o,c,b,i),e.push(h)}return ui(d,c,b)},vi.filter=function(a){var c,d,e,b=[];"function"!=typeof a&&(a=ia(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);for(var d=this[f],h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h,f)&&c.push(e)}return ui(b,this.namespace,this.id)},vi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):ka(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},vi.attr=function(b,c){function f(){this.removeAttribute(e)}function g(){this.removeAttributeNS(e.space,e.local)}function h(a){return null==a?f:(a+="",function(){var c,b=this.getAttribute(e);return b!==a&&(c=d(b,a),function(a){this.setAttribute(e,c(a))})})}function i(a){return null==a?g:(a+="",function(){var c,b=this.getAttributeNS(e.space,e.local);return b!==a&&(c=d(b,a),function(a){this.setAttributeNS(e.space,e.local,c(a))})})}if(arguments.length<2){for(c in b)this.attr(c,b[c]);return this}var d="transform"==b?Xf:wf,e=a.ns.qualify(b);return zi(this,"attr."+b,c,e.local?i:h)},vi.attrTween=function(b,c){function e(a,b){var e=c.call(this,a,b,this.getAttribute(d));return e&&function(a){this.setAttribute(d,e(a))}}function f(a,b){var e=c.call(this,a,b,this.getAttributeNS(d.space,d.local));return e&&function(a){this.setAttributeNS(d.space,d.local,e(a))}}var d=a.ns.qualify(b);return this.tween("attr."+b,d.local?f:e)},vi.style=function(a,b,c){function e(){this.style.removeProperty(a)}function g(b){return null==b?e:(b+="",function(){var e,d=f(this).getComputedStyle(this,null).getPropertyValue(a);return d!==b&&(e=wf(d,b),function(b){this.style.setProperty(a,e(b),c)})})}var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return zi(this,"style."+a,b,g)},vi.styleTween=function(a,b,c){function d(d,e){var g=b.call(this,d,e,f(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},vi.text=function(a){return zi(this,"text",a,Ai)},vi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},vi.ease=function(b){var c=this.id,d=this.namespace;return arguments.length<1?this.node()[d][c].ease:("function"!=typeof b&&(b=a.ease.apply(a,arguments)),ka(this,function(a){a[d][c].ease=b}))},vi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:ka(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},vi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:ka(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},vi.each=function(b,c){var d=this.id,e=this.namespace;if(arguments.length<2){var f=yi,g=xi;try{xi=d,ka(this,function(a,c,f){yi=a[e][d],b.call(a,a.__data__,c,f)})}finally{yi=f,xi=g}}else ka(this,function(f){var g=f[e][d];(g.event||(g.event=a.dispatch("start","end","interrupt"))).on(b,c)});return this},vi.transition=function(){for(var e,f,g,h,a=this.id,b=++wi,c=this.namespace,d=[],i=0,j=this.length;i<j;i++){d.push(e=[]);for(var f=this[i],k=0,l=f.length;k<l;k++)(g=f[k])&&(h=g[c][a],Ci(g,k,c,b,{time:h.time,ease:h.ease,delay:h.delay+h.duration,duration:h.duration})),e.push(g)}return ui(d,c,b)},a.svg.axis=function(){function j(j){j.each(function(){var t,j=a.select(this),k=this.__chart__||b,l=this.__chart__=b.copy(),m=null==h?l.ticks?l.ticks.apply(l,g):l.domain():h,n=null==i?l.tickFormat?l.tickFormat.apply(l,g):F:i,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",ya),q=a.transition(o.exit()).style("opacity",ya).remove(),r=a.transition(o.order()).style("opacity",1),s=Math.max(d,0)+f,u=$g(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),a.transition(v));p.append("line"),p.append("text");var D,E,G,H,x=p.select("line"),y=r.select("line"),z=o.select("text").text(n),A=p.select("text"),B=r.select("text"),C="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c?(t=Fi,D="x",G="y",E="x2",H="y2",z.attr("dy",C<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+C*e+"V0H"+u[1]+"V"+C*e)):(t=Gi,D="y",G="x",E="y2",H="x2",z.attr("dy",".32em").style("text-anchor",C<0?"end":"start"),w.attr("d","M"+C*e+","+u[0]+"H0V"+u[1]+"H"+C*e)),x.attr(H,C*d),A.attr(G,C*s),y.attr(E,0).attr(H,C*d),B.attr(D,0).attr(G,C*s),l.rangeBand){var I=l,J=I.rangeBand()/2;k=l=function(a){return I(a)+J}}else k.rangeBand?k=l:q.call(t,l,k);p.call(t,k,l),r.call(t,l,l)})}var i,b=a.scale.linear(),c=Di,d=6,e=6,f=3,g=[10],h=null;return j.scale=function(a){return arguments.length?(b=a,j):b},j.orient=function(a){return arguments.length?(c=a in Ei?a+"":Di,j):c},j.ticks=function(){return arguments.length?(g=arguments,j):g},j.tickValues=function(a){return arguments.length?(h=a,j):h},j.tickFormat=function(a){return arguments.length?(i=a,j):i},j.tickSize=function(a){var b=arguments.length;return b?(d=+a,e=+arguments[b-1],j):d},j.innerTickSize=function(a){return arguments.length?(d=+a,j):d},j.outerTickSize=function(a){return arguments.length?(e=+a,j):e},j.tickPadding=function(a){return arguments.length?(f=+a,j):f},j.tickSubdivide=function(){return arguments.length&&j},j};var Di="bottom",Ei={top:1,right:1,bottom:1,left:1};a.svg.brush=function(){function m(b){b.each(function(){var b=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",q).on("touchstart.brush",q),e=b.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var f=b.selectAll(".resize").data(l,F);f.exit().remove(),f.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Hi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",m.empty()?"none":null);var i,g=a.transition(b),h=a.transition(e);c&&(i=$g(c),h.attr("x",i[0]).attr("width",i[1]-i[0]),o(g)),d&&(i=$g(d),h.attr("y",i[0]).attr("height",i[1]-i[0]),p(g)),n(g)})}function n(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+e[+/e$/.test(a)]+","+g[+/^s/.test(a)]+")"})}function o(a){a.select(".extent").attr("x",e[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",e[1]-e[0])}function p(a){a.select(".extent").attr("y",g[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",g[1]-g[0])}function q(){function E(){32==a.event.keyCode&&(w||(y=null,z[0]-=e[1],z[1]-=g[1],w=2),M())}function F(){
32==a.event.keyCode&&2==w&&(z[0]+=e[1],z[1]+=g[1],w=0,M())}function G(){var b=a.mouse(l),f=!1;A&&(b[0]+=A[0],b[1]+=A[1]),w||(a.event.altKey?(y||(y=[(e[0]+e[1])/2,(g[0]+g[1])/2]),z[0]=e[+(b[0]<y[0])],z[1]=g[+(b[1]<y[1])]):y=null),u&&H(b,c,0)&&(o(s),f=!0),v&&H(b,d,1)&&(p(s),f=!0),f&&(n(s),r({type:"brush",mode:w?"move":"resize"}))}function H(a,b,c){var p,q,d=$g(b),f=d[0],l=d[1],m=z[c],n=c?g:e,o=n[1]-n[0];if(w&&(f-=m,l-=o+m),p=(c?k:j)?Math.max(f,Math.min(l,a[c])):a[c],w?q=(p+=m)+o:(y&&(m=Math.max(f,Math.min(l,2*y[c]-p))),m<p?(q=p,p=m):q=m),n[0]!=p||n[1]!=q)return c?i=null:h=null,n[0]=p,n[1]=q,!0}function I(){G(),s.style("pointer-events","all").selectAll(".resize").style("display",m.empty()?"none":null),a.select("body").style("cursor",null),B.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),r({type:"brushend"})}var y,A,l=this,q=a.select(a.event.target),r=b.of(l,arguments),s=a.select(l),t=q.datum(),u=!/^(n|s)$/.test(t)&&c,v=!/^(e|w)$/.test(t)&&d,w=q.classed("extent"),x=ua(l),z=a.mouse(l),B=a.select(f(l)).on("keydown.brush",E).on("keyup.brush",F);if(a.event.changedTouches?B.on("touchmove.brush",G).on("touchend.brush",I):B.on("mousemove.brush",G).on("mouseup.brush",I),s.interrupt().selectAll("*").interrupt(),w)z[0]=e[0]-z[0],z[1]=g[0]-z[1];else if(t){var C=+/w$/.test(t),D=+/^n/.test(t);A=[e[1-C]-z[0],g[1-D]-z[1]],z[0]=e[C],z[1]=g[D]}else a.event.altKey&&(y=z.slice());s.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",q.style("cursor")),r({type:"brushstart"}),G()}var h,i,b=O(m,"brushstart","brush","brushend"),c=null,d=null,e=[0,0],g=[0,0],j=!0,k=!0,l=Ii[0];return m.event=function(c){c.each(function(){var c=b.of(this,arguments),d={x:e,y:g,i:h,j:i},f=this.__chart__||d;this.__chart__=d,xi?a.select(this).transition().each("start.brush",function(){h=f.i,i=f.j,e=f.x,g=f.y,c({type:"brushstart"})}).tween("brush:brush",function(){var a=xf(e,d.x),b=xf(g,d.y);return h=i=null,function(f){e=d.x=a(f),g=d.y=b(f),c({type:"brush",mode:"resize"})}}).each("end.brush",function(){h=d.i,i=d.j,c({type:"brush",mode:"resize"}),c({type:"brushend"})}):(c({type:"brushstart"}),c({type:"brush",mode:"resize"}),c({type:"brushend"}))})},m.x=function(a){return arguments.length?(c=a,l=Ii[!c<<1|!d],m):c},m.y=function(a){return arguments.length?(d=a,l=Ii[!c<<1|!d],m):d},m.clamp=function(a){return arguments.length?(c&&d?(j=!!a[0],k=!!a[1]):c?j=!!a:d&&(k=!!a),m):c&&d?[j,k]:c?j:d?k:null},m.extent=function(a){var b,f,j,k,l;return arguments.length?(c&&(b=a[0],f=a[1],d&&(b=b[0],f=f[0]),h=[b,f],c.invert&&(b=c(b),f=c(f)),f<b&&(l=b,b=f,f=l),b==e[0]&&f==e[1]||(e=[b,f])),d&&(j=a[0],k=a[1],c&&(j=j[1],k=k[1]),i=[j,k],d.invert&&(j=d(j),k=d(k)),k<j&&(l=j,j=k,k=l),j==g[0]&&k==g[1]||(g=[j,k])),m):(c&&(h?(b=h[0],f=h[1]):(b=e[0],f=e[1],c.invert&&(b=c.invert(b),f=c.invert(f)),f<b&&(l=b,b=f,f=l))),d&&(i?(j=i[0],k=i[1]):(j=g[0],k=g[1],d.invert&&(j=d.invert(j),k=d.invert(k)),k<j&&(l=j,j=k,k=l))),c&&d?[[b,j],[f,k]]:c?[b,f]:d&&[j,k])},m.clear=function(){return m.empty()||(e=[0,0],g=[0,0],h=i=null),m},m.empty=function(){return!!c&&e[0]==e[1]||!!d&&g[0]==g[1]},a.rebind(m,b,"on")};var Hi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ii=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ji=Qb.format=sc.timeFormat,Ki=Ji.utc,Li=Ki("%Y-%m-%dT%H:%M:%S.%LZ");Ji.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Mi:Li,Mi.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Mi.toString=Li.toString,Qb.second=Ub(function(a){return new Rb(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),Qb.seconds=Qb.second.range,Qb.seconds.utc=Qb.second.utc.range,Qb.minute=Ub(function(a){return new Rb(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),Qb.minutes=Qb.minute.range,Qb.minutes.utc=Qb.minute.utc.range,Qb.hour=Ub(function(a){var b=a.getTimezoneOffset()/60;return new Rb(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),Qb.hours=Qb.hour.range,Qb.hours.utc=Qb.hour.utc.range,Qb.month=Ub(function(a){return a=Qb.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),Qb.months=Qb.month.range,Qb.months.utc=Qb.month.utc.range;var Pi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Qi=[[Qb.second,1],[Qb.second,5],[Qb.second,15],[Qb.second,30],[Qb.minute,1],[Qb.minute,5],[Qb.minute,15],[Qb.minute,30],[Qb.hour,1],[Qb.hour,3],[Qb.hour,6],[Qb.hour,12],[Qb.day,1],[Qb.day,2],[Qb.week,1],[Qb.month,1],[Qb.month,3],[Qb.year,1]],Ri=Ji.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",dd]]),Si={range:function(b,c,d){return a.range(Math.ceil(b/d)*d,+c,d).map(Oi)},floor:F,ceil:F};Qi.year=Qb.year,Qb.scale=function(){return Ni(a.scale.linear(),Qi,Ri)};var Ti=Qi.map(function(a){return[a[0].utc,a[1]]}),Ui=Ki.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",dd]]);Ti.year=Qb.year.utc,Qb.scale.utc=function(){return Ni(a.scale.linear(),Ti,Ui)},a.text=wb(function(a){return a.responseText}),a.json=function(a,b){return xb(a,"application/json",Vi,b)},a.html=function(a,b){return xb(a,"text/html",Wi,b)},a.xml=wb(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(a):"object"==typeof module&&module.exports&&(module.exports=a),this.d3=a}(),function(){function Ga(b,c){if(b!==c){var d=null===b,e=b===a,f=b===b,g=null===c,h=c===a,i=c===c;if(b>c&&!g||!f||d&&!h&&i||e&&i)return 1;if(b<c&&!d||!i||g&&!e&&f||h&&f)return-1}return 0}function Ha(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function Ia(a,b,c){if(b!==b)return Ta(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function Ja(a){return"function"==typeof a||!1}function Ka(a){return null==a?"":a+""}function La(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function Ma(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function Na(a,b){return Ga(a.criteria,b.criteria)||a.index-b.index}function Oa(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Ga(e[d],f[d]);if(i){if(d>=h)return i;var j=c[d];return i*("asc"===j||j===!0?1:-1)}}return a.index-b.index}function Pa(a){return ta[a]}function Qa(a){return ua[a]}function Ra(a,b,c){return b?a=xa[a]:c&&(a=ya[a]),"\\"+a}function Sa(a){return"\\"+ya[a]}function Ta(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function Ua(a){return!!a&&"object"==typeof a}function Va(a){return a<=160&&a>=9&&a<=13||32==a||160==a||5760==a||6158==a||a>=8192&&(a<=8202||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function Wa(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=t,f[++e]=c);return f}function Xa(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function Ya(a){for(var b=-1,c=a.length;++b<c&&Va(a.charCodeAt(b)););return b}function Za(a){for(var b=a.length;b--&&Va(a.charCodeAt(b)););return b}function $a(a){return va[a]}function _a(A){function Ib(a){if(Ua(a)&&!pg(a)&&!(a instanceof Mb)){if(a instanceof Kb)return a;if(Va.call(a,"__chain__")&&Va.call(a,"__wrapped__"))return qe(a)}return new Kb(a)}function Jb(){}function Kb(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Mb(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bb,this.__views__=[]}function Nb(){var a=new Mb(this.__wrapped__);return a.__actions__=Zb(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Zb(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Zb(this.__views__),a}function Ob(){if(this.__filtered__){var a=new Mb(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Pb(){var a=this.__wrapped__.value(),b=this.__dir__,c=pg(a),d=b<0,e=c?a.length:0,f=Wd(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=wb(i,this.__takeCount__);if(!c||e<p||e==i&&n==i)return dd(a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var s=-1,t=a[j];++s<l;){var u=k[s],v=u.iteratee,w=u.type,x=v(t);if(w==r)t=x;else if(!x){if(w==q)continue a;break a}}o[m++]=t}return o}function Qb(){this.__data__={}}function Rb(a){return this.has(a)&&delete this.__data__[a]}function Sb(b){return"__proto__"==b?a:this.__data__[b]}function Tb(a){return"__proto__"!=a&&Va.call(this.__data__,a)}function Ub(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Vb(a){var b=a?a.length:0;for(this.data={hash:qb(null),set:new kb};b--;)this.push(a[b])}function Wb(a,b){var c=a.data,d="string"==typeof b||yg(b)?c.set.has(b):c.hash[b];return d?0:-1}function Xb(a){var b=this.data;"string"==typeof a||yg(a)?b.set.add(a):b.hash[a]=!0}function Yb(a,b){for(var c=-1,d=a.length,e=-1,f=b.length,g=E(d+f);++c<d;)g[c]=a[c];for(;++e<f;)g[c++]=b[e];return g}function Zb(a,b){var c=-1,d=a.length;for(b||(b=E(d));++c<d;)b[c]=a[c];return b}function $b(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function _b(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function ac(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function bc(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e<f;){var i=a[e],j=+b(i);c(j,g)&&(g=j,h=i)}return h}function cc(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function dc(a,b){for(var c=-1,d=a.length,e=E(d);++c<d;)e[c]=b(a[c],c,a);return e}function ec(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function fc(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function gc(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function hc(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function ic(a,b){for(var c=a.length,d=0;c--;)d+=+b(a[c])||0;return d}function jc(b,c){return b===a?c:b}function kc(b,c,d,e){return b!==a&&Va.call(e,d)?b:c}function lc(b,c,d){for(var e=-1,f=ah(c),g=f.length;++e<g;){var h=f[e],i=b[h],j=d(i,c[h],h,b,c);(j===j?j===i:i!==i)&&(i!==a||h in b)||(b[h]=j)}return b}function mc(a,b){return null==b?a:oc(b,ah(b),a)}function nc(b,c){for(var d=-1,e=null==b,f=!e&&_d(b),g=f?b.length:0,h=c.length,i=E(h);++d<h;){var j=c[d];f?i[d]=ae(j,g)?b[j]:a:i[d]=e?a:b[j]}return i}function oc(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function pc(b,c,d){var e=typeof b;return"function"==e?c===a?b:gd(b,c,d):null==b?Nh:"object"==e?Nc(b):c===a?Vh(b):Oc(b,c)}function qc(b,c,d,e,f,g,h){var i;if(d&&(i=f?d(b,e,f):d(b)),i!==a)return i;if(!yg(b))return b;var j=pg(b);if(j){if(i=Xd(b),!c)return Zb(b,i)}else{var k=cb.call(b),l=k==z;if(k!=C&&k!=u&&(!l||f))return sa[k]?Zd(b,k,c):f?b:{};if(i=Yd(l?{}:b),!c)return mc(i,b)}g||(g=[]),h||(h=[]);for(var m=g.length;m--;)if(g[m]==b)return h[m];return g.push(b),h.push(i),(j?$b:Fc)(b,function(a,e){i[e]=qc(a,c,d,e,b,g,h)}),i}function sc(b,c,d){if("function"!=typeof b)throw new Aa(s);return lb(function(){b.apply(a,d)},c)}function tc(a,b){var c=a?a.length:0,d=[];if(!c)return d;var e=-1,f=Sd(),g=f===Ia,h=g&&b.length>=p?pd(b):null,i=b.length;h&&(f=Wb,g=!1,b=h);a:for(;++e<c;){var j=a[e];if(g&&j===j){for(var k=i;k--;)if(b[k]===j)continue a;d.push(j)}else f(b,j,0)<0&&d.push(j)}return d}function wc(a,b){var c=!0;return uc(a,function(a,d,e){return c=!!b(a,d,e)}),c}function xc(a,b,c,d){var e=d,f=e;return uc(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&&i===f)&&(e=i,f=a)}),f}function yc(b,c,d,e){var f=b.length;for(d=null==d?0:+d||0,d<0&&(d=-d>f?0:f+d),e=e===a||e>f?f:+e||0,e<0&&(e+=f),f=d>e?0:e>>>0,d>>>=0;d<f;)b[d++]=c;return b}function zc(a,b){var c=[];return uc(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Ac(a,b,c,d){var e;return c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1}),e}function Bc(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];Ua(g)&&_d(g)&&(c||pg(g)||og(g))?b?Bc(g,b,c,d):ec(d,g):c||(d[d.length]=g)}return d}function Ec(a,b){return Cc(a,b,bh)}function Fc(a,b){return Cc(a,b,ah)}function Gc(a,b){return Dc(a,b,ah)}function Hc(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];xg(a[g])&&(f[++e]=g)}return f}function Ic(b,c,d){if(null!=b){d!==a&&d in oe(b)&&(c=[d]);for(var e=0,f=c.length;null!=b&&e<f;)b=b[c[e++]];return e&&e==f?b:a}}function Jc(a,b,c,d,e,f){return a===b||(null==a||null==b||!yg(a)&&!Ua(b)?a!==a&&b!==b:Kc(a,b,Jc,c,d,e,f))}function Kc(a,b,c,d,e,f,g){var h=pg(a),i=pg(b),j=v,k=v;h||(j=cb.call(a),j==u?j=C:j!=C&&(h=Hg(a))),i||(k=cb.call(b),k==u?k=C:k!=C&&(i=Hg(b)));var l=j==C,m=k==C,n=j==k;if(n&&!h&&!l)return Nd(a,b,j);if(!e){var o=l&&Va.call(a,"__wrapped__"),p=m&&Va.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Md:Od)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Lc(b,c,d){var e=c.length,f=e,g=!d;if(null==b)return!f;for(b=oe(b);e--;){var h=c[e];if(g&&h[2]?h[1]!==b[h[0]]:!(h[0]in b))return!1}for(;++e<f;){h=c[e];var i=h[0],j=b[i],k=h[1];if(g&&h[2]){if(j===a&&!(i in b))return!1}else{var l=d?d(j,k,i):a;if(!(l===a?Jc(k,j,d,!0):l))return!1}}return!0}function Mc(a,b){var c=-1,d=_d(a)?E(a.length):[];return uc(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Nc(b){var c=Ud(b);if(1==c.length&&c[0][2]){var d=c[0][0],e=c[0][1];return function(b){return null!=b&&(b[d]===e&&(e!==a||d in oe(b)))}}return function(a){return Lc(a,c)}}function Oc(b,c){var d=pg(b),e=ce(b)&&fe(c),f=b+"";return b=pe(b),function(g){if(null==g)return!1;var h=f;if(g=oe(g),(d||!e)&&!(h in g)){if(g=1==b.length?g:Ic(g,Xc(b,0,-1)),null==g)return!1;h=He(b),g=oe(g)}return g[h]===c?c!==a||h in g:Jc(c,g[h],a,!0)}}function Pc(b,c,d,e,f){if(!yg(b))return b;var g=_d(c)&&(pg(c)||Hg(c)),h=g?a:ah(c);return $b(h||c,function(i,j){if(h&&(j=i,i=c[j]),Ua(i))e||(e=[]),f||(f=[]),Qc(b,c,j,Pc,d,e,f);else{var k=b[j],l=d?d(k,i,j,b,c):a,m=l===a;m&&(l=i),l===a&&(!g||j in b)||!m&&(l===l?l===k:k!==k)||(b[j]=l)}}),b}function Qc(b,c,d,e,f,g,h){for(var i=g.length,j=c[d];i--;)if(g[i]==j)return void(b[d]=h[i]);var k=b[d],l=f?f(k,j,d,b,c):a,m=l===a;m&&(l=j,_d(j)&&(pg(j)||Hg(j))?l=pg(k)?k:_d(k)?Zb(k):[]:Eg(j)||og(j)?l=og(k)?Mg(k):Eg(k)?k:{}:m=!1),g.push(j),h.push(l),m?b[d]=e(l,j,f,g,h):(l===l?l!==k:k===k)&&(b[d]=l)}function Rc(b){return function(c){return null==c?a:c[b]}}function Sc(a){var b=a+"";return a=pe(a),function(c){return Ic(c,a,b)}}function Tc(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&ae(d)){var e=d;mb.call(a,d,1)}}return a}function Uc(a,b){return a+rb(zb()*(b-a+1))}function Vc(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Xc(b,c,d){var e=-1,f=b.length;c=null==c?0:+c||0,c<0&&(c=-c>f?0:f+c),d=d===a||d>f?f:+d||0,d<0&&(d+=f),f=c>d?0:d-c>>>0,c>>>=0;for(var g=E(f);++e<f;)g[e]=b[e+c];return g}function Yc(a,b){var c;return uc(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Zc(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function $c(a,b,c){var d=Pd(),e=-1;b=dc(b,function(a){return d(a)});var f=Mc(a,function(a){var c=dc(b,function(b){return b(a)});return{criteria:c,index:++e,value:a}});return Zc(f,function(a,b){return Oa(a,b,c)})}function _c(a,b){var c=0;return uc(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function ad(a,b){var c=-1,d=Sd(),e=a.length,f=d===Ia,g=f&&e>=p,h=g?pd():null,i=[];h?(d=Wb,f=!1):(g=!1,h=b?[]:i);a:for(;++c<e;){var j=a[c],k=b?b(j,c,a):j;if(f&&j===j){for(var l=h.length;l--;)if(h[l]===k)continue a;b&&h.push(k),i.push(j)}else d(h,k,0)<0&&((b||g)&&h.push(k),i.push(j))}return i}function bd(a,b){for(var c=-1,d=b.length,e=E(d);++c<d;)e[c]=a[b[c]];return e}function cd(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Xc(a,d?0:f,d?f+1:e):Xc(a,d?f+1:0,d?e:f)}function dd(a,b){var c=a;c instanceof Mb&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=b[d];c=f.func.apply(f.thisArg,ec([c],f.args))}return c}function ed(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&e<=Eb){for(;d<e;){var f=d+e>>>1,g=a[f];(c?g<=b:g<b)&&null!==g?d=f+1:e=f}return e}return fd(a,b,Nh,c)}function fd(b,c,d,e){c=d(c);for(var f=0,g=b?b.length:0,h=c!==c,i=null===c,j=c===a;f<g;){var k=rb((f+g)/2),l=d(b[k]),m=l!==a,n=l===l;if(h)var o=n||e;else o=i?n&&m&&(e||null!=l):j?n&&(e||m):null!=l&&(e?l<=c:l<c);o?f=k+1:g=k}return wb(g,Db)}function gd(b,c,d){if("function"!=typeof b)return Nh;if(c===a)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}function hd(a){var b=new fb(a.byteLength),c=new nb(b);return c.set(new nb(a)),b}function id(a,b,c){for(var d=c.length,e=-1,f=vb(a.length-d,0),g=-1,h=b.length,i=E(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function jd(a,b,c){for(var d=-1,e=c.length,f=-1,g=vb(a.length-e,0),h=-1,i=b.length,j=E(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function kd(a,b){return function(c,d,e){var f=b?b():{};if(d=Pd(d,e,3),pg(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else uc(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ld(b){return gg(function(c,d){var e=-1,f=null==c?0:d.length,g=f>2?d[f-2]:a,h=f>2?d[2]:a,i=f>1?d[f-1]:a;for("function"==typeof g?(g=gd(g,i,5),f-=2):(g="function"==typeof i?i:a,f-=g?1:0),h&&be(d[0],d[1],h)&&(g=f<3?a:g,f=1);++e<f;){var j=d[e];j&&b(c,j,g)}return c})}function md(a,b){return function(c,d){var e=c?Td(c):0;if(!ee(e))return a(c,d);for(var f=b?e:-1,g=oe(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function nd(a){return function(b,c,d){for(var e=oe(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function od(a,b){function d(){var e=this&&this!==Fa&&this instanceof d?c:a;return e.apply(b,arguments)}var c=rd(a);return d}function pd(a){return qb&&kb?new Vb(a):null}function qd(a){return function(b){for(var c=-1,d=Jh(qh(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function rd(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=rc(a.prototype),d=a.apply(c,b);return yg(d)?d:c}}function sd(b){function c(d,e,f){f&&be(d,e,f)&&(e=a);var g=Ld(d,b,a,a,a,a,a,e);return g.placeholder=c.placeholder,g}return c}function td(b,c){return gg(function(d){var e=d[0];return null==e?e:(d.push(c),b.apply(a,d))})}function ud(b,c){return function(d,e,f){if(f&&be(d,e,f)&&(e=a),e=Pd(e,f,3),1==e.length){d=pg(d)?d:ne(d);var g=bc(d,e,b,c);if(!d.length||g!==c)return g}return xc(d,e,b,c)}}function vd(b,c){return function(d,e,f){if(e=Pd(e,f,3),pg(d)){var g=Ha(d,e,c);return g>-1?d[g]:a}return Ac(d,e,b)}}function wd(a){return function(b,c,d){return b&&b.length?(c=Pd(c,d,3),Ha(b,c,a)):-1}}function xd(a){return function(b,c,d){return c=Pd(c,d,3),Ac(b,c,a,!0)}}function yd(b){return function(){for(var c,d=arguments.length,e=b?d:-1,g=0,i=E(d);b?e--:++e<d;){var l=i[g++]=arguments[e];if("function"!=typeof l)throw new Aa(s);!c&&Kb.prototype.thru&&"wrapper"==Rd(l)&&(c=new Kb([],!0))}for(e=c?-1:d;++e<d;){l=i[e];var m=Rd(l),n="wrapper"==m?Qd(l):a;c=n&&de(n[0])&&n[1]==(j|f|h|k)&&!n[4].length&&1==n[9]?c[Rd(n[0])].apply(c,n[3]):1==l.length&&de(l)?c[m]():c.thru(l)}return function(){var a=arguments,b=a[0];if(c&&1==a.length&&pg(b)&&b.length>=p)return c.plant(b).value();for(var e=0,f=d?i[e].apply(this,a):b;++e<d;)f=i[e].call(this,f);return f}}}function zd(b,c){return function(d,e,f){return"function"==typeof e&&f===a&&pg(d)?b(d,e):c(d,gd(e,f,3))}}function Ad(b){return function(c,d,e){return"function"==typeof d&&e===a||(d=gd(d,e,3)),b(c,d,bh)}}function Bd(b){return function(c,d,e){return"function"==typeof d&&e===a||(d=gd(d,e,3)),b(c,d)}}function Cd(a){return function(b,c,d){var e={};return c=Pd(c,d,3),Fc(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function Dd(a){return function(b,c,d){return b=Ka(b),(a?b:"")+Hd(b,c,d)+(a?"":b)}}function Ed(b){var c=gg(function(d,e){var f=Wa(e,c.placeholder);return Ld(d,b,a,e,f)});return c}function Fd(b,c){return function(d,e,f,g){var h=arguments.length<3;return"function"==typeof e&&g===a&&pg(d)?b(d,e,f,h):Vc(d,Pd(e,g,4),f,h,c)}}function Gd(b,k,l,m,n,o,p,q,r,s){function A(){for(var e=arguments.length,f=e,g=E(e);f--;)g[f]=arguments[f];if(m&&(g=id(g,m,n)),o&&(g=jd(g,o,p)),w||y){var j=A.placeholder,B=Wa(g,j);if(e-=B.length,e<s){var C=q?Zb(q):a,D=vb(s-e,0),F=w?B:a,G=w?a:B,H=w?g:a,I=w?a:g;k|=w?h:i,k&=~(w?i:h),x||(k&=~(c|d));var J=[b,k,l,H,F,I,G,C,r,D],K=Gd.apply(a,J);return de(b)&&le(K,J),K.placeholder=j,K}}var L=u?l:this,M=v?L[b]:b;return q&&(g=ke(g,q)),t&&r<g.length&&(g.length=r),this&&this!==Fa&&this instanceof A&&(M=z||rd(b)),M.apply(L,g)}var t=k&j,u=k&c,v=k&d,w=k&f,x=k&e,y=k&g,z=v?a:rd(b);return A}function Hd(a,b,c){var d=a.length;if(b=+b,d>=b||!tb(b))return"";var e=b-d;return c=null==c?" ":c+"",zh(c,pb(e/c.length)).slice(0,e)}function Id(a,b,d,e){function h(){for(var b=-1,c=arguments.length,i=-1,j=e.length,k=E(j+c);++i<j;)k[i]=e[i];for(;c--;)k[i++]=arguments[++b];var l=this&&this!==Fa&&this instanceof h?g:a;return l.apply(f?d:this,k)}var f=b&c,g=rd(a);return h}function Jd(b){var c=va[b];return function(b,d){return d=d===a?0:+d||0,d?(d=ib(10,d),c(b*d)/d):c(b)}}function Kd(a){return function(b,c,d,e){var f=Pd(d);return null==d&&f===pc?ed(b,c,a):fd(b,c,f(d,e,1),a)}}function Ld(b,e,f,g,j,k,l,m){var n=e&d;if(!n&&"function"!=typeof b)throw new Aa(s);var o=g?g.length:0;if(o||(e&=~(h|i),g=j=a),o-=j?j.length:0,e&i){var p=g,q=j;g=j=a}var r=n?a:Qd(b),t=[b,e,f,g,j,p,q,k,l,m];if(r&&(ge(t,r),e=t[1],m=t[9]),t[9]=null==m?n?0:b.length:vb(m-o,0)||0,e==c)var u=od(t[0],t[2]);else u=e!=h&&e!=(c|h)||t[4].length?Gd.apply(a,t):Id.apply(a,t);var v=r?Wc:le;return v(u,t)}function Md(b,c,d,e,f,g,h){var i=-1,j=b.length,k=c.length;if(j!=k&&!(f&&k>j))return!1;for(;++i<j;){var l=b[i],m=c[i],n=e?e(f?m:l,f?l:m,i):a;if(n!==a){if(n)continue;return!1}if(f){if(!hc(c,function(a){return l===a||d(l,a,e,f,g,h)}))return!1}else if(l!==m&&!d(l,m,e,f,g,h))return!1}return!0}function Nd(a,b,c){switch(c){case w:case x:return+a==+b;case y:return a.name==b.name&&a.message==b.message;case B:return a!=+a?b!=+b:a==+b;case D:case F:return a==b+""}return!1}function Od(b,c,d,e,f,g,h){var i=ah(b),j=i.length,k=ah(c),l=k.length;if(j!=l&&!f)return!1;for(var m=j;m--;){var n=i[m];if(!(f?n in c:Va.call(c,n)))return!1}for(var o=f;++m<j;){n=i[m];var p=b[n],q=c[n],r=e?e(f?q:p,f?p:q,n):a;if(!(r===a?d(p,q,e,f,g,h):r))return!1;o||(o="constructor"==n)}if(!o){var s=b.constructor,t=c.constructor;if(s!=t&&"constructor"in b&&"constructor"in c&&!("function"==typeof s&&s instanceof s&&"function"==typeof t&&t instanceof t))return!1}return!0}function Pd(a,b,c){var d=Ib.callback||Lh;return d=d===Lh?pc:d,c?d(a,b,c):d}function Rd(a){for(var b=a.name+"",c=Hb[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Sd(a,b,c){var d=Ib.indexOf||Ee;return d=d===Ee?Ia:d,a?d(a,b,c):d}function Ud(a){for(var b=fh(a),c=b.length;c--;)b[c][2]=fe(b[c][1]);return b}function Vd(b,c){var d=null==b?a:b[c];return Bg(d)?d:a}function Wd(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=wb(b,a+g);break;case"takeRight":a=vb(a,b-g)}}return{start:a,end:b}}function Xd(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Va.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Yd(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=xa),new b}function Zd(a,b,c){var d=a.constructor;switch(b){case H:return hd(a);case w:case x:return new d(+a);case I:case J:case K:case L:case M:case N:case O:case P:case Q:var e=a.buffer;return new d(c?hd(e):e,a.byteOffset,a.length);case B:case F:return new d(a);case D:var f=new d(a.source,ha.exec(a));f.lastIndex=a.lastIndex}return f}function $d(b,c,d){null==b||ce(c,b)||(c=pe(c),b=1==c.length?b:Ic(b,Xc(c,0,-1)),c=He(c));var e=null==b?b:b[c];return null==e?a:e.apply(b,d)}function _d(a){return null!=a&&ee(Td(a))}function ae(a,b){return a="number"==typeof a||ka.test(a)?+a:-1,b=null==b?Fb:b,a>-1&&a%1==0&&a<b}function be(a,b,c){if(!yg(c))return!1;var d=typeof b;if("number"==d?_d(c)&&ae(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function ce(a,b){var c=typeof a;if("string"==c&&aa.test(a)||"number"==c)return!0;if(pg(a))return!1;var d=!_.test(a);return d||null!=b&&a in oe(b)}function de(a){var b=Rd(a),c=Ib[b];if("function"!=typeof c||!(b in Mb.prototype))return!1;if(a===c)return!0;var d=Qd(c);return!!d&&a===d[0]}function ee(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Fb}function fe(a){return a===a&&!yg(a)}function ge(a,b){var d=a[1],g=b[1],h=d|g,i=h<j,l=g==j&&d==f||g==j&&d==k&&a[7].length<=b[8]||g==(j|k)&&d==f;if(!i&&!l)return a;g&c&&(a[2]=b[2],h|=d&c?0:e);var m=b[3];if(m){var n=a[3];a[3]=n?id(n,m,b[4]):Zb(m),a[4]=n?Wa(a[3],t):Zb(b[4])}return m=b[5],m&&(n=a[5],a[5]=n?jd(n,m,b[6]):Zb(m),a[6]=n?Wa(a[5],t):Zb(b[6])),m=b[7],m&&(a[7]=Zb(m)),g&j&&(a[8]=null==a[8]?b[8]:wb(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=h,a}function he(b,c){return b===a?c:Ng(b,c,he)}function ie(a,b){a=oe(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function je(a,b){var c={};return Ec(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function ke(b,c){for(var d=b.length,e=wb(c.length,d),f=Zb(b);e--;){var g=c[e];b[e]=ae(g,d)?f[g]:a}return b}function me(a){for(var b=bh(a),c=b.length,d=c&&a.length,e=!!d&&ee(d)&&(pg(a)||og(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&ae(h,d)||Va.call(a,h))&&g.push(h)}return g}function ne(a){return null==a?[]:_d(a)?yg(a)?a:xa(a):kh(a)}function oe(a){return yg(a)?a:xa(a)}function pe(a){if(pg(a))return a;var b=[];return Ka(a).replace(ba,function(a,c,d,e){b.push(d?e.replace(fa,"$1"):c||a)}),b}function qe(a){return a instanceof Mb?a.clone():new Kb(a.__wrapped__,a.__chain__,Zb(a.__actions__))}function re(a,b,c){b=(c?be(a,b,c):null==b)?1:vb(rb(b)||1,1);for(var d=0,e=a?a.length:0,f=-1,g=E(pb(e/b));d<e;)g[++f]=Xc(a,d,d+=b);return g}function se(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function ue(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),Xc(a,b<0?0:b)):[]}function ve(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),b=d-(+b||0),Xc(a,0,b<0?0:b)):[]}function we(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!0,!0):[]}function xe(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!0):[]}function ye(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&be(a,b,c)&&(c=0,d=e),yc(a,b,c,d)):[]}function Be(b){return b?b[0]:a}function Ce(a,b,c){var d=a?a.length:0;return c&&be(a,b,c)&&(b=!1),d?Bc(a,b):[]}function De(a){var b=a?a.length:0;return b?Bc(a,!0):[]}function Ee(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=c<0?vb(d+c,0):c;else if(c){var e=ed(a,b);return e<d&&(b===b?b===a[e]:a[e]!==a[e])?e:-1}return Ia(a,b,c||0)}function Fe(a){return ve(a,1)}function He(b){var c=b?b.length:0;return c?b[c-1]:a}function Ie(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(c<0?vb(d+c,0):wb(c||0,d-1))+1;else if(c){e=ed(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return Ta(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Je(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Sd(),e=a.length;++c<e;)for(var f=0,g=a[c];(f=d(b,g,f))>-1;)mb.call(b,f,1);return b}function Le(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Pd(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return Tc(a,f),d}function Me(a){return ue(a,1)}function Ne(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&be(a,b,c)&&(b=0,c=d),Xc(a,b,c)):[]}function Qe(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),Xc(a,0,b<0?0:b)):[]}function Re(a,b,c){var d=a?a.length:0;return d?((c?be(a,b,c):null==b)&&(b=1),b=d-(+b||0),Xc(a,b<0?0:b)):[]}function Se(a,b,c){return a&&a.length?cd(a,Pd(b,c,3),!1,!0):[]}function Te(a,b,c){return a&&a.length?cd(a,Pd(b,c,3)):[]}function Ve(b,c,d,e){var f=b?b.length:0;if(!f)return[];null!=c&&"boolean"!=typeof c&&(e=d,d=be(b,c,e)?a:c,c=!1);var g=Pd();return null==d&&g===pc||(d=g(d,e,3)),c&&Sd()===Ia?Xa(b,d):ad(b,d)}function We(a){if(!a||!a.length)return[];var b=-1,c=0;a=cc(a,function(a){if(_d(a))return c=vb(a.length,c),!0});for(var d=E(c);++b<c;)d[b]=dc(a,Rc(b));return d}function Xe(b,c,d){var e=b?b.length:0;if(!e)return[];var f=We(b);return null==c?f:(c=gd(c,d,4),dc(f,function(b){return fc(b,c,a,!0)}))}function Ze(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(_d(c))var d=d?ec(tc(d,c),tc(c,d)):c}return d?ad(d):[]}function _e(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||pg(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function bf(a){var b=Ib(a);return b.__chain__=!0,b}function cf(a,b,c){return b.call(c,a),a}function df(a,b,c){return b.call(c,a)}function ef(){return bf(this)}function ff(){return new Kb(this.value(),this.__chain__)}function hf(a){for(var b,c=this;c instanceof Jb;){var d=qe(c);b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function jf(){var b=this.__wrapped__,c=function(a){return a.reverse()};if(b instanceof Mb){var d=b;return this.__actions__.length&&(d=new Mb(this)),d=d.reverse(),d.__actions__.push({func:df,args:[c],thisArg:a}),new Kb(d,this.__chain__)}return this.thru(c)}function kf(){return this.value()+""}function lf(){return dd(this.__wrapped__,this.__actions__)}function of(b,c,d){var e=pg(b)?ac:wc;return d&&be(b,c,d)&&(c=a),"function"==typeof c&&d===a||(c=Pd(c,d,3)),e(b,c)}function pf(a,b,c){var d=pg(a)?cc:zc;return b=Pd(b,c,3),d(a,b)}function sf(a,b){return qf(a,Nc(b))}function wf(a,b,c,d){var e=a?Td(a):0;return ee(e)||(a=kh(a),e=a.length),c="number"!=typeof c||d&&be(b,c,d)?0:c<0?vb(e+c,0):c||0,"string"==typeof a||!pg(a)&&Gg(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&Sd(a,b,c)>-1}function zf(a,b,c){var d=pg(a)?dc:Mc;return b=Pd(b,c,3),d(a,b)}function Bf(a,b){return zf(a,Vh(b))}function Ef(a,b,c){var d=pg(a)?cc:zc;return b=Pd(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Ff(b,c,d){if(d?be(b,c,d):null==c){b=ne(b);var e=b.length;return e>0?b[Uc(0,e-1)]:a}var f=-1,g=Lg(b),e=g.length,h=e-1;for(c=wb(c<0?0:+c||0,e);++f<c;){var i=Uc(f,h),j=g[i];g[i]=g[f],g[f]=j}return g.length=c,g}function Gf(a){return Ff(a,Bb)}function Hf(a){var b=a?Td(a):0;return ee(b)?b:ah(a).length}function If(b,c,d){var e=pg(b)?hc:Yc;return d&&be(b,c,d)&&(c=a),"function"==typeof c&&d===a||(c=Pd(c,d,3)),e(b,c)}function Jf(b,c,d){if(null==b)return[];d&&be(b,c,d)&&(c=a);var e=-1;c=Pd(c,d,3);var f=Mc(b,function(a,b,d){return{criteria:c(a,b,d),index:++e,value:a}});return Zc(f,Na)}function Lf(b,c,d,e){
return null==b?[]:(e&&be(c,d,e)&&(d=a),pg(c)||(c=null==c?[]:[c]),pg(d)||(d=null==d?[]:[d]),$c(b,c,d))}function Mf(a,b){return pf(a,Nc(b))}function Of(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Aa(s);var c=a;a=b,b=c}return a=tb(a=+a)?a:0,function(){if(--a<1)return b.apply(this,arguments)}}function Pf(b,c,d){return d&&be(b,c,d)&&(c=a),c=b&&null==c?b.length:vb(+c||0,0),Ld(b,j,a,a,a,a,c)}function Qf(b,c){var d;if("function"!=typeof c){if("function"!=typeof b)throw new Aa(s);var e=b;b=c,c=e}return function(){return--b>0&&(d=c.apply(this,arguments)),b<=1&&(c=a),d}}function Wf(b,c,d){function p(){j&&gb(j),f&&gb(f),l=0,f=j=k=a}function q(c,d){d&&gb(d),f=j=k=a,c&&(l=Nf(),g=b.apply(i,e),j||f||(e=i=a))}function r(){var a=c-(Nf()-h);a<=0||a>c?q(k,f):j=lb(r,a)}function t(){q(n,j)}function u(){if(e=arguments,h=Nf(),i=this,k=n&&(j||!o),m===!1)var d=o&&!j;else{f||o||(l=h);var p=m-(h-l),q=p<=0||p>m;q?(f&&(f=gb(f)),l=h,g=b.apply(i,e)):f||(f=lb(t,p))}return q&&j?j=gb(j):j||c===m||(j=lb(r,c)),d&&(q=!0,g=b.apply(i,e)),!q||j||f||(e=i=a),g}var e,f,g,h,i,j,k,l=0,m=!1,n=!0;if("function"!=typeof b)throw new Aa(s);if(c=c<0?0:+c||0,d===!0){var o=!0;n=!1}else yg(d)&&(o=!!d.leading,m="maxWait"in d&&vb(+d.maxWait||0,c),n="trailing"in d?!!d.trailing:n);return u.cancel=p,u}function _f(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Aa(s);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new _f.Cache,c}function bg(a){if("function"!=typeof a)throw new Aa(s);return function(){return!a.apply(this,arguments)}}function cg(a){return Qf(2,a)}function gg(b,c){if("function"!=typeof b)throw new Aa(s);return c=vb(c===a?b.length-1:+c||0,0),function(){for(var a=arguments,d=-1,e=vb(a.length-c,0),f=E(e);++d<e;)f[d]=a[c+d];switch(c){case 0:return b.call(this,f);case 1:return b.call(this,a[0],f);case 2:return b.call(this,a[0],a[1],f)}var g=E(c+1);for(d=-1;++d<c;)g[d]=a[d];return g[c]=f,b.apply(this,g)}}function hg(a){if("function"!=typeof a)throw new Aa(s);return function(b){return a.apply(this,b)}}function ig(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Aa(s);return c===!1?d=!1:yg(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Wf(a,b,{leading:d,maxWait:+b,trailing:e})}function jg(b,c){return c=null==c?Nh:c,Ld(c,h,a,[b],[])}function kg(a,b,c,d){return b&&"boolean"!=typeof b&&be(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?qc(a,b,gd(c,d,3)):qc(a,b)}function lg(a,b,c){return"function"==typeof b?qc(a,!0,gd(b,c,3)):qc(a,!0)}function mg(a,b){return a>b}function ng(a,b){return a>=b}function og(a){return Ua(a)&&_d(a)&&Va.call(a,"callee")&&!jb.call(a,"callee")}function qg(a){return a===!0||a===!1||Ua(a)&&cb.call(a)==w}function rg(a){return Ua(a)&&cb.call(a)==x}function sg(a){return!!a&&1===a.nodeType&&Ua(a)&&!Eg(a)}function tg(a){return null==a||(_d(a)&&(pg(a)||Gg(a)||og(a)||Ua(a)&&xg(a.splice))?!a.length:!ah(a).length)}function ug(b,c,d,e){d="function"==typeof d?gd(d,e,3):a;var f=d?d(b,c):a;return f===a?Jc(b,c,d):!!f}function vg(a){return Ua(a)&&"string"==typeof a.message&&cb.call(a)==y}function wg(a){return"number"==typeof a&&tb(a)}function xg(a){return yg(a)&&cb.call(a)==z}function yg(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function zg(b,c,d,e){return d="function"==typeof d?gd(d,e,3):a,Lc(b,Ud(c),d)}function Ag(a){return Dg(a)&&a!=+a}function Bg(a){return null!=a&&(xg(a)?eb.test(Ea.call(a)):Ua(a)&&ja.test(a))}function Cg(a){return null===a}function Dg(a){return"number"==typeof a||Ua(a)&&cb.call(a)==B}function Eg(b){var c;if(!Ua(b)||cb.call(b)!=C||og(b)||!Va.call(b,"constructor")&&(c=b.constructor,"function"==typeof c&&!(c instanceof c)))return!1;var d;return Ec(b,function(a,b){d=b}),d===a||Va.call(b,d)}function Fg(a){return yg(a)&&cb.call(a)==D}function Gg(a){return"string"==typeof a||Ua(a)&&cb.call(a)==F}function Hg(a){return Ua(a)&&ee(a.length)&&!!ra[cb.call(a)]}function Ig(b){return b===a}function Jg(a,b){return a<b}function Kg(a,b){return a<=b}function Lg(a){var b=a?Td(a):0;return ee(b)?b?Zb(a):[]:kh(a)}function Mg(a){return oc(a,bh(a))}function Pg(b,c,d){var e=rc(b);return d&&be(b,c,d)&&(c=a),c?mc(e,c):e}function Yg(a){return Hc(a,bh(a))}function Zg(b,c,d){var e=null==b?a:Ic(b,pe(c),c+"");return e===a?d:e}function $g(a,b){if(null==a)return!1;var c=Va.call(a,b);if(!c&&!ce(b)){if(b=pe(b),a=1==b.length?a:Ic(a,Xc(b,0,-1)),null==a)return!1;b=He(b),c=Va.call(a,b)}return c||ee(a.length)&&ae(b,a.length)&&(pg(a)||og(a))}function _g(b,c,d){d&&be(b,c,d)&&(c=a);for(var e=-1,f=ah(b),g=f.length,h={};++e<g;){var i=f[e],j=b[i];c?Va.call(h,j)?h[j].push(i):h[j]=[i]:h[j]=i}return h}function bh(a){if(null==a)return[];yg(a)||(a=xa(a));var b=a.length;b=b&&ee(b)&&(pg(a)||og(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=E(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&ae(h,b)||"constructor"==h&&(e||!Va.call(a,h))||f.push(h);return f}function fh(a){a=oe(a);for(var b=-1,c=ah(a),d=c.length,e=E(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function hh(b,c,d){var e=null==b?a:b[c];return e===a&&(null==b||ce(c,b)||(c=pe(c),b=1==c.length?b:Ic(b,Xc(c,0,-1)),e=null==b?a:b[He(c)]),e=e===a?d:e),xg(e)?e.call(b):e}function ih(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||ce(b,a)?[d]:pe(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];yg(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=ae(b[e+1])?[]:{})),h=h[i]}return a}function jh(b,c,d,e){var f=pg(b)||Hg(b);if(c=Pd(c,e,4),null==d)if(f||yg(b)){var g=b.constructor;d=f?pg(b)?new g:[]:rc(xg(g)?g.prototype:a)}else d={};return(f?$b:Fc)(b,function(a,b,e){return c(d,a,b,e)}),d}function kh(a){return bd(a,ah(a))}function lh(a){return bd(a,bh(a))}function mh(b,c,d){return c=+c||0,d===a?(d=c,c=0):d=+d||0,b>=wb(c,d)&&b<vb(c,d)}function nh(b,c,d){d&&be(b,c,d)&&(c=d=a);var e=null==b,f=null==c;if(null==d&&(f&&"boolean"==typeof b?(d=b,b=1):"boolean"==typeof c&&(d=c,f=!0)),e&&f&&(c=1,f=!1),b=+b||0,f?(c=b,b=0):c=+c||0,d||b%1||c%1){var g=zb();return wb(b+g*(c-b+hb("1e-"+((g+"").length-1))),c)}return Uc(b,c)}function ph(a){return a=Ka(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function qh(a){return a=Ka(a),a&&a.replace(la,Pa).replace(ea,"")}function rh(b,c,d){b=Ka(b),c+="";var e=b.length;return d=d===a?e:wb(d<0?0:+d||0,e),d-=c.length,d>=0&&b.indexOf(c,d)==d}function sh(a){return a=Ka(a),a&&X.test(a)?a.replace(V,Qa):a}function th(a){return a=Ka(a),a&&da.test(a)?a.replace(ca,Ra):a||"(?:)"}function vh(a,b,c){a=Ka(a),b=+b;var d=a.length;if(d>=b||!tb(b))return a;var e=(b-d)/2,f=rb(e),g=pb(e);return c=Hd("",g,c),c.slice(0,f)+a+c}function yh(a,b,c){return(c?be(a,b,c):null==b)?b=0:b&&(b=+b),a=Eh(a),yb(a,b||(ia.test(a)?16:10))}function zh(a,b){var c="";if(a=Ka(a),b=+b,b<1||!a||!tb(b))return c;do b%2&&(c+=a),b=rb(b/2),a+=a;while(b);return c}function Ch(a,b,c){return a=Ka(a),c=null==c?0:wb(c<0?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function Dh(b,c,d){var e=Ib.templateSettings;d&&be(b,c,d)&&(c=d=a),b=Ka(b),c=lc(mc({},d||c),e,kc);var i,j,f=lc(mc({},c.imports),e.imports,kc),g=ah(f),h=bd(f,g),k=0,l=c.interpolate||ma,m="__p += '",n=ya((c.escape||ma).source+"|"+l.source+"|"+(l===$?ga:ma).source+"|"+(c.evaluate||ma).source+"|$","g"),o="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++qa+"]")+"\n";b.replace(n,function(a,c,d,e,f,g){return d||(d=e),m+=b.slice(k,g).replace(na,Sa),c&&(i=!0,m+="' +\n__e("+c+") +\n'"),f&&(j=!0,m+="';\n"+f+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=g+a.length,a}),m+="';\n";var p=c.variable;p||(m="with (obj) {\n"+m+"\n}\n"),m=(j?m.replace(R,""):m).replace(S,"$1").replace(T,"$1;"),m="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(j?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var q=Kh(function(){return ua(g,o+"return "+m).apply(a,h)});if(q.source=m,vg(q))throw q;return q}function Eh(a,b,c){var d=a;return(a=Ka(a))?(c?be(d,b,c):null==b)?a.slice(Ya(a),Za(a)+1):(b+="",a.slice(La(a,b),Ma(a,b)+1)):a}function Fh(a,b,c){var d=a;return a=Ka(a),a?(c?be(d,b,c):null==b)?a.slice(Ya(a)):a.slice(La(a,b+"")):a}function Gh(a,b,c){var d=a;return a=Ka(a),a?(c?be(d,b,c):null==b)?a.slice(0,Za(a)+1):a.slice(0,Ma(a,b+"")+1):a}function Hh(b,c,d){d&&be(b,c,d)&&(c=a);var e=l,f=m;if(null!=c)if(yg(c)){var g="separator"in c?c.separator:g;e="length"in c?+c.length||0:e,f="omission"in c?Ka(c.omission):f}else e=+c||0;if(b=Ka(b),e>=b.length)return b;var h=e-f.length;if(h<1)return f;var i=b.slice(0,h);if(null==g)return i+f;if(Fg(g)){if(b.slice(h).search(g)){var j,k,n=b.slice(0,h);for(g.global||(g=ya(g.source,(ha.exec(g)||"")+"g")),g.lastIndex=0;j=g.exec(n);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(b.indexOf(g,h)!=h){var o=i.lastIndexOf(g);o>-1&&(i=i.slice(0,o))}return i+f}function Ih(a){return a=Ka(a),a&&W.test(a)?a.replace(U,$a):a}function Jh(b,c,d){return d&&be(b,c,d)&&(c=a),b=Ka(b),b.match(c||oa)||[]}function Lh(b,c,d){return d&&be(b,c,d)&&(c=a),Ua(b)?Oh(b):pc(b,c)}function Mh(a){return function(){return a}}function Nh(a){return a}function Oh(a){return Nc(qc(a,!0))}function Ph(a,b){return Oc(a,qc(b,!0))}function Sh(b,c,d){if(null==d){var e=yg(c),f=e?ah(c):a,g=f&&f.length?Hc(c,f):a;(g?g.length:e)||(g=!1,d=c,c=b,b=this)}g||(g=Hc(c,ah(c)));var h=!0,i=-1,j=xg(b),k=g.length;d===!1?h=!1:yg(d)&&"chain"in d&&(h=d.chain);for(;++i<k;){var l=g[i],m=c[l];b[l]=m,j&&(b.prototype[l]=function(a){return function(){var c=this.__chain__;if(h||c){var d=b(this.__wrapped__),e=d.__actions__=Zb(this.__actions__);return e.push({func:a,args:arguments,thisArg:b}),d.__chain__=c,d}return a.apply(b,ec([this.value()],arguments))}}(m))}return b}function Th(){return Fa._=db,this}function Uh(){}function Vh(a){return ce(a)?Rc(a):Sc(a)}function Wh(a){return function(b){return Ic(a,pe(b),b+"")}}function Xh(b,c,d){d&&be(b,c,d)&&(c=d=a),b=+b||0,d=null==d?1:+d||0,null==c?(c=b,b=0):c=+c||0;for(var e=-1,f=vb(pb((c-b)/(d||1)),0),g=E(f);++e<f;)g[e]=b,b+=d;return g}function Yh(a,b,c){if(a=rb(a),a<1||!tb(a))return[];var d=-1,e=E(wb(a,Cb));for(b=gd(b,c,1);++d<a;)d<Cb?e[d]=b(d):b(d);return e}function Zh(a){var b=++bb;return Ka(a)+b}function $h(a,b){return(+a||0)+(+b||0)}function ei(b,c,d){return d&&be(b,c,d)&&(c=a),c=Pd(c,d,3),1==c.length?ic(pg(b)?b:ne(b),c):_c(b,c)}A=A?ab.defaults(Fa.Object(),A,ab.pick(Fa,pa)):Fa;var E=A.Array,G=A.Date,ta=A.Error,ua=A.Function,va=A.Math,wa=A.Number,xa=A.Object,ya=A.RegExp,za=A.String,Aa=A.TypeError,Ba=E.prototype,Ca=xa.prototype,Da=za.prototype,Ea=ua.prototype.toString,Va=Ca.hasOwnProperty,bb=0,cb=Ca.toString,db=Fa._,eb=ya("^"+Ea.call(Va).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fb=A.ArrayBuffer,gb=A.clearTimeout,hb=A.parseFloat,ib=va.pow,jb=Ca.propertyIsEnumerable,kb=Vd(A,"Set"),lb=A.setTimeout,mb=Ba.splice,nb=A.Uint8Array,ob=Vd(A,"WeakMap"),pb=va.ceil,qb=Vd(xa,"create"),rb=va.floor,sb=Vd(E,"isArray"),tb=A.isFinite,ub=Vd(xa,"keys"),vb=va.max,wb=va.min,xb=Vd(G,"now"),yb=A.parseInt,zb=va.random,Ab=wa.NEGATIVE_INFINITY,Bb=wa.POSITIVE_INFINITY,Cb=4294967295,Db=Cb-1,Eb=Cb>>>1,Fb=9007199254740991,Gb=ob&&new ob,Hb={};Ib.support={};Ib.templateSettings={escape:Y,evaluate:Z,interpolate:$,variable:"",imports:{_:Ib}};var rc=function(){function b(){}return function(c){if(yg(c)){b.prototype=c;var d=new b;b.prototype=a}return d||{}}}(),uc=md(Fc),vc=md(Gc,!0),Cc=nd(),Dc=nd(!0),Wc=Gb?function(a,b){return Gb.set(a,b),a}:Nh,Qd=Gb?function(a){return Gb.get(a)}:Uh,Td=Rc("length"),le=function(){var a=0,b=0;return function(c,d){var e=Nf(),f=o-(e-b);if(b=e,f>0){if(++a>=n)return c}else a=0;return Wc(c,d)}}(),te=gg(function(a,b){return Ua(a)&&_d(a)?tc(a,Bc(b,!1,!0)):[]}),ze=wd(),Ae=wd(!0),Ge=gg(function(a){for(var b=a.length,c=b,d=E(k),e=Sd(),f=e===Ia,g=[];c--;){var h=a[c]=_d(h=a[c])?h:[];d[c]=f&&h.length>=120?pd(c&&h):null}var i=a[0],j=-1,k=i?i.length:0,l=d[0];a:for(;++j<k;)if(h=i[j],(l?Wb(l,h):e(g,h,0))<0){for(var c=b;--c;){var m=d[c];if((m?Wb(m,h):e(a[c],h,0))<0)continue a}l&&l.push(h),g.push(h)}return g}),Ke=gg(function(a,b){b=Bc(b);var c=nc(a,b);return Tc(a,b.sort(Ga)),c}),Oe=Kd(),Pe=Kd(!0),Ue=gg(function(a){return ad(Bc(a,!1,!0))}),Ye=gg(function(a,b){return _d(a)?tc(a,b):[]}),$e=gg(We),af=gg(function(b){var c=b.length,d=c>2?b[c-2]:a,e=c>1?b[c-1]:a;return c>2&&"function"==typeof d?c-=2:(d=c>1&&"function"==typeof e?(--c,e):a,e=a),b.length=c,Xe(b,d,e)}),gf=gg(function(a){return a=Bc(a),this.thru(function(b){return Yb(pg(b)?b:[oe(b)],a)})}),mf=gg(function(a,b){return nc(a,Bc(b))}),nf=kd(function(a,b,c){Va.call(a,c)?++a[c]:a[c]=1}),qf=vd(uc),rf=vd(vc,!0),tf=zd($b,uc),uf=zd(_b,vc),vf=kd(function(a,b,c){Va.call(a,c)?a[c].push(b):a[c]=[b]}),xf=kd(function(a,b,c){a[c]=b}),yf=gg(function(b,c,d){var e=-1,f="function"==typeof c,g=ce(c),h=_d(b)?E(b.length):[];return uc(b,function(b){var i=f?c:g&&null!=b?b[c]:a;h[++e]=i?i.apply(b,d):$d(b,c,d)}),h}),Af=kd(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Cf=Fd(fc,uc),Df=Fd(gc,vc),Kf=gg(function(a,b){if(null==a)return[];var c=b[2];return c&&be(b[0],b[1],c)&&(b.length=1),$c(a,Bc(b),[])}),Nf=xb||function(){return(new G).getTime()},Rf=gg(function(a,b,d){var e=c;if(d.length){var f=Wa(d,Rf.placeholder);e|=h}return Ld(a,e,b,d,f)}),Sf=gg(function(a,b){b=b.length?Bc(b):Yg(a);for(var d=-1,e=b.length;++d<e;){var f=b[d];a[f]=Ld(a[f],c,a)}return a}),Tf=gg(function(a,b,e){var f=c|d;if(e.length){var g=Wa(e,Tf.placeholder);f|=h}return Ld(b,f,a,e,g)}),Uf=sd(f),Vf=sd(g),Xf=gg(function(a,b){return sc(a,1,b)}),Yf=gg(function(a,b,c){return sc(a,b,c)}),Zf=yd(),$f=yd(!0),ag=gg(function(a,b){if(b=Bc(b),"function"!=typeof a||!ac(b,Ja))throw new Aa(s);var c=b.length;return gg(function(d){for(var e=wb(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),dg=Ed(h),eg=Ed(i),fg=gg(function(b,c){return Ld(b,k,a,a,a,Bc(c))}),pg=sb||function(a){return Ua(a)&&ee(a.length)&&cb.call(a)==v},Ng=ld(Pc),Og=ld(function(a,b,c){return c?lc(a,b,c):mc(a,b)}),Qg=td(Og,jc),Rg=td(Ng,he),Sg=xd(Fc),Tg=xd(Gc),Ug=Ad(Cc),Vg=Ad(Dc),Wg=Bd(Fc),Xg=Bd(Gc),ah=ub?function(b){var c=null==b?a:b.constructor;return"function"==typeof c&&c.prototype===b||"function"!=typeof b&&_d(b)?me(b):yg(b)?ub(b):[]}:me,ch=Cd(!0),dh=Cd(),eh=gg(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=dc(Bc(b),za);return ie(a,tc(bh(a),b))}var c=gd(b[0],b[1],3);return je(a,function(a,b,d){return!c(a,b,d)})}),gh=gg(function(a,b){return null==a?{}:"function"==typeof b[0]?je(a,gd(b[0],b[1],3)):ie(a,Bc(b))}),oh=qd(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),uh=qd(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),wh=Dd(),xh=Dd(!0),Ah=qd(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Bh=qd(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Kh=gg(function(b,c){try{return b.apply(a,c)}catch(a){return vg(a)?a:new ta(a)}}),Qh=gg(function(a,b){return function(c){return $d(c,a,b)}}),Rh=gg(function(a,b){return function(c){return $d(a,c,b)}}),_h=Jd("ceil"),ai=Jd("floor"),bi=ud(mg,Ab),ci=ud(Jg,Bb),di=Jd("round");return Ib.prototype=Jb.prototype,Kb.prototype=rc(Jb.prototype),Kb.prototype.constructor=Kb,Mb.prototype=rc(Jb.prototype),Mb.prototype.constructor=Mb,Qb.prototype.delete=Rb,Qb.prototype.get=Sb,Qb.prototype.has=Tb,Qb.prototype.set=Ub,Vb.prototype.push=Xb,_f.Cache=Qb,Ib.after=Of,Ib.ary=Pf,Ib.assign=Og,Ib.at=mf,Ib.before=Qf,Ib.bind=Rf,Ib.bindAll=Sf,Ib.bindKey=Tf,Ib.callback=Lh,Ib.chain=bf,Ib.chunk=re,Ib.compact=se,Ib.constant=Mh,Ib.countBy=nf,Ib.create=Pg,Ib.curry=Uf,Ib.curryRight=Vf,Ib.debounce=Wf,Ib.defaults=Qg,Ib.defaultsDeep=Rg,Ib.defer=Xf,Ib.delay=Yf,Ib.difference=te,Ib.drop=ue,Ib.dropRight=ve,Ib.dropRightWhile=we,Ib.dropWhile=xe,Ib.fill=ye,Ib.filter=pf,Ib.flatten=Ce,Ib.flattenDeep=De,Ib.flow=Zf,Ib.flowRight=$f,Ib.forEach=tf,Ib.forEachRight=uf,Ib.forIn=Ug,Ib.forInRight=Vg,Ib.forOwn=Wg,Ib.forOwnRight=Xg,Ib.functions=Yg,Ib.groupBy=vf,Ib.indexBy=xf,Ib.initial=Fe,Ib.intersection=Ge,Ib.invert=_g,Ib.invoke=yf,Ib.keys=ah,Ib.keysIn=bh,Ib.map=zf,Ib.mapKeys=ch,Ib.mapValues=dh,Ib.matches=Oh,Ib.matchesProperty=Ph,Ib.memoize=_f,Ib.merge=Ng,Ib.method=Qh,Ib.methodOf=Rh,Ib.mixin=Sh,Ib.modArgs=ag,Ib.negate=bg,Ib.omit=eh,Ib.once=cg,Ib.pairs=fh,Ib.partial=dg,Ib.partialRight=eg,Ib.partition=Af,Ib.pick=gh,Ib.pluck=Bf,Ib.property=Vh,Ib.propertyOf=Wh,Ib.pull=Je,Ib.pullAt=Ke,Ib.range=Xh,Ib.rearg=fg,Ib.reject=Ef,Ib.remove=Le,Ib.rest=Me,Ib.restParam=gg,Ib.set=ih,Ib.shuffle=Gf,Ib.slice=Ne,Ib.sortBy=Jf,Ib.sortByAll=Kf,Ib.sortByOrder=Lf,Ib.spread=hg,Ib.take=Qe,Ib.takeRight=Re,Ib.takeRightWhile=Se,Ib.takeWhile=Te,Ib.tap=cf,Ib.throttle=ig,Ib.thru=df,Ib.times=Yh,Ib.toArray=Lg,Ib.toPlainObject=Mg,Ib.transform=jh,Ib.union=Ue,Ib.uniq=Ve,Ib.unzip=We,Ib.unzipWith=Xe,Ib.values=kh,Ib.valuesIn=lh,Ib.where=Mf,Ib.without=Ye,Ib.wrap=jg,Ib.xor=Ze,Ib.zip=$e,Ib.zipObject=_e,Ib.zipWith=af,Ib.backflow=$f,Ib.collect=zf,Ib.compose=$f,Ib.each=tf,Ib.eachRight=uf,Ib.extend=Og,Ib.iteratee=Lh,Ib.methods=Yg,Ib.object=_e,Ib.select=pf,Ib.tail=Me,Ib.unique=Ve,Sh(Ib,Ib),Ib.add=$h,Ib.attempt=Kh,Ib.camelCase=oh,Ib.capitalize=ph,Ib.ceil=_h,Ib.clone=kg,Ib.cloneDeep=lg,Ib.deburr=qh,Ib.endsWith=rh,Ib.escape=sh,Ib.escapeRegExp=th,Ib.every=of,Ib.find=qf,Ib.findIndex=ze,Ib.findKey=Sg,Ib.findLast=rf,Ib.findLastIndex=Ae,Ib.findLastKey=Tg,Ib.findWhere=sf,Ib.first=Be,Ib.floor=ai,Ib.get=Zg,Ib.gt=mg,Ib.gte=ng,Ib.has=$g,Ib.identity=Nh,Ib.includes=wf,Ib.indexOf=Ee,Ib.inRange=mh,Ib.isArguments=og,Ib.isArray=pg,Ib.isBoolean=qg,Ib.isDate=rg,Ib.isElement=sg,Ib.isEmpty=tg,Ib.isEqual=ug,Ib.isError=vg,Ib.isFinite=wg,Ib.isFunction=xg,Ib.isMatch=zg,Ib.isNaN=Ag,Ib.isNative=Bg,Ib.isNull=Cg,Ib.isNumber=Dg,Ib.isObject=yg,Ib.isPlainObject=Eg,Ib.isRegExp=Fg,Ib.isString=Gg,Ib.isTypedArray=Hg,Ib.isUndefined=Ig,Ib.kebabCase=uh,Ib.last=He,Ib.lastIndexOf=Ie,Ib.lt=Jg,Ib.lte=Kg,Ib.max=bi,Ib.min=ci,Ib.noConflict=Th,Ib.noop=Uh,Ib.now=Nf,Ib.pad=vh,Ib.padLeft=wh,Ib.padRight=xh,Ib.parseInt=yh,Ib.random=nh,Ib.reduce=Cf,Ib.reduceRight=Df,Ib.repeat=zh,Ib.result=hh,Ib.round=di,Ib.runInContext=_a,Ib.size=Hf,Ib.snakeCase=Ah,Ib.some=If,Ib.sortedIndex=Oe,Ib.sortedLastIndex=Pe,Ib.startCase=Bh,Ib.startsWith=Ch,Ib.sum=ei,Ib.template=Dh,Ib.trim=Eh,Ib.trimLeft=Fh,Ib.trimRight=Gh,Ib.trunc=Hh,Ib.unescape=Ih,Ib.uniqueId=Zh,Ib.words=Jh,Ib.all=of,Ib.any=If,Ib.contains=wf,Ib.eq=ug,Ib.detect=qf,Ib.foldl=Cf,Ib.foldr=Df,Ib.head=Be,Ib.include=wf,Ib.inject=Cf,Sh(Ib,function(){var a={};return Fc(Ib,function(b,c){Ib.prototype[c]||(a[c]=b)}),a}(),!1),Ib.sample=Ff,Ib.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Ff(b,a)}):Ff(this.value())},Ib.VERSION=b,$b(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Ib[a].placeholder=Ib}),$b(["drop","take"],function(a,b){Mb.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Mb(this);c=null==c?1:vb(rb(c)||0,0);var e=this.clone();return d?e.__takeCount__=wb(e.__takeCount__,c):e.__views__.push({size:c,type:a+(e.__dir__<0?"Right":"")}),e},Mb.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),$b(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=r;Mb.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:Pd(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),$b(["first","last"],function(a,b){var c="take"+(b?"Right":"");Mb.prototype[a]=function(){return this[c](1).value()[0]}}),$b(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Mb.prototype[a]=function(){return this.__filtered__?new Mb(this):this[c](1)}}),$b(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Nc:Vh;Mb.prototype[a]=function(a){return this[c](d(a))}}),Mb.prototype.compact=function(){return this.filter(Nh)},Mb.prototype.reject=function(a,b){return a=Pd(a,b,1),this.filter(function(b){return!a(b)})},Mb.prototype.slice=function(b,c){b=null==b?0:+b||0;var d=this;return d.__filtered__&&(b>0||c<0)?new Mb(d):(b<0?d=d.takeRight(-b):b&&(d=d.drop(b)),c!==a&&(c=+c||0,d=c<0?d.dropRight(-c):d.take(c-b)),d)},Mb.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Mb.prototype.toArray=function(){return this.take(Bb)},Fc(Mb.prototype,function(b,c){var d=/^(?:filter|map|reject)|While$/.test(c),e=/^(?:first|last)$/.test(c),f=Ib[e?"take"+("last"==c?"Right":""):c];f&&(Ib.prototype[c]=function(){var c=e?[1]:arguments,g=this.__chain__,h=this.__wrapped__,i=!!this.__actions__.length,j=h instanceof Mb,k=c[0],l=j||pg(h);l&&d&&"function"==typeof k&&1!=k.length&&(j=l=!1);var m=function(b){return e&&g?f(b,1)[0]:f.apply(a,ec([b],c))},n={func:df,args:[m],thisArg:a},o=j&&!i;if(e&&!g)return o?(h=h.clone(),h.__actions__.push(n),b.call(h)):f.call(a,this.value())[0];if(!e&&l){h=o?h:new Mb(this);var p=b.apply(h,c);return p.__actions__.push(n),new Kb(p,g)}return this.thru(m)})}),$b(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var b=(/^(?:replace|split)$/.test(a)?Da:Ba)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);Ib.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),Fc(Mb.prototype,function(a,b){var c=Ib[b];if(c){var d=c.name+"",e=Hb[d]||(Hb[d]=[]);e.push({name:b,func:c})}}),Hb[Gd(a,d).name]=[{name:"wrapper",func:a}],Mb.prototype.clone=Nb,Mb.prototype.reverse=Ob,Mb.prototype.value=Pb,Ib.prototype.chain=ef,Ib.prototype.commit=ff,Ib.prototype.concat=gf,Ib.prototype.plant=hf,Ib.prototype.reverse=jf,Ib.prototype.toString=kf,Ib.prototype.run=Ib.prototype.toJSON=Ib.prototype.valueOf=Ib.prototype.value=lf,Ib.prototype.collect=Ib.prototype.map,Ib.prototype.head=Ib.prototype.first,Ib.prototype.select=Ib.prototype.filter,Ib.prototype.tail=Ib.prototype.rest,Ib}var a,b="3.10.1",c=1,d=2,e=4,f=8,g=16,h=32,i=64,j=128,k=256,l=30,m="...",n=150,o=16,p=200,q=1,r=2,s="Expected a function",t="__lodash_placeholder__",u="[object Arguments]",v="[object Array]",w="[object Boolean]",x="[object Date]",y="[object Error]",z="[object Function]",A="[object Map]",B="[object Number]",C="[object Object]",D="[object RegExp]",E="[object Set]",F="[object String]",G="[object WeakMap]",H="[object ArrayBuffer]",I="[object Float32Array]",J="[object Float64Array]",K="[object Int8Array]",L="[object Int16Array]",M="[object Int32Array]",N="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",Q="[object Uint32Array]",R=/\b__p \+= '';/g,S=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39|#96);/g,V=/[&<>"'`]/g,W=RegExp(U.source),X=RegExp(V.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,aa=/^\w*$/,ba=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ca=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,da=RegExp(ca.source),ea=/[\u0300-\u036f\ufe20-\ufe23]/g,fa=/\\(\\)?/g,ga=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ha=/\w*$/,ia=/^0[xX]/,ja=/^\[object .+?Constructor\]$/,ka=/^\d+$/,la=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ma=/($^)/,na=/['\n\r\u2028\u2029\\]/g,oa=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),pa=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],qa=-1,ra={};ra[I]=ra[J]=ra[K]=ra[L]=ra[M]=ra[N]=ra[O]=ra[P]=ra[Q]=!0,ra[u]=ra[v]=ra[H]=ra[w]=ra[x]=ra[y]=ra[z]=ra[A]=ra[B]=ra[C]=ra[D]=ra[E]=ra[F]=ra[G]=!1;var sa={};sa[u]=sa[v]=sa[H]=sa[w]=sa[x]=sa[I]=sa[J]=sa[K]=sa[L]=sa[M]=sa[B]=sa[C]=sa[D]=sa[F]=sa[N]=sa[O]=sa[P]=sa[Q]=!0,sa[y]=sa[z]=sa[A]=sa[E]=sa[G]=!1;var ta={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},va={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},wa={function:!0,object:!0},xa={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},ya={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},za=wa[typeof exports]&&exports&&!exports.nodeType&&exports,Aa=wa[typeof module]&&module&&!module.nodeType&&module,Ba=za&&Aa&&"object"==typeof global&&global&&global.Object&&global,Ca=wa[typeof self]&&self&&self.Object&&self,Da=wa[typeof window]&&window&&window.Object&&window,Ea=Aa&&Aa.exports===za&&za,Fa=Ba||Da!==(this&&this.window)&&Da||Ca||this,ab=_a();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Fa._=ab,define(function(){return ab})):za&&Aa?Ea?(Aa.exports=ab)._=ab:za._=ab:Fa._=ab}.call(this),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){b.graphlib=a("./index")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./index":2}],2:[function(a,b,c){var d=a("./lib");b.exports={Graph:d.Graph,json:a("./lib/json"),alg:a("./lib/alg"),version:d.version}},{"./lib":18,"./lib/alg":9,"./lib/json":19}],3:[function(a,b,c){function e(a){function f(c){d.has(b,c)||(b[c]=!0,e.push(c),d.each(a.successors(c),f),d.each(a.predecessors(c),f))}var e,b={},c=[];return d.each(a.nodes(),function(a){e=[],f(a),e.length&&c.push(e)}),c}var d=a("../lodash");b.exports=e},{"../lodash":20}],4:[function(a,b,c){function e(a,b,c){d.isArray(b)||(b=[b]);var e=[],g={};return d.each(b,function(b){if(!a.hasNode(b))throw new Error("Graph does not have node: "+b);f(a,b,"post"===c,g,e)}),e}function f(a,b,c,e,g){d.has(e,b)||(e[b]=!0,c||g.push(b),d.each(a.neighbors(b),function(b){f(a,b,c,e,g)}),c&&g.push(b))}var d=a("../lodash");b.exports=e},{"../lodash":20}],5:[function(a,b,c){function f(a,b,c){return e.transform(a.nodes(),function(e,f){e[f]=d(a,f,b,c)},{})}var d=a("./dijkstra"),e=a("../lodash");b.exports=f},{"../lodash":20,"./dijkstra":6}],6:[function(a,b,c){function g(a,b,c,d){return h(a,String(b),c||f,d||function(b){return a.outEdges(b)})}function h(a,b,c,d){var h,i,f={},g=new e,j=function(a){var b=a.v!==h?a.v:a.w,d=f[b],e=c(a),j=i.distance+e;if(e<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+a+" Weight: "+e);j<d.distance&&(d.distance=j,d.predecessor=h,g.decrease(b,j))};for(a.nodes().forEach(function(a){var c=a===b?0:Number.POSITIVE_INFINITY;f[a]={distance:c},g.add(a,c)});g.size()>0&&(h=g.removeMin(),i=f[h],i.distance!==Number.POSITIVE_INFINITY);)d(h).forEach(j);return f}var d=a("../lodash"),e=a("../data/priority-queue");b.exports=g;var f=d.constant(1)},{"../data/priority-queue":16,"../lodash":20}],7:[function(a,b,c){function f(a){return d.filter(e(a),function(b){return b.length>1||1===b.length&&a.hasEdge(b[0],b[0])})}var d=a("../lodash"),e=a("./tarjan");b.exports=f},{"../lodash":20,"./tarjan":14}],8:[function(a,b,c){function f(a,b,c){return g(a,b||e,c||function(b){return a.outEdges(b)})}function g(a,b,c){var d={},e=a.nodes();return e.forEach(function(a){d[a]={},d[a][a]={distance:0},e.forEach(function(b){a!==b&&(d[a][b]={distance:Number.POSITIVE_INFINITY})}),c(a).forEach(function(c){var e=c.v===a?c.w:c.v,f=b(c);d[a][e]={distance:f,predecessor:a}})}),e.forEach(function(a){var b=d[a];e.forEach(function(c){var f=d[c];e.forEach(function(c){var d=f[a],e=b[c],g=f[c],h=d.distance+e.distance;h<g.distance&&(g.distance=h,g.predecessor=e.predecessor)})})}),d}var d=a("../lodash");b.exports=f;var e=d.constant(1)},{"../lodash":20}],9:[function(a,b,c){b.exports={components:a("./components"),dijkstra:a("./dijkstra"),dijkstraAll:a("./dijkstra-all"),findCycles:a("./find-cycles"),floydWarshall:a("./floyd-warshall"),isAcyclic:a("./is-acyclic"),postorder:a("./postorder"),preorder:a("./preorder"),prim:a("./prim"),tarjan:a("./tarjan"),topsort:a("./topsort")}},{"./components":3,"./dijkstra":6,"./dijkstra-all":5,"./find-cycles":7,"./floyd-warshall":8,"./is-acyclic":10,"./postorder":11,"./preorder":12,"./prim":13,"./tarjan":14,"./topsort":15}],10:[function(a,b,c){function e(a){try{d(a)}catch(a){if(a instanceof d.CycleException)return!1;throw a}return!0}var d=a("./topsort");b.exports=e},{"./topsort":15}],11:[function(a,b,c){function e(a,b){return d(a,b,"post")}var d=a("./dfs");b.exports=e},{"./dfs":4}],12:[function(a,b,c){function e(a,b){return d(a,b,"pre")}var d=a("./dfs");b.exports=e},{"./dfs":4}],13:[function(a,b,c){function g(a,b){function j(a){var c=a.v===i?a.w:a.v,d=h.priority(c);if(void 0!==d){var e=b(a);e<d&&(g[c]=i,h.decrease(c,e))}}var i,c=new e,g={},h=new f;if(0===a.nodeCount())return c;d.each(a.nodes(),function(a){h.add(a,Number.POSITIVE_INFINITY),c.setNode(a)}),h.decrease(a.nodes()[0],0);for(var k=!1;h.size()>0;){if(i=h.removeMin(),d.has(g,i))c.setEdge(i,g[i]);else{if(k)throw new Error("Input graph is not connected: "+a);k=!0}a.nodeEdges(i).forEach(j)}return c}var d=a("../lodash"),e=a("../graph"),f=a("../data/priority-queue");b.exports=g},{"../data/priority-queue":16,"../graph":17,"../lodash":20}],14:[function(a,b,c){function e(a){function g(h){var i=e[h]={onStack:!0,lowlink:b,index:b++};if(c.push(h),a.successors(h).forEach(function(a){d.has(e,a)?e[a].onStack&&(i.lowlink=Math.min(i.lowlink,e[a].index)):(g(a),i.lowlink=Math.min(i.lowlink,e[a].lowlink))}),i.lowlink===i.index){var k,j=[];do k=c.pop(),e[k].onStack=!1,j.push(k);while(h!==k);f.push(j)}}var b=0,c=[],e={},f=[];return a.nodes().forEach(function(a){d.has(e,a)||g(a)}),f}var d=a("../lodash");b.exports=e},{"../lodash":20}],15:[function(a,b,c){function e(a){function g(h){if(d.has(c,h))throw new f;d.has(b,h)||(c[h]=!0,b[h]=!0,d.each(a.predecessors(h),g),delete c[h],e.push(h))}var b={},c={},e=[];if(d.each(a.sinks(),g),d.size(b)!==a.nodeCount())throw new f;return e}function f(){}var d=a("../lodash");b.exports=e,e.CycleException=f},{"../lodash":20}],16:[function(a,b,c){function e(){this._arr=[],this._keyIndices={}}var d=a("../lodash");b.exports=e,e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(a){return a.key})},e.prototype.has=function(a){return d.has(this._keyIndices,a)},e.prototype.priority=function(a){var b=this._keyIndices[a];if(void 0!==b)return this._arr[b].priority},e.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(a,b){var c=this._keyIndices;if(a=String(a),!d.has(c,a)){var e=this._arr,f=e.length;return c[a]=f,e.push({key:a,priority:b}),this._decrease(f),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var a=this._arr.pop();return delete this._keyIndices[a.key],this._heapify(0),a.key},e.prototype.decrease=function(a,b){var c=this._keyIndices[a];if(b>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+this._arr[c].priority+" New: "+b);this._arr[c].priority=b,this._decrease(c);
},e.prototype._heapify=function(a){var b=this._arr,c=2*a,d=c+1,e=a;c<b.length&&(e=b[c].priority<b[e].priority?c:e,d<b.length&&(e=b[d].priority<b[e].priority?d:e),e!==a&&(this._swap(a,e),this._heapify(e)))},e.prototype._decrease=function(a){for(var d,b=this._arr,c=b[a].priority;0!==a&&(d=a>>1,!(b[d].priority<c));)this._swap(a,d),a=d},e.prototype._swap=function(a,b){var c=this._arr,d=this._keyIndices,e=c[a],f=c[b];c[a]=f,c[b]=e,d[f.key]=a,d[e.key]=b}},{"../lodash":20}],17:[function(a,b,c){"use strict";function h(a){this._isDirected=!d.has(a,"directed")||a.directed,this._isMultigraph=!!d.has(a,"multigraph")&&a.multigraph,this._isCompound=!!d.has(a,"compound")&&a.compound,this._label=void 0,this._defaultNodeLabelFn=d.constant(void 0),this._defaultEdgeLabelFn=d.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[f]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(a,b){a[b]?a[b]++:a[b]=1}function j(a,b){--a[b]||delete a[b]}function k(a,b,c,f){var h=""+b,i=""+c;if(!a&&h>i){var j=h;h=i,i=j}return h+g+i+g+(d.isUndefined(f)?e:f)}function l(a,b,c,d){var e=""+b,f=""+c;if(!a&&e>f){var g=e;e=f,f=g}var h={v:e,w:f};return d&&(h.name=d),h}function m(a,b){return k(a,b.v,b.w,b.name)}var d=a("./lodash");b.exports=h;var e="\0",f="\0",g="";h.prototype._nodeCount=0,h.prototype._edgeCount=0,h.prototype.isDirected=function(){return this._isDirected},h.prototype.isMultigraph=function(){return this._isMultigraph},h.prototype.isCompound=function(){return this._isCompound},h.prototype.setGraph=function(a){return this._label=a,this},h.prototype.graph=function(){return this._label},h.prototype.setDefaultNodeLabel=function(a){return d.isFunction(a)||(a=d.constant(a)),this._defaultNodeLabelFn=a,this},h.prototype.nodeCount=function(){return this._nodeCount},h.prototype.nodes=function(){return d.keys(this._nodes)},h.prototype.sources=function(){return d.filter(this.nodes(),function(a){return d.isEmpty(this._in[a])},this)},h.prototype.sinks=function(){return d.filter(this.nodes(),function(a){return d.isEmpty(this._out[a])},this)},h.prototype.setNodes=function(a,b){var c=arguments;return d.each(a,function(a){c.length>1?this.setNode(a,b):this.setNode(a)},this),this},h.prototype.setNode=function(a,b){return d.has(this._nodes,a)?(arguments.length>1&&(this._nodes[a]=b),this):(this._nodes[a]=arguments.length>1?b:this._defaultNodeLabelFn(a),this._isCompound&&(this._parent[a]=f,this._children[a]={},this._children[f][a]=!0),this._in[a]={},this._preds[a]={},this._out[a]={},this._sucs[a]={},++this._nodeCount,this)},h.prototype.node=function(a){return this._nodes[a]},h.prototype.hasNode=function(a){return d.has(this._nodes,a)},h.prototype.removeNode=function(a){var b=this;if(d.has(this._nodes,a)){var c=function(a){b.removeEdge(b._edgeObjs[a])};delete this._nodes[a],this._isCompound&&(this._removeFromParentsChildList(a),delete this._parent[a],d.each(this.children(a),function(a){this.setParent(a)},this),delete this._children[a]),d.each(d.keys(this._in[a]),c),delete this._in[a],delete this._preds[a],d.each(d.keys(this._out[a]),c),delete this._out[a],delete this._sucs[a],--this._nodeCount}return this},h.prototype.setParent=function(a,b){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d.isUndefined(b))b=f;else{b+="";for(var c=b;!d.isUndefined(c);c=this.parent(c))if(c===a)throw new Error("Setting "+b+" as parent of "+a+" would create create a cycle");this.setNode(b)}return this.setNode(a),this._removeFromParentsChildList(a),this._parent[a]=b,this._children[b][a]=!0,this},h.prototype._removeFromParentsChildList=function(a){delete this._children[this._parent[a]][a]},h.prototype.parent=function(a){if(this._isCompound){var b=this._parent[a];if(b!==f)return b}},h.prototype.children=function(a){if(d.isUndefined(a)&&(a=f),this._isCompound){var b=this._children[a];if(b)return d.keys(b)}else{if(a===f)return this.nodes();if(this.hasNode(a))return[]}},h.prototype.predecessors=function(a){var b=this._preds[a];if(b)return d.keys(b)},h.prototype.successors=function(a){var b=this._sucs[a];if(b)return d.keys(b)},h.prototype.neighbors=function(a){var b=this.predecessors(a);if(b)return d.union(b,this.successors(a))},h.prototype.filterNodes=function(a){function f(a){var d=c.parent(a);return void 0===d||b.hasNode(d)?(e[a]=d,d):d in e?e[d]:f(d)}var b=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});b.setGraph(this.graph()),d.each(this._nodes,function(c,d){a(d)&&b.setNode(d,c)},this),d.each(this._edgeObjs,function(a){b.hasNode(a.v)&&b.hasNode(a.w)&&b.setEdge(a,this.edge(a))},this);var c=this,e={};return this._isCompound&&d.each(b.nodes(),function(a){b.setParent(a,f(a))}),b},h.prototype.setDefaultEdgeLabel=function(a){return d.isFunction(a)||(a=d.constant(a)),this._defaultEdgeLabelFn=a,this},h.prototype.edgeCount=function(){return this._edgeCount},h.prototype.edges=function(){return d.values(this._edgeObjs)},h.prototype.setPath=function(a,b){var c=this,e=arguments;return d.reduce(a,function(a,d){return e.length>1?c.setEdge(a,d,b):c.setEdge(a,d),d}),this},h.prototype.setEdge=function(){var a,b,c,e,f=!1,g=arguments[0];"object"==typeof g&&null!==g&&"v"in g?(a=g.v,b=g.w,c=g.name,2===arguments.length&&(e=arguments[1],f=!0)):(a=g,b=arguments[1],c=arguments[3],arguments.length>2&&(e=arguments[2],f=!0)),a=""+a,b=""+b,d.isUndefined(c)||(c=""+c);var h=k(this._isDirected,a,b,c);if(d.has(this._edgeLabels,h))return f&&(this._edgeLabels[h]=e),this;if(!d.isUndefined(c)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(a),this.setNode(b),this._edgeLabels[h]=f?e:this._defaultEdgeLabelFn(a,b,c);var j=l(this._isDirected,a,b,c);return a=j.v,b=j.w,Object.freeze(j),this._edgeObjs[h]=j,i(this._preds[b],a),i(this._sucs[a],b),this._in[b][h]=j,this._out[a][h]=j,this._edgeCount++,this},h.prototype.edge=function(a,b,c){var d=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c);return this._edgeLabels[d]},h.prototype.hasEdge=function(a,b,c){var e=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c);return d.has(this._edgeLabels,e)},h.prototype.removeEdge=function(a,b,c){var d=1===arguments.length?m(this._isDirected,arguments[0]):k(this._isDirected,a,b,c),e=this._edgeObjs[d];return e&&(a=e.v,b=e.w,delete this._edgeLabels[d],delete this._edgeObjs[d],j(this._preds[b],a),j(this._sucs[a],b),delete this._in[b][d],delete this._out[a][d],this._edgeCount--),this},h.prototype.inEdges=function(a,b){var c=this._in[a];if(c){var e=d.values(c);return b?d.filter(e,function(a){return a.v===b}):e}},h.prototype.outEdges=function(a,b){var c=this._out[a];if(c){var e=d.values(c);return b?d.filter(e,function(a){return a.w===b}):e}},h.prototype.nodeEdges=function(a,b){var c=this.inEdges(a,b);if(c)return c.concat(this.outEdges(a,b))}},{"./lodash":20}],18:[function(a,b,c){b.exports={Graph:a("./graph"),version:a("./version")}},{"./graph":17,"./version":21}],19:[function(a,b,c){function f(a){var b={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:g(a),edges:h(a)};return d.isUndefined(a.graph())||(b.value=d.clone(a.graph())),b}function g(a){return d.map(a.nodes(),function(b){var c=a.node(b),e=a.parent(b),f={v:b};return d.isUndefined(c)||(f.value=c),d.isUndefined(e)||(f.parent=e),f})}function h(a){return d.map(a.edges(),function(b){var c=a.edge(b),e={v:b.v,w:b.w};return d.isUndefined(b.name)||(e.name=b.name),d.isUndefined(c)||(e.value=c),e})}function i(a){var b=new e(a.options).setGraph(a.value);return d.each(a.nodes,function(a){b.setNode(a.v,a.value),a.parent&&b.setParent(a.v,a.parent)}),d.each(a.edges,function(a){b.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),b}var d=a("./lodash"),e=a("./graph");b.exports={write:f,read:i}},{"./graph":17,"./lodash":20}],20:[function(a,b,c){var d;if("function"==typeof a)try{d=a("lodash")}catch(a){}d||(d=window._),b.exports=d},{lodash:void 0}],21:[function(a,b,c){b.exports="1.0.7"},{}]},{},[1]);var tf;!function(a){function c(a,b){var c=Date.now(),d=b();return console.log(a,":",Date.now()-c,"ms"),d}function d(a,b,c){return{setMessage:function(b){a.setMessage(c+" : "+b)},updateProgress:function(c){a.updateProgress(c*b/100)},reportError:function(b){a.reportError(c+" : "+b)}}}function e(c,d,e,f){return new Promise(function(g,h){f.setMessage(c),setTimeout(function(){try{var b=a.time(c,e);f.updateProgress(d),g(b)}catch(a){h(b)}},b)})}function f(a){return a.replace(/([:.\[\],\/\\\(\)])/g,"\\$1")}var b=20;a.time=c,a.getSubtaskTracker=d,a.runAsyncTask=e,a.escapeQuerySelector=f}(tf||(tf={}));var tf;!function(a){var b;!function(b){function i(a,b){return void 0===b&&(b={}),new l(a,b)}function j(a,c){_.each(c.devStats,function(c){_.each(c.nodeStats,function(c){var d=c.nodeName in a.nodes?c.nodeName:c.nodeName+b.NAMESPACE_DELIM+"("+c.nodeName+")";if(d in a.nodes){var e=0;c.memory&&_.each(c.memory,function(a){a.totalBytes&&(e+=Number(a.totalBytes))});var f=null;c.output&&(f=_.map(c.output,function(a){return _.map(a.tensorDescription.shape.dim,function(a){return Number(a.size)})})),a.nodes[d].stats=new k(e,Number(c.allEndRelMicros),f)}})})}function m(a,b){return new n(a,b)}function o(a,b,c,d,e){return new q(a,b,c,d,e)}function p(a,b,c,d,e){var f="undefined"!=typeof d&&"undefined"!=typeof e?"["+d+"-"+e+"]":"#",g=a+f+b;return(c?c+"/":"")+g}function r(a){return _.reduce(a,function(a,b){var c="^"===b[0],d=b.lastIndexOf(":"),e=d!==-1&&b.length-d>1&&!/\D/.test(b.substring(d+1))?d:b.length,f=b.substring(c?1:0,e);return 0!==a.length&&f===a[a.length-1].name||a.push({name:f,hasNumberPart:e!==b.length,isControlDependency:c}),a},[])}function s(b,c,d){var e={},g={},i=u(c.inEmbeddingTypes),j=u(c.outEmbeddingTypes),k=[],l=new Array(b.length);return a.runAsyncTask("Normalizing names",30,function(){var a=new Array(b.length),c=0;return _.each(b,function(b){var d=r(b.input),f=new h(b,d);return i(f)?(k.push(f.name),void(e[f.name]=f)):j(f)?(k.push(f.name),void _.each(f.inputs,function(a){var b=a.name;g[b]=g[b]||[],g[b].push(f)})):(a[c]=f,l[c]=f.name,void c++)}),a.splice(c),l.splice(c),a},d).then(function(b){return a.runAsyncTask("Building the data structure",70,function(){var a=w(l,k),d=new f;return _.each(b,function(b){var c=a[b.name]||b.name;d.nodes[c]=b,b.name in g&&(b.outEmbeddings=g[b.name],_.each(b.outEmbeddings,function(b){b.name=a[b.name]||b.name})),b.name=c}),_.each(b,function(b){_.each(b.inputs,function(f,g){var h=f.name;h in e?b.inEmbeddings.push(e[h]):d.edges.push({v:a[h]||h,w:b.name,isControlDependency:f.isControlDependency,isReferenceEdge:c.refEdges[b.op+" "+g]===!0})})}),_.each(e,function(b,c){b.name=a[b.name]||b.name}),d},d)}).catch(function(a){throw new Error("Failure creating graph")})}function t(a,b,c){void 0===c&&(c={});var d=new graphlib.Graph(c);return d.setGraph({name:a,rankdir:"BT",type:b}),d}function u(a){return function(b){for(var c=0;c<a.length;c++){var d=new RegExp(a[c]);if(b.op.match(d))return!0}return!1}}function v(a){var c=a.split(b.NAMESPACE_DELIM);return a+b.NAMESPACE_DELIM+"("+c[c.length-1]+")"}function w(a,c){var d={},e={};a.sort();for(var f=0;f<a.length-1;++f){var g=a[f];_.each(z(g).slice(0,-1),function(a){e[a]=!0});var h=a[f+1];_.startsWith(h,g+b.NAMESPACE_DELIM)&&(d[g]=v(g))}return _.each(c,function(a){a in e&&(d[a]=v(a))}),d}function x(a){var b=a.nodes().map(function(b){return a.neighbors(b).length});return b.sort(),b}function y(a,b){for(var c=x(a),d=x(b),e=0;e<c.length;e++)if(c[e]!==d[e])return!1;return!0}function z(a,c){for(var d=[],e=a.indexOf(b.NAMESPACE_DELIM);e>=0;)d.push(a.substring(0,e)),e=a.indexOf(b.NAMESPACE_DELIM,e+1);if(c){var f=c[a];f&&d.push(f)}return d.push(a),d}b.NAMESPACE_DELIM="/";b.ROOT_NAME="__root__",b.EDGE_KEY_DELIM="--",function(a){a[a.FULL=0]="FULL",a[a.EMBEDDED=1]="EMBEDDED",a[a.META=2]="META",a[a.SERIES=3]="SERIES",a[a.CORE=4]="CORE",a[a.SHADOW=5]="SHADOW",a[a.BRIDGE=6]="BRIDGE",a[a.EDGE=7]="EDGE"}(b.GraphType||(b.GraphType={}));var d=b.GraphType;!function(a){a[a.META=0]="META",a[a.OP=1]="OP",a[a.SERIES=2]="SERIES",a[a.BRIDGE=3]="BRIDGE",a[a.ELLIPSIS=4]="ELLIPSIS"}(b.NodeType||(b.NodeType={}));var e=b.NodeType,f=function(){function a(){this.nodes={},this.edges=[]}return a}();b.SlimGraph=f;var g=function(){function a(a){this.type=e.ELLIPSIS,this.isGroupNode=!1,this.cardinality=1,this.parentNode=null,this.stats=null,this.setNumMoreNodes(a)}return a.prototype.setNumMoreNodes=function(a){this.numMoreNodes=a,this.name="... "+a+" more"},a}();b.EllipsisNodeImpl=g;var h=function(){function a(a,b){this.op=a.op,this.name=a.name,this.device=a.device,this.attr=a.attr,this.inputs=b,this.type=e.OP,this.isGroupNode=!1,this.cardinality=1,this.inEmbeddings=[],this.outEmbeddings=[],this.parentNode=null}return a}();b.createMetanode=i,b.joinStatsInfoWithGraph=j;var k=function(){function a(a,b,c){this.totalBytes=a,this.totalMicros=b,this.outputSize=c}return a.prototype.combine=function(a){null!=a.totalBytes&&(this.totalBytes+=a.totalBytes),null!=a.totalMicros&&(this.totalMicros+=a.totalMicros)},a}(),l=function(){function a(a,b){void 0===b&&(b={}),this.name=a,this.type=e.META,this.depth=1,this.isGroupNode=!0,this.cardinality=0,this.metagraph=t(a,d.META,b),this.bridgegraph=null,this.opHistogram={},this.deviceHistogram={},this.templateId=null,this.parentNode=null,this.stats=new k(0,0,null),this.hasNonControlEdges=!1}return a.prototype.getFirstChild=function(){return this.metagraph.node(this.metagraph.nodes()[0])},a.prototype.getRootOp=function(){var a=this.name.split("/"),b=this.name+"/("+a[a.length-1]+")";return this.metagraph.node(b)},a.prototype.leaves=function(){for(var c,a=[],b=[this];b.length;){var d=b.shift();d.isGroupNode?(c=d.metagraph,_.each(c.nodes(),function(a){return b.push(c.node(a))})):a.push(d.name)}return a},a}();b.createMetaedge=m;var n=function(){function a(a,b){this.v=a,this.w=b,this.baseEdgeList=[],this.inbound=null,this.numRegularEdges=0,this.numControlEdges=0,this.numRefEdges=0}return a.prototype.addBaseEdge=function(a){this.baseEdgeList.push(a),a.isControlDependency?this.numControlEdges+=1:this.numRegularEdges+=1,a.isReferenceEdge&&(this.numRefEdges+=1)},a}();b.createSeriesNode=o,b.getSeriesNodeName=p;var q=function(){function a(a,b,c,f,g){this.name=g||p(a,b,c),this.type=e.SERIES,this.hasLoop=!1,this.prefix=a,this.suffix=b,this.clusterId=f,this.ids=[],this.parent=c,this.isGroupNode=!0,this.cardinality=0,this.metagraph=t(g,d.SERIES),this.bridgegraph=null,this.parentNode=null,this.deviceHistogram={},this.hasNonControlEdges=!1,this.stats=new k(0,0,null)}return a}();b.build=s,b.createGraph=t,b.hasSimilarDegreeSequence=y,b.getHierarchicalPath=z}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(b){function c(a){if("true"===a)return!0;if("false"===a)return!1;var b=a[0];if('"'===b)return a.substring(1,a.length-1);var c=parseFloat(a);return isNaN(c)?a:c}function d(a){return new Promise(function(b,c){d3.text(a,function(a,d){return a?void c(a):void b(d)})})}function e(a){return new Promise(function(b,c){d3.json(a,function(a,d){return a?void c(a):void b(d)})})}function f(b,c,f){var h,i;return a.runAsyncTask("Reading graph.pbtxt",20,function(){return c||d(b.path)},f).then(function(c){return h=c,a.runAsyncTask("Reading stats.pbtxt",20,function(){return null!=b&&null!=b.statsPath?e(b.statsPath):null},f)}).then(function(b){return i=b,a.runAsyncTask("Parsing graph.pbtxt",60,function(){return g(h)},f)}).then(function(a){return{nodes:a,statsJson:i}}).catch(function(a){throw new Error("Failure parsing graph definition")})}function g(a){function g(a){var b=a.indexOf(":"),d=a.substring(0,b).trim(),e=c(a.substring(b+2).trim());return{name:d,value:e}}function i(a,b,c,d){var e=a[b];null==e?a[b]=d.join(".")in h?[c]:c:Array.isArray(e)?e.push(c):a[b]=[e,c]}for(var b={node:[]},d=[],e=[],f=b,h={node:!0,"node.input":!0,"node.attr":!0,"node.attr.value.list.type":!0,"node.attr.value.shape.dim":!0,"node.attr.value.tensor.string_val":!0,"node.attr.value.tensor.tensor_shape.dim":!0},j=0;j<a.length;){var k=a.indexOf("\n",j);k===-1&&(k=a.length);var l=a.substring(j,k);if(j=k+1,l)switch(l[l.length-1]){case"{":var m=l.substring(0,l.length-2).trim(),n={};d.push(f),e.push(m),i(f,m,n,e),f=n;break;case"}":f=d.pop(),e.pop();break;default:var o=g(l);i(f,o.name,o.value,e.concat(o.name))}}return b.node}b.readPbTxt=d,b.readJson=e,b.readAndParseData=f,b.parsePbtxt=g}(c=b.parser||(b.parser={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(c){function f(a,b,c,d){_.each(a.edges(),function(e){var f=c?[e.w,e.v]:[e.v,e.w],g=f[0],h=f[1];if(g===b.name)if(b.isGroupNode){var i=a.edge(e).numRegularEdges?d.regular:d.control;i.push(h)}else _.each(a.edge(e).baseEdgeList,function(a){var b=a.isControlDependency?d.control:d.regular;b.push(c?a.v:a.w)})})}function g(c,d,f){var g=new e,k={};return a.runAsyncTask("Adding nodes",20,function(){var a={};_.each(c.nodes,function(b,c){null!=b.device&&(a[b.device]=!0)}),g.devices=_.keys(a),h(g,c)},f).then(function(){return a.runAsyncTask("Detect series",20,function(){d.groupSeries&&j(g.root,g,k)},f)}).then(function(){return a.runAsyncTask("Adding edges",30,function(){i(g,c,k)},f)}).then(function(){return a.runAsyncTask("Finding similar subgraphs",30,function(){g.templates=b.template.detect(g,d.verifyTemplate)},f)}).then(function(){return g}).catch(function(a){throw new Error("Failure creating graph hierarchy")})}function h(a,c){_.each(c.nodes,function(c,d){var e=b.getHierarchicalPath(c.name),f=a.root;f.depth=Math.max(e.length,f.depth);for(var g=0;g<e.length&&(f.depth=Math.max(f.depth,e.length-g),f.cardinality+=c.cardinality,f.opHistogram[c.op]=(f.opHistogram[c.op]||0)+1,c.stats&&f.stats.combine(c.stats),null!=c.device&&(f.deviceHistogram[c.device]=(f.deviceHistogram[c.device]||0)+1),g!==e.length-1);g++){var h=e[g],i=a.node(h);i||(i=b.createMetanode(h),i.parentNode=f,a.setNode(h,i),f.metagraph.setNode(h,i)),f=i}a.setNode(c.name,c),c.parentNode=f,f.metagraph.setNode(c.name,c),_.each(c.inEmbeddings,function(b){a.setNode(b.name,b),b.parentNode=c}),_.each(c.outEmbeddings,function(b){a.setNode(b.name,b),b.parentNode=c})})}function i(a,c,d){var e=a.getNodeMap(),f=[],g=[],h=function(a,b){for(var c=0;a;)b[c++]=a.name,a=a.parentNode;return c-1};_.each(c.edges,function(a){for(var d=h(c.nodes[a.v],f),i=h(c.nodes[a.w],g);f[d]===g[i];)if(d--,i--,d<0||i<0)throw Error("No difference found between ancestor paths.");var j=e[f[d+1]],k=f[d],l=g[i],m=j.metagraph.edge(k,l);m||(m=b.createMetaedge(k,l),j.metagraph.setEdge(k,l,m)),j.hasNonControlEdges||a.isControlDependency||(j.hasNonControlEdges=!0),m.addBaseEdge(a)})}function j(b,c,d){var e=b.metagraph;_.each(e.nodes(),function(b){var f=e.node(b);f.type===a.graph.NodeType.META&&j(f,c,d)});var f=k(e),g=l(f,e);_.each(g,function(a,b){var f=a.metagraph.nodes(),g=a.metagraph.node(f[0]);g.type;c.setNode(b,a),e.setNode(b,a),_.each(f,function(c){var f=e.node(c);a.metagraph.setNode(c,f),a.parentNode=f.parentNode,a.cardinality++,null!=f.device&&(a.deviceHistogram[f.device]=(a.deviceHistogram[f.device]||0)+1),f.parentNode=a,d[c]=b,f.stats&&a.stats.combine(f.stats),e.removeNode(c)})})}function k(a){var c={};return _.reduce(a.nodes(),function(c,d){var e=a.node(d);if(e.type===b.NodeType.META)return c;var f=e.op;return f&&(c[f]=c[f]||[],c[f].push(e.name)),c},c)}function l(a,c){var d={};return _.each(a,function(a,e){if(!(a.length<=1)){var f={};_.each(a,function(a){var i,j,c="*"===a.charAt(a.length-1),d=a.split("/"),e=d[d.length-1],g=d.slice(0,d.length-1).join("/"),h=e.match(/^(\D*)_(\d+)$/),k="";h?(i=h[1],j=h[2]):(i=c?e.substr(0,e.length-1):e,"_"!==i.charAt(i.length-1)&&(i+="_"),j=0,k=c?"*":"");var l=b.getSeriesNodeName(i,k,g);f[l]=f[l]||[];var m=b.createSeriesNode(i,k,g,+j,a);f[l].push(m)}),_.each(f,function(a,b){if(!(a.length<2)){a.sort(function(a,b){return+a.clusterId-+b.clusterId});for(var f=[a[0]],g=1;g<a.length;g++){var h=a[g];h.clusterId!==f[f.length-1].clusterId+1?(m(f,d,+e,c),f=[h]):f.push(h)}m(f,d,+e,c)}})}}),d}function m(a,c,d,e){if(a.length>1){var f=b.getSeriesNodeName(a[0].prefix,a[0].suffix,a[0].parent,a[0].clusterId,a[a.length-1].clusterId),g=b.createSeriesNode(a[0].prefix,a[0].suffix,a[0].parent,d,f);_.each(a,function(a){g.ids.push(a.clusterId),g.metagraph.setNode(a.name,e.node(a.name))}),c[f]=g}}var e=function(){function a(){this.root=b.createMetanode(b.ROOT_NAME,{compound:!0}),this.templates=null,this.devices=null,this.index={},this.index[b.ROOT_NAME]=this.root,this.orderings={}}return a.prototype.getNodeMap=function(){return this.index},a.prototype.node=function(a){return this.index[a]},a.prototype.setNode=function(a,b){this.index[a]=b},a.prototype.getBridgegraph=function(a){var c=this,d=this.index[a];if(!d)throw Error("Could not find node in hierarchy: "+a);if(!("metagraph"in d))return null;var e=d;if(e.bridgegraph)return e.bridgegraph;var f=e.bridgegraph=b.createGraph("BRIDGEGRAPH",b.GraphType.BRIDGE);if(!(d.parentNode&&"metagraph"in d.parentNode))return f;var g=d.parentNode,h=g.metagraph,i=this.getBridgegraph(g.name);return _.each([h,i],function(d){_(d.edges()).filter(function(b){return b.v===a||b.w===a}).each(function(e){var g=e.w===a,h=d.edge(e);_.each(h.baseEdgeList,function(d){var h=g?[d.w,e.v]:[d.v,e.w],i=h[0],j=h[1],k=c.getChildName(a,i),l={v:g?j:k,w:g?k:j},m=f.edge(l);m||(m=b.createMetaedge(l.v,l.w),m.inbound=g,f.setEdge(l.v,l.w,m)),m.addBaseEdge(d)})}).value()}),f},a.prototype.getChildName=function(a,b){for(var c=this.index[b];c;){if(c.parentNode&&c.parentNode.name===a)return c.name;c=c.parentNode}throw Error("Could not find immediate child for descendant: "+b)},a.prototype.getPredecessors=function(a){var b=this.index[a];if(!b)throw Error("Could not find node with name: "+a);var c=this.getOneWayEdges(b,!0);return b.isGroupNode||_.each(b.inEmbeddings,function(a){c.regular.push(a.name)}),c},a.prototype.getSuccessors=function(a){var b=this.index[a];if(!b)throw Error("Could not find node with name: "+a);var c=this.getOneWayEdges(b,!1);return b.isGroupNode||_.each(b.outEmbeddings,function(a){c.regular.push(a.name)}),c},a.prototype.getOneWayEdges=function(a,b){var c={control:[],regular:[]};if(!a.parentNode)return c;if(a.parentNode.isGroupNode){var d=a.parentNode,e=d.metagraph,g=this.getBridgegraph(d.name);f(e,a,b,c),f(g,a,b,c)}return c},a.prototype.getTopologicalOrdering=function(a){var b=this.index[a];if(!b)throw Error("Could not find node with name: "+a);if(!b.isGroupNode)return null;if(a in this.orderings)return this.orderings[a];var c={},d={},e=b.metagraph;_.each(e.edges(),function(a){e.edge(a).numRegularEdges&&(a.v in c||(c[a.v]=[]),c[a.v].push(a.w),d[a.w]=!0)});for(var f=_.difference(_.keys(c),_.keys(d)),g=this.orderings[a]={},h=0;f.length;){var i=f.shift();g[i]=h++,_.each(c[i],function(a){return f.push(a)}),delete c[i]}return g},a}();c.build=g}(c=b.hierarchy||(b.hierarchy={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var __extends=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d},tf;!function(a){var b;!function(b){var c;!function(c){function j(a,b,c,d,f,g){var h=new e(b,c,d,f,!0);a.inAnnotations.push(h,g)}function k(a,b,c,d,f,g){var h=new e(b,c,d,f,!1);a.outAnnotations.push(h,g)}function l(a,c){_.each(a.nodes(),function(d){var e=a.node(d);if(e.expanded=c>1,c>0)switch(e.node.type){case b.NodeType.META:case b.NodeType.SERIES:n(e,c-1)}})}function n(a,b){a.coreGraph&&l(a.coreGraph,b)}function o(a,b,c,d){var e=a.node(b),g=a.node(c),h=a.edge(b,c);k(e,g.node,g,h,f.SHORTCUT,d),j(g,e.node,e,h,f.SHORTCUT,d),a.removeEdge(b,c)}function p(a,b,c){var d=a.coreGraph;d.node(b).isOutExtract=!0,_.each(d.predecessors(b),function(a,e){o(d,a,b,c)}),c.detachAllEdgesForHighDegree&&_.each(d.successors(b),function(a,e){o(d,b,a,c)}),(c.detachAllEdgesForHighDegree||0===d.neighbors(b).length)&&(a.isolatedOutExtract.push(d.node(b)),d.removeNode(b))}function q(a,b,c){var d=a.coreGraph;d.node(b).isInExtract=!0,_.each(d.successors(b),function(a,e){o(d,b,a,c)}),c.detachAllEdgesForHighDegree&&_.each(d.predecessors(b),function(a,e){o(d,a,b,c)}),(c.detachAllEdgesForHighDegree||0===d.neighbors(b).length)&&(a.isolatedInExtract.push(d.node(b)),d.removeNode(b))}function r(a,c){if(a.type===b.NodeType.OP){for(var d=0;d<c.length;d++)if(a.op===c[d])return!0}else if(a.type===b.NodeType.META){var e=a.getRootOp();if(e)for(var d=0;d<c.length;d++)if(e.op===c[d])return!0}return!1}function s(a,b){var c=a.coreGraph;_.each(c.nodes(),function(d){var e=c.node(d);r(e.node,b.outExtractTypes)&&p(a,d,b)})}function t(a,b){var c=a.coreGraph;_.each(c.nodes(),function(d){var e=c.node(d);r(e.node,b.inExtractTypes)&&q(a,d,b)})}function u(a,b){var c=a.coreGraph,d=b.maxInDegree,e=_.filter(c.nodes(),function(a){var b=_.reduce(c.predecessors(a),function(b,d){var e=c.edge(d,a).metaedge;return b+(e.numRegularEdges?1:0)},0);return 0===b&&c.predecessors(a).length>0&&(b=c.predecessors(a).length),b>d});_.each(e,function(c){p(a,c,b)})}function v(a,b){var c=a.coreGraph,d=b.maxOutDegree,e=_.filter(c.nodes(),function(a){var b=_.reduce(c.successors(a),function(b,d){var e=c.edge(a,d).metaedge;return b+(e.numRegularEdges?1:0)},0);return 0===b&&c.successors(a).length>0&&(b=c.successors(a).length),b>d});_.each(e,function(c){q(a,c,b)})}function w(a,b){var c=a.coreGraph,d={};_.each(c.edges(),function(a){c.edge(a).metaedge.numRegularEdges||((d[a.v]=d[a.v]||[]).push(a),(d[a.w]=d[a.w]||[]).push(a))}),_.each(d,function(a,d){a.length>b.maxControlDegree&&_.each(a,function(a){return o(c,a.v,a.w,b)})})}function x(a){var b=1.61803398875,c=1,d=359,e=d-c;return c+e*b*a%e}function y(a,b){b.outExtractTypes&&s(a,b),b.inExtractTypes&&t(a,b),b.maxInDegree&&u(a,b),b.maxOutDegree&&v(a,b),b.maxControlDegree&&w(a,b);var c=a.coreGraph;_.each(c.nodes(),function(d){var e=c.node(d),f=c.neighbors(d).length;if(0===f){var g=e.outAnnotations.list.length>0,h=e.inAnnotations.list.length>0;e.isInExtract?(a.isolatedInExtract.push(e),c.removeNode(d)):e.isOutExtract?(a.isolatedOutExtract.push(e),c.removeNode(d)):b.extractIsolatedNodesWithAnnotationsOnOneSide&&(g&&!h?(e.isInExtract=!0,a.isolatedInExtract.push(e),c.removeNode(d)):h&&!g&&(e.isOutExtract=!0,a.isolatedOutExtract.push(e),c.removeNode(d)))}})}c.MetanodeColors={SATURATION:.6,LIGHTNESS:.85,EXPANDED_COLOR:"#f0f0f0",HUES:[220,100,180,40,20,340,260,300,140,60],STRUCTURE_PALETTE:function(a,b){var d=c.MetanodeColors.HUES,e=d.length,f=d[a%e],g=Math.sin(f*Math.PI/360),h=b?30:90-60*g,i=b?95:80;return d3.hsl(f,.01*h,.01*i).toString()},DEVICE_PALETTE:function(a){return c.MetanodeColors.STRUCTURE_PALETTE(a)},UNKNOWN:"#eee",GRADIENT_OUTLINE:"#888"};var d=function(){function a(a,b){this.hierarchy=a,this.index={},this.deviceColorMap=d3.scale.ordinal().domain(a.devices).range(_.map(d3.range(a.devices.length),c.MetanodeColors.DEVICE_PALETTE));var d=a.root.metagraph,e=d3.extent(d.nodes(),function(a,b){var c=d.node(a);if(null!=c.stats)return c.stats.totalBytes});this.memoryUsageScale=d3.scale.linear().domain(e).range(b.minMaxColors);var f=d3.extent(d.nodes(),function(a,b){var c=d.node(a);if(null!=c.stats)return c.stats.totalMicros});this.computeTimeScale=d3.scale.linear().domain(f).range(b.minMaxColors),this.hasSubhierarchy={},this.params=b,this.root=new m(a.root),this.index[a.root.name]=this.root,this.buildSubhierarchy(a.root.name),this.root.expanded=!0}return a.prototype.getRenderNodeByName=function(a){return this.index[a]},a.prototype.getNearestVisibleAncestor=function(a){for(var c=b.getHierarchicalPath(a),d=0;d<c.length;d++){var e=c[d];if(!this.getRenderNodeByName(e).expanded)return e}return a},a.prototype.setDepth=function(a){n(this.root,+a)},a.prototype.buildSubhierarchy=function(a){var c=this;if(!(a in this.hasSubhierarchy)){var d=this.index[a];if(d.node.type===b.NodeType.META||d.node.type===b.NodeType.SERIES){var g=d,l=g.node.metagraph,n=g.coreGraph;_.each(l.nodes(),function(a){var b=l.node(a),d=b.isGroupNode?new m(b):new h(b);if(c.index[a]=d,n.setNode(a,d),null!=d.node.stats&&(d.memoryColor=c.memoryUsageScale(d.node.stats.totalBytes),d.computeTimeColor=c.computeTimeScale(d.node.stats.totalMicros)),b.isGroupNode){var g=_.pairs(b.deviceHistogram);if(g.length>0){var o=_.sum(g,_.last);d.deviceColors=_.map(g,function(a){return{color:c.deviceColorMap(a[0]),proportion:a[1]/o}})}}else{_.each(b.inEmbeddings,function(a){var b=new i(null);j(d,a,null,b,f.CONSTANT,c.params),c.index[a.name]=new h(a)}),_.each(b.outEmbeddings,function(a){var b=new i(null);k(d,a,null,b,f.SUMMARY,c.params),c.index[a.name]=new h(a)});var e=d.node.device;null!=e&&(d.deviceColors=[{color:c.deviceColorMap(e),proportion:1}])}}),_.each(l.edges(),function(a){var b=l.edge(a),c=new i(b);n.setEdge(a.v,a.w,c)}),this.params.enableExtraction&&g.node.type===b.NodeType.META&&y(g,this.params),this.hasSubhierarchy[a]=!0;var o=g.node.parentNode;if(o){var p=this.index[o.name],q=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return b.concat([a?"IN":"OUT"]).join("~~")},r=this.hierarchy.getBridgegraph(a),s={in:{},out:{},control:{}};_.each(r.edges(),function(a){var b=!!l.node(a.w),c=b?a.v:a.w,d=r.edge(a);d.numRegularEdges?b?s.out[c]=(s.out[c]||0)+1:s.in[c]=(s.in[c]||0)+1:s.control[c]=(s.control[c]||0)+1});var t=this.hierarchy.getNodeMap();_.each(r.edges(),function(g){var j=r.edge(g),k=!!l.node(g.w),m=k?[g.w,g.v]:[g.v,g.w],u=m[0],v=m[1],w=c.index[u],x=c.index[v],y=x?x.node:t[v],z=!j.numRegularEdges&&s.control[v]>c.params.maxControlDegree,A=k?[d.inAnnotations,w.inAnnotations]:[d.outAnnotations,w.outAnnotations],C=(A[0],A[1]),D=k?s.out[v]>c.params.maxOutDegree:s.in[v]>c.params.maxInDegree,E=null,F=!1;if(c.params.enableBridgegraph&&!D&&!z&&w.isInCore()){var G=function(b){var c=k?{v:b,w:a}:{v:a,w:b};return p.coreGraph.edge(c)};E=G(v),E||(E=G(q(k,v,o.name))),F=!!E}var H=!1;if(E&&!j.numRegularEdges){for(var I=E,J=p.node;I.adjoiningMetaedge;)I=I.adjoiningMetaedge,J=J.parentNode;var K=c.hierarchy.getTopologicalOrdering(J.name),L=I.metaedge;H=K[L.v]>K[L.w]}if(F=F&&!H,!F)return void C.push(new e(y,x,new i(j),f.SHORTCUT,k),c.params);var M=q(k,a),N=q(k,v,a),O=n.node(N);if(!O){var P=n.node(M);if(!P){var Q={name:M,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,stats:null,inbound:k};P=new h(Q),c.index[M]=P,n.setNode(M,P)}var R={name:N,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,stats:null,inbound:k};O=new h(R),c.index[N]=O,n.setNode(N,O),n.setParent(N,M),P.node.cardinality++}var S=new i(j);S.adjoiningMetaedge=E,k?n.setEdge(N,u,S):n.setEdge(u,N,S)}),_.each([!0,!1],function(d){var e=q(d,a),f=n.node(e);f&&_.each(n.nodes(),function(g){var j=n.node(g);if(j.node.type!==b.NodeType.BRIDGE){var k=d?!n.predecessors(g).length:!n.successors(g).length;if(k){var l=q(d,a,"STRUCTURAL_TARGET"),m=n.node(l);if(!m){var o={name:l,type:b.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,stats:null,inbound:d};m=new h(o),m.structural=!0,c.index[l]=m,n.setNode(l,m),f.node.cardinality++,n.setParent(l,e)}var p=new i(null);p.structural=!0,p.weight--,d?n.setEdge(l,g,p):n.setEdge(g,l,p)}}})})}}}},a}();c.RenderGraphInformation=d;var e=function(){function a(a,b,c,d,e){this.node=a,this.renderNodeInfo=b,this.renderMetaedgeInfo=c,this.annotationType=d,this.dx=0,this.dy=0,this.width=0,this.height=0,this.isIn=e,this.points=[]}return a}();c.Annotation=e,function(a){a[a.SHORTCUT=0]="SHORTCUT",a[a.CONSTANT=1]="CONSTANT",a[a.SUMMARY=2]="SUMMARY",a[a.ELLIPSIS=3]="ELLIPSIS"}(c.AnnotationType||(c.AnnotationType={}));var f=c.AnnotationType,g=function(){function b(){this.list=[],this.nodeNames={}}return b.prototype.push=function(b,c){if(!(b.node.name in this.nodeNames)){if(this.nodeNames[b.node.name]=!0,this.list.length<c.maxAnnotations)return void this.list.push(b);var d=this.list[this.list.length-1];if(d.annotationType===f.ELLIPSIS){var g=d.node;return void g.setNumMoreNodes(++g.numMoreNodes)}var i=new a.graph.EllipsisNodeImpl(1);this.list.push(new e(i,new h(i),null,f.ELLIPSIS,b.isIn))}},b}();c.AnnotationList=g;
var h=function(){function a(a){this.node=a,this.expanded=!1,this.inAnnotations=new g,this.outAnnotations=new g,this.x=0,this.y=0,this.width=0,this.height=0,this.inboxWidth=0,this.outboxWidth=0,this.excluded=!1,this.structural=!1,this.labelOffset=0,this.extractXOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.outerWidth=0,this.outerHeight=0,this.isInExtract=!1,this.isOutExtract=!1}return a.prototype.isInCore=function(){return!this.isInExtract&&!this.isOutExtract},a}();c.RenderNodeInformation=h;var i=function(){function a(a){this.metaedge=a,this.adjoiningMetaedge=null,this.structural=!1,this.weight=1}return a}();c.RenderMetaedgeInformation=i;var m=function(a){function c(c){a.call(this,c);var d=c.metagraph,e=d.graph();this.coreGraph=b.createGraph(e.name,b.GraphType.CORE,{compound:!0}),this.coreBox={width:0,height:0},this.inExtractBox={width:0,height:0},this.outExtractBox={width:0,height:0},this.isolatedInExtract=[],this.isolatedOutExtract=[]}return __extends(c,a),c}(h);c.RenderGroupNodeInformation=m,c.mapIndexToHue=x}(c=b.render||(b.render={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(c){function d(a,b){var c=f(a),d=g(c,b);return _(d).pairs().sortBy(function(a){return a[1].level}).map(function(a){return[a[0],a[1].nodes]}).object().value()}function e(a){var b=_.map({depth:a.depth,"|V|":a.metagraph.nodes().length,"|E|":a.metagraph.edges().length},function(a,b){return b+"="+a}).join(" "),c=_.map(a.opHistogram,function(a,b){return b+"="+a}).join(",");return b+" [ops] "+c}function f(a){var c=_(a.getNodeMap()).reduce(function(a,c,d){if(c.type!==b.NodeType.META)return a;var f=d.split("/").length-1,g=e(c),h=a[g]||{nodes:[],level:f};return a[g]=h,h.nodes.push(c),h.level>f&&(h.level=f),a},{});return _(c).pairs().filter(function(a){return a[1].nodes.length>1}).sortBy(function(a){return a[1].nodes[0].depth}).value()}function g(a,b){return _.reduce(a,function(a,c){var d=c[0],e=c[1].nodes,f=[];return e.forEach(function(a){for(var c=0;c<f.length;c++){var e=!b||i(f[c].metanode.metagraph,a.metagraph);if(e)return a.templateId=f[c].metanode.templateId,void f[c].members.push(a.name)}a.templateId=d+"["+f.length+"]",f.push({metanode:a,members:[a.name]})}),f.forEach(function(b){a[b.metanode.templateId]={level:c[1].level,nodes:b.members}}),a},{})}function h(a,b,c){return _.sortByAll(a,function(a){var c=b.node(a);return c.op},function(a){var c=b.node(a);return c.templateId},function(a){return b.neighbors(a).length},function(a){return b.predecessors(a).length},function(a){return b.successors(a).length},function(a){return a.substr(c.length)})}function i(b,c){function k(a,b){var c=a.substr(d.length),h=b.substr(e.length);return f[c]^g[c]?(console.warn("different visit pattern","["+d+"]",c,"["+e+"]",h),!0):(f[c]||(f[c]=g[h]=!0,i.push({n1:a,n2:b})),!1)}if(!a.graph.hasSimilarDegreeSequence(b,c))return!1;var d=b.graph().name,e=c.graph().name,f={},g={},i=[],l=b.sources(),m=c.sources();if(l.length!==m.length)return console.log("different source length"),!1;l=h(l,b,d),m=h(m,c,e);for(var n=0;n<l.length;n++){var o=k(l[n],m[n]);if(o)return!1}for(;i.length>0;){var p=i.pop(),q=j(b.node(p.n1),c.node(p.n2));if(!q)return!1;var r=b.successors(p.n1),s=c.successors(p.n2);if(r.length!==s.length)return console.log("# of successors mismatch",r,s),!1;r=h(r,b,d),s=h(s,c,e);for(var t=0;t<r.length;t++){var o=k(r[t],s[t]);if(o)return!1}}return!0}function j(a,c){if(a.type===b.NodeType.META){var d=a,e=c;return d.templateId&&e.templateId&&d.templateId===e.templateId}if(a.type===b.NodeType.OP&&c.type===b.NodeType.OP)return a.op===c.op;if(a.type===b.NodeType.SERIES&&c.type===b.NodeType.SERIES){var f=a,g=c,h=f.metagraph.nodeCount();return h===g.metagraph.nodeCount()&&(0===h||f.metagraph.node(f.metagraph.nodes()[0]).op===g.metagraph.node(g.metagraph.nodes()[0]).op)}return!1}c.detect=d}(c=b.template||(b.template={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(a){var b;!function(b){function c(b,c,d,e){var f=b.getBoundingClientRect(),g=c.getBBox(),h=.9*Math.min(f.width/g.width,f.height/g.height,2),i=a.layout.PARAMS.graph,j=d.scale(h).on("zoomend.fitted",function(){d.on("zoomend.fitted",null),e()}).translate([i.padding.paddingLeft,i.padding.paddingTop]).event;d3.select(c).transition().duration(500).call(j)}function d(a,c,d,e){var f=d3.selectAll("[data-name='"+a+"']."+b.Class.Node.GROUP)[0][0];if(!f)return!1;var g=e.translate(),h=f.getBBox(),i=f.getScreenCTM(),j=c.createSVGPoint(),k=c.createSVGPoint();j.x=h.x,j.y=h.y,k.x=h.x+h.width,k.y=h.y+h.height,j=j.matrixTransform(i),k=k.matrixTransform(i);var l=function(a,b,c){return b<0||a>c},m=c.getBoundingClientRect();if(l(j.x,k.x,m.width)||l(j.y,k.y,m.height)){var n=(j.x+k.x)/2,o=(j.y+k.y)/2,p=m.width/2-n,q=m.height/2-o,r=e.translate([g[0]+p,g[1]+q]).event;return d3.select(d).transition().duration(500).call(r),!0}return!1}function e(a,b,c,d){var e=f(a,b,c);if(!e.empty())return e;var g=document.createElementNS("http://www.w3.org/2000/svg",b);return c&&g.classList.add(c),d?a.node().insertBefore(g,d):a.node().appendChild(g),d3.select(g).datum(a.datum())}function f(a,b,c){for(var d=a.node().childNodes,e=0;e<d.length;e++){var f=d[e];if(f.tagName===b&&(!c||f.classList.contains(c)))return d3.select(f)}return d3.select(null)}function g(c,d,g,i){i=i||b.Class.Scene.GROUP;var j=f(c,"g",i).empty(),k=e(c,"g",i),l=e(k,"g",b.Class.Scene.CORE),m=_.reduce(d.coreGraph.nodes(),function(a,b){var c=d.coreGraph.node(b);return c.excluded||a.push(c),a},[]);if(d.node.type===a.NodeType.SERIES&&m.reverse(),b.edge.buildGroup(l,d.coreGraph,g),b.node.buildGroup(l,m,g),d.isolatedInExtract.length>0){var n=e(k,"g",b.Class.Scene.INEXTRACT);b.node.buildGroup(n,d.isolatedInExtract,g)}else f(k,"g",b.Class.Scene.INEXTRACT).remove();if(d.isolatedOutExtract.length>0){var o=e(k,"g",b.Class.Scene.OUTEXTRACT);b.node.buildGroup(o,d.isolatedOutExtract,g)}else f(k,"g",b.Class.Scene.OUTEXTRACT).remove();return h(k,d),j&&k.attr("opacity",0).transition().attr("opacity",1),k}function h(c,d){var e=d.node.type===a.NodeType.SERIES?0:a.layout.PARAMS.subscene.meta.labelHeight;j(f(c,"g",b.Class.Scene.CORE),0,e);var g=0===d.coreBox.width?0:d.coreBox.width,h=d.isolatedInExtract.length>0;h&&j(f(c,"g",b.Class.Scene.INEXTRACT),g,e);var i=d.isolatedOutExtract.length>0;if(i){var k=g+d.inExtractBox.width+d.extractXOffset;j(f(c,"g",b.Class.Scene.OUTEXTRACT),k,e)}}function i(a,b){d3.select(a).on("click",function(){b.fire("graph-select")})}function j(a,b,c){a.attr("transform","translate("+b+","+c+")")}function k(a,b,c,d,e){a.transition().attr({x:b-d/2,y:c-e/2,width:d,height:e})}function l(b,c){var d=c.x+c.width/2-6,e=c.y-c.height/2+6;c.node.type!==a.NodeType.SERIES||c.expanded||(d+=10,e-=2);var f="translate("+d+","+e+")";b.selectAll("path").transition().attr("transform",f),b.select("circle").transition().attr({cx:d,cy:e,r:a.layout.PARAMS.nodeSize.meta.expandButtonRadius})}function m(a,b,c,d,e){a.transition().attr({cx:b,cy:c,rx:d/2,ry:e/2})}b.Class={Node:{CONTAINER:"nodes",GROUP:"node",SHAPE:"nodeshape",COLOR_TARGET:"nodecolortarget",LABEL:"nodelabel",BUTTON_CONTAINER:"buttoncontainer",BUTTON_CIRCLE:"buttoncircle",EXPAND_BUTTON:"expandbutton",COLLAPSE_BUTTON:"collapsebutton"},Edge:{CONTAINER:"edges",GROUP:"edge",LINE:"edgeline",REF_LINE:"refline",STRUCTURAL:"structural"},Annotation:{OUTBOX:"out-annotations",INBOX:"in-annotations",GROUP:"annotation",NODE:"annotation-node",EDGE:"annotation-edge",CONTROL_EDGE:"annotation-control-edge",LABEL:"annotation-label",ELLIPSIS:"annotation-ellipsis"},Scene:{GROUP:"scene",CORE:"core",INEXTRACT:"in-extract",OUTEXTRACT:"out-extract"},Subscene:{GROUP:"subscene"},OPNODE:"op",METANODE:"meta",SERIESNODE:"series",BRIDGENODE:"bridge",ELLIPSISNODE:"ellipsis"},b.fit=c,b.panToNode=d,b.selectOrCreateChild=e,b.selectChild=f,b.buildGroup=g,b.addGraphClickListener=i,b.translate=j,b.positionRect=k,b.positionButton=l,b.positionEllipse=m}(b=a.scene||(a.scene={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){function d(c,d,k,l){var m=c.selectAll(function(){return this.childNodes}).data(d.list,function(a){return a.node.name});return m.enter().append("g").attr("data-name",function(a){return a.node.name}).each(function(c){var d=d3.select(this);l.addAnnotationGroup(c,k,d);var e=b.Class.Annotation.EDGE,i=c.renderMetaedgeInfo&&c.renderMetaedgeInfo.metaedge;i&&!i.numRegularEdges&&(e+=" "+b.Class.Annotation.CONTROL_EDGE),i&&i.numRefEdges&&(e+=" "+b.Class.Edge.REF_LINE),b.edge.appendEdge(d,c,l,e),c.annotationType!==a.graph.render.AnnotationType.ELLIPSIS?(g(d,c),f(d,c,l)):h(d,c.node.name,c,b.Class.Annotation.ELLIPSIS)}),m.attr("class",function(a){return b.Class.Annotation.GROUP+" "+e(a.annotationType)+" "+b.node.nodeClass(a)}).each(function(b){var c=d3.select(this);j(c,k,b,l),b.annotationType!==a.graph.render.AnnotationType.ELLIPSIS&&i(c,k,l)}),m.exit().each(function(a){var b=d3.select(this);l.removeAnnotationGroup(a,k,b)}).remove(),m}function e(b){return(a.graph.render.AnnotationType[b]||"").toLowerCase()||null}function f(c,d,e){if(d.annotationType===a.graph.render.AnnotationType.SUMMARY){var f=b.selectOrCreateChild(c,"image");f.attr({"xlink:href":"../../../static/tb/summary-icon.svg",height:"12px",width:"12px",cursor:"pointer"})}else{var g=b.node.buildShape(c,d,b.Class.Annotation.NODE);b.selectOrCreateChild(g,"title").text(d.node.name)}}function g(a,b){var c=b.node.name.split("/"),d=c[c.length-1],e=d.length>8?d.substring(0,8)+"...":d;return h(a,e,b,null,d)}function h(a,c,d,e,f){var g=b.Class.Annotation.LABEL;e&&(g+=" "+e);var h=f?f:c;return a.append("text").attr("class",g).attr("dy",".35em").attr("text-anchor",d.isIn?"end":"start").text(c).append("title").text(h)}function i(a,b,c){a.on("mouseover",function(a){c.fire("annotation-highlight",{name:a.node.name,hostName:b.node.name})}).on("mouseout",function(a){c.fire("annotation-unhighlight",{name:a.node.name,hostName:b.node.name})}).on("click",function(a){d3.event.stopPropagation(),c.fire("annotation-select",{name:a.node.name,hostName:b.node.name})})}function j(c,d,e,f){e.renderNodeInfo&&e.annotationType!==a.graph.render.AnnotationType.ELLIPSIS&&b.node.stylize(c,e.renderNodeInfo,f,b.Class.Annotation.NODE),e.annotationType===a.graph.render.AnnotationType.SUMMARY&&(e.width+=10),c.select("text."+b.Class.Annotation.LABEL).transition().attr({x:d.x+e.dx+(e.isIn?-1:1)*(e.width/2+e.labelOffset),y:d.y+e.dy}),c.select("image").transition().attr({x:d.x+e.dx-3,y:d.y+e.dy-6}),b.positionEllipse(c.select("."+b.Class.Annotation.NODE+" ellipse"),d.x+e.dx,d.y+e.dy,e.width,e.height),b.positionRect(c.select("."+b.Class.Annotation.NODE+" rect"),d.x+e.dx,d.y+e.dy,e.width,e.height),b.positionRect(c.select("."+b.Class.Annotation.NODE+" use"),d.x+e.dx,d.y+e.dy,e.width,e.height),c.select("path."+b.Class.Annotation.EDGE).transition().attr("d",function(a){var c=a.points.map(function(a){return{x:a.dx+d.x,y:a.dy+d.y}});return b.edge.interpolate(c)})}c.buildGroup=d}(c=b.annotation||(b.annotation={}))}(c=b.scene||(b.scene={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){function e(b){return b.v+a.graph.EDGE_KEY_DELIM+b.w}function f(a,c,d){var f=_.reduce(c.edges(),function(a,b){var d=c.edge(b);return a.push({v:b.v,w:b.w,label:d}),a},[]),h=b.selectOrCreateChild(a,"g",b.Class.Edge.CONTAINER),l=(h.node(),h.selectAll(function(){return this.childNodes}).data(f,e));return l.enter().append("g").attr("class",b.Class.Edge.GROUP).attr("data-edge",e).each(function(a){var c=d3.select(this);a.label.edgeGroup=c,d._edgeGroupIndex[e(a)]=c;var f=a.label.metaedge&&a.label.metaedge.numRefEdges?b.Class.Edge.REF_LINE+" "+b.Class.Edge.LINE:void 0;g(c,a,b,f)}),l.each(i),l.each(function(a){j(d3.select(this),a,d)}),l.exit().each(function(a){delete d._edgeGroupIndex[e(a)]}).remove(),l}function g(a,c,d,e){e=e||b.Class.Edge.LINE,c.label&&c.label.structural&&(e+=" "+b.Class.Edge.STRUCTURAL),a.append("path").attr("class",e)}function h(a,b,d){var e=a.label,f=e.adjoiningMetaedge;if(!f)return d3.interpolate(d,c.interpolate(e.points));var g=this,h=f.edgeGroup.node().firstChild,i=e.metaedge.inbound;return function(a){var b=h.getPointAtLength(i?h.getTotalLength():0).matrixTransform(h.getCTM()).matrixTransform(g.getCTM().inverse()),d=e.points,f=i?0:d.length-1;d[f].x=b.x,d[f].y=b.y;var j=c.interpolate(d);return j}}function i(a){d3.select(this).select("path."+b.Class.Edge.LINE).each(function(a){var b=d3.select(this);b.transition().attrTween("d",h)})}function j(a,c,d){var f=c.label.metaedge;a.select("path."+b.Class.Edge.LINE).classed("control-dep",f&&!f.numRegularEdges)}a.graph.scene;c.getEdgeKey=e,c.buildGroup=f,c.appendEdge=g,c.interpolate=d3.svg.line().interpolate("basis").x(function(a){return a.x}).y(function(a){return a.y})}(c=b.edge||(b.edge={}))}(c=b.scene||(b.scene={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(b){var c;!function(c){var d;!function(d){function e(a,d,e){var g=c.selectOrCreateChild(a,"g",c.Class.Node.CONTAINER),k=g.selectAll(function(){return this.childNodes}).data(d,function(a){return a.node.name+":"+a.node.type});return k.enter().append("g").attr("data-name",function(a){return a.node.name}).each(function(a){var b=d3.select(this);e.addNodeGroup(a.node.name,b)}),k.attr("class",function(a){return c.Class.Node.GROUP+" "+o(a)}).each(function(a){var d=d3.select(this),g=c.selectOrCreateChild(d,"g",c.Class.Annotation.INBOX);c.annotation.buildGroup(g,a.inAnnotations,a,e);var k=c.selectOrCreateChild(d,"g",c.Class.Annotation.OUTBOX);c.annotation.buildGroup(k,a.outAnnotations,a,e);var l=j(d,a,e);i(l,a,e,a.node.type===b.NodeType.META);var m=n(d,a,c.Class.Node.SHAPE,l.node());a.node.isGroupNode&&h(m,a,e),i(m,a,e),f(d,a,e),s(d,a,e),p(d,a,e)}),k.exit().each(function(a){e.removeNodeGroup(a.node.name);var b=d3.select(this);a.inAnnotations.list.length>0&&b.select("."+c.Class.Annotation.INBOX).selectAll("."+c.Class.Annotation.GROUP).each(function(b){e.removeAnnotationGroup(b,a)}),a.outAnnotations.list.length>0&&b.select("."+c.Class.Annotation.OUTBOX).selectAll("."+c.Class.Annotation.GROUP).each(function(b){e.removeAnnotationGroup(b,a)})}).remove(),k}function f(a,b,d){if(b.node.isGroupNode){if(b.expanded)return c.buildGroup(a,b,d,c.Class.Subscene.GROUP);c.selectChild(a,"g",c.Class.Subscene.GROUP).remove()}return null}function g(a,b){var d=b.x-b.width/2+b.paddingLeft,e=b.y-b.height/2+b.paddingTop,f=c.selectChild(a,"g",c.Class.Subscene.GROUP);c.translate(f,d,e)}function h(a,b,d){var e=c.selectOrCreateChild(a,"g",c.Class.Node.BUTTON_CONTAINER);c.selectOrCreateChild(e,"circle",c.Class.Node.BUTTON_CIRCLE),c.selectOrCreateChild(e,"path",c.Class.Node.EXPAND_BUTTON).attr("d","M0,-2.2 V2.2 M-2.2,0 H2.2"),c.selectOrCreateChild(e,"path",c.Class.Node.COLLAPSE_BUTTON).attr("d","M-2.2,0 H2.2"),e.on("click",function(a){d3.event.stopPropagation(),d.fire("node-toggle-expand",{name:a.node.name})}),c.positionButton(e,b)}function i(a,b,c,d){return d?void a.attr("pointer-events","none"):void a.on("dblclick",function(a){c.fire("node-toggle-expand",{name:a.node.name})}).on("mouseover",function(a){c.isNodeExpanded(a)||c.fire("node-highlight",{name:a.node.name})}).on("mouseout",function(a){c.isNodeExpanded(a)||c.fire("node-unhighlight",{name:a.node.name})}).on("click",function(a){d3.event.stopPropagation(),c.fire("node-select",{name:a.node.name})})}function j(a,d,e){var f=d.node.name.split("/"),g=f[f.length-1],h=d.node.type===b.NodeType.META&&!d.expanded,i=c.selectOrCreateChild(a,"text",c.Class.Node.LABEL);if(i.attr("dy",".35em").attr("text-anchor","middle"),h){g.length>e.maxMetanodeLabelLength&&(g=g.substr(0,e.maxMetanodeLabelLength-2)+"...");var j=l(e);i.attr("font-size",j(g.length)+"px")}return i.text(g),i}function l(a){return k||(k=d3.scale.linear().domain([a.maxMetanodeLabelLengthLargeFont,a.maxMetanodeLabelLength]).range([a.maxMetanodeLabelLengthFontSize,a.minMetanodeLabelLengthFontSize]).clamp(!0)),k}function m(a,b,d){c.selectChild(a,"text",c.Class.Node.LABEL).transition().attr("x",b.x).attr("y",b.y+d)}function n(a,d,e,f){var g=c.selectOrCreateChild(a,"g",e,f);switch(d.node.type){case b.NodeType.OP:c.selectOrCreateChild(g,"ellipse",c.Class.Node.COLOR_TARGET);break;case b.NodeType.SERIES:var h="annotation",i=d;i.coreGraph&&(h=i.node.hasNonControlEdges?"vertical":"horizontal"),c.selectOrCreateChild(g,"use",c.Class.Node.COLOR_TARGET).attr("xlink:href","#op-series-"+h+"-stamp"),c.selectOrCreateChild(g,"rect",c.Class.Node.COLOR_TARGET).attr({rx:d.radius,ry:d.radius});break;case b.NodeType.BRIDGE:c.selectOrCreateChild(g,"rect",c.Class.Node.COLOR_TARGET).attr({rx:d.radius,ry:d.radius});break;case b.NodeType.META:c.selectOrCreateChild(g,"rect",c.Class.Node.COLOR_TARGET).attr({rx:d.radius,ry:d.radius});break;default:throw Error("Unrecognized node type: "+d.node.type)}return g}function o(a){switch(a.node.type){case b.NodeType.OP:return c.Class.OPNODE;case b.NodeType.META:return c.Class.METANODE;case b.NodeType.SERIES:return c.Class.SERIESNODE;case b.NodeType.BRIDGE:return c.Class.BRIDGENODE;case b.NodeType.ELLIPSIS:return c.Class.ELLIPSISNODE}throw Error("Unrecognized node type: "+a.node.type)}function p(a,d,e){var f=c.selectChild(a,"g",c.Class.Node.SHAPE);switch(d.node.type){case b.NodeType.OP:var h=c.selectChild(f,"ellipse");c.positionEllipse(h,d.x,d.y,d.width,d.height),m(a,d,d.labelOffset);break;case b.NodeType.META:var h=c.selectChild(f,"rect");c.positionRect(h,d.x,d.y,d.width,d.height),d.expanded?(g(a,d),m(a,d,-d.height/2+d.labelHeight/2)):m(a,d,0);break;case b.NodeType.SERIES:var h=c.selectChild(f,"use");c.positionRect(h,d.x,d.y,d.width,d.height),d.expanded?(g(a,d),m(a,d,-d.height/2+d.labelHeight/2)):m(a,d,d.labelOffset);case b.NodeType.BRIDGE:var h=c.selectChild(f,"rect");c.positionRect(h,d.x,d.y,d.width,d.height);break;default:throw Error("Unrecognized node type: "+d.node.type)}}function r(c,d,e,f){var g=a.graph.render.MetanodeColors;switch(d){case q.STRUCTURE:if(e.node.type===a.graph.NodeType.META){var h=e.node.templateId;return null===h?g.UNKNOWN:g.STRUCTURE_PALETTE(c.templateIndex(h),e.expanded)}return e.node.type===a.graph.NodeType.SERIES?e.expanded?g.EXPANDED_COLOR:"white":e.node.type===b.NodeType.BRIDGE?e.structural?"#f0e":e.node.inbound?"#0ef":"#fe0":"white";case q.DEVICE:if(null==e.deviceColors)return g.UNKNOWN;var i=e.node.name,j=a.escapeQuerySelector(i),k=d3.select("svg#svg defs #linearGradients"),l=k.select("linearGradient#"+j);if(0===l.size()){l=k.append("linearGradient").attr("id",i),l.selectAll("*").remove();var m=0;_.each(e.deviceColors,function(a){var b=a.color;l.append("stop").attr("offset",m).attr("stop-color",b),l.append("stop").attr("offset",m+a.proportion).attr("stop-color",b),m+=a.proportion})}return f?g.EXPANDED_COLOR:"url(#"+j+")";case q.COMPUTE_TIME:return f?g.EXPANDED_COLOR:e.computeTimeColor||g.UNKNOWN;case q.MEMORY:return f?g.EXPANDED_COLOR:e.memoryColor||g.UNKNOWN;default:throw new Error("Unknown case to color nodes by")}}function s(b,d,e,f){f=f||c.Class.Node.SHAPE;var g=e.isNodeHighlighted(d.node.name),h=e.isNodeSelected(d.node.name),i=d.isInExtract||d.isOutExtract,j=d.expanded;b.classed("highlighted",g),b.classed("selected",h),b.classed("extract",i),b.classed("expanded",j);var k=b.select("."+f+" ."+c.Class.Node.COLOR_TARGET),l=r(e,q[e.colorBy.toUpperCase()],d,j);if(k.style("fill",l),h)k.style("stroke",null);else{var m="url"===l.substring(0,3)?a.graph.render.MetanodeColors.GRADIENT_OUTLINE:d3.rgb(l).darker().toString();k.style("stroke",m)}}d.buildGroup=e;var k=null;d.buildShape=n,d.nodeClass=o;var q={STRUCTURE:0,DEVICE:1,COMPUTE_TIME:2,MEMORY:3};d.stylize=s}(d=c.node||(c.node={}))}(c=b.scene||(b.scene={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){var b;!function(a){var b;!function(b){function c(b){b.node.isGroupNode&&d(b),b.node.type===a.NodeType.META?f(b):b.node.type===a.NodeType.SERIES&&g(b)}function d(d){var e=d.coreGraph.nodes().map(function(a){return d.coreGraph.node(a)}).concat(d.isolatedInExtract,d.isolatedOutExtract);_.each(e,function(d){switch(d.node.type){case a.NodeType.OP:_.extend(d,b.PARAMS.nodeSize.op);break;case a.NodeType.BRIDGE:_.extend(d,b.PARAMS.nodeSize.bridge);break;case a.NodeType.META:if(d.expanded){var e=d;c(e)}else _.extend(d,b.PARAMS.nodeSize.meta),d.height=b.PARAMS.nodeSize.meta.height(d.node.cardinality);break;case a.NodeType.SERIES:if(d.expanded){_.extend(d,b.PARAMS.nodeSize.series.expanded);var e=d;c(e)}else{var e=d,f=e.node.hasNonControlEdges?b.PARAMS.nodeSize.series.vertical:b.PARAMS.nodeSize.series.horizontal;_.extend(d,f)}break;default:throw Error("Unrecognized node type: "+d.node.type)}h(d)})}function e(b,c){_.extend(b.graph(),{nodeSep:c.nodeSep,rankSep:c.rankSep});var d=[],e=[];if(_.each(b.nodes(),function(c){var f=b.node(c);f.node.type===a.NodeType.BRIDGE?d.push(c):e.push(c)}),!e.length)return{width:0,height:0};dagre.layout(b);var g=(b.graph(),1/0),h=1/0,i=-(1/0),j=-(1/0);return _.each(e,function(c){var d=b.node(c),e=.5*d.width,f=d.x-e-d.inboxWidth,k=d.x+e+d.outboxWidth;g=f<g?f:g,i=k>i?k:i;var l=c.length-c.lastIndexOf(a.NAMESPACE_DELIM),m=3,n=.5*l*m,o=d.x-n,p=d.x+n;g=o<g?o:g,i=p>i?p:i;var q=.5*d.outerHeight,r=d.y-q,s=d.y+q;h=r<h?r:h,j=s>j?s:j}),_.each(b.edges(),function(a){var c=b.edge(a);c.structural||_.each(c.points,function(a){g=a.x<g?a.x:g,i=a.x>i?a.x:i,h=a.y<h?a.y:h,j=a.y>j?a.y:j})}),_.each(b.nodes(),function(a){var c=b.node(a);c.x-=g,c.y-=h}),_.each(b.edges(),function(a){_.each(b.edge(a).points,function(a){a.x-=g,a.y-=h})}),{width:i-g,height:j-h}}function f(a){var c=b.PARAMS.subscene.meta;a=_.extend(a,c),_.extend(a.coreBox,e(a.coreGraph,b.PARAMS.graph.meta));var d=a.isolatedInExtract.length>0;a.inExtractBox.width=d?_(a.isolatedInExtract).pluck("outerWidth").max():0,a.inExtractBox.height=_.reduce(a.isolatedInExtract,function(b,d,e){var f=e>0?c.extractYOffset:0;return d.x=a.inExtractBox.width/2,d.y=b+f+d.outerHeight/2,b+f+d.outerHeight},0);var f=a.isolatedOutExtract.length>0;a.outExtractBox.width=f?_(a.isolatedOutExtract).pluck("outerWidth").max():0,a.outExtractBox.height=_.reduce(a.isolatedOutExtract,function(b,d,e){var f=e>0?c.extractYOffset:0;return d.x=a.outExtractBox.width/2,d.y=b+f+d.outerHeight/2,b+f+d.outerHeight},0),a.width=c.paddingLeft+a.coreBox.width+c.paddingRight+(d?a.inExtractBox.width+c.extractXOffset:0)+(f?c.extractXOffset+a.outExtractBox.width:0),a.height=a.labelHeight+c.paddingTop+Math.max(a.inExtractBox.height,a.coreBox.height,a.outExtractBox.height)+c.paddingBottom}function g(a){var c=a.coreGraph,d=b.PARAMS.subscene.series;_.extend(a,d),_.extend(a.coreBox,e(a.coreGraph,b.PARAMS.graph.series)),_.each(c.nodes(),function(a){c.node(a).excluded=!1}),a.width=a.coreBox.width+d.paddingLeft+d.paddingRight,a.height=a.coreBox.height+d.paddingTop+d.paddingBottom}function h(a){if(a.expanded)return void _.extend(a,{inboxWidth:0,inboxHeight:0,outboxWidth:0,outboxHeight:0,outerWidth:a.width,outerHeight:a.height});var c=a.inAnnotations.list,d=a.outAnnotations.list;_.each(c,function(a){return i(a)}),_.each(d,function(a){return i(a)});var e=b.PARAMS.annotations;a.inboxWidth=c.length>0?_(c).pluck("width").max()+e.xOffset+e.labelWidth+e.labelOffset:0,a.outboxWidth=d.length>0?_(d).pluck("width").max()+e.xOffset+e.labelWidth+e.labelOffset:0;var f=_.reduce(c,function(b,c,d){var f=d>0?e.yOffset:0;return c.dx=-(a.width+c.width)/2-e.xOffset,c.dy=b+f+c.height/2,b+f+c.height},0);_.each(c,function(a){a.dy-=f/2,a.labelOffset=e.labelOffset});var g=_.reduce(d,function(b,c,d){var f=d>0?e.yOffset:0;return c.dx=(a.width+c.width)/2+e.xOffset,c.dy=b+f+c.height/2,b+f+c.height},0);_.each(d,function(a){a.dy-=g/2,a.labelOffset=e.labelOffset});var h=Math.min(a.height/2-a.radius,f/2);h=h<0?0:h;var j=d3.scale.linear().domain([0,c.length-1]).range([-h,h]);_.each(c,function(b,d){b.points=[{dx:b.dx+b.width/2,dy:b.dy},{dx:-a.width/2,dy:c.length>1?j(d):0}]});var k=Math.min(a.height/2-a.radius,g/2);k=k<0?0:k;var l=d3.scale.linear().domain([0,d.length-1]).range([-k,k]);_.each(d,function(b,c){b.points=[{dx:a.width/2,dy:d.length>1?l(c):0},{dx:b.dx-b.width/2,dy:b.dy}]}),a.outerWidth=a.width+a.inboxWidth+a.outboxWidth,a.outerHeight=Math.max(a.height,f,g)}function i(c){switch(c.annotationType){case a.render.AnnotationType.CONSTANT:_.extend(c,b.PARAMS.constant.size);break;case a.render.AnnotationType.SHORTCUT:if(c.node.type===a.NodeType.OP)_.extend(c,b.PARAMS.shortcutSize.op);else if(c.node.type===a.NodeType.META)_.extend(c,b.PARAMS.shortcutSize.meta);else{if(c.node.type!==a.NodeType.SERIES)throw Error("Invalid node type: "+c.node.type);_.extend(c,b.PARAMS.shortcutSize.series)}break;case a.render.AnnotationType.SUMMARY:_.extend(c,b.PARAMS.constant.size)}}b.PARAMS={animation:{duration:250},graph:{meta:{nodeSep:110,rankSep:25},series:{nodeSep:90,rankSep:25},padding:{paddingTop:40,paddingLeft:20}},subscene:{meta:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:20,extractXOffset:50,extractYOffset:20},series:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:10}},nodeSize:{meta:{radius:5,width:60,height:d3.scale.linear().domain([1,200]).range([15,60]).clamp(!0),expandButtonRadius:3},op:{width:15,height:6,radius:3,labelOffset:-8},series:{expanded:{radius:10,labelOffset:0},vertical:{width:16,height:13,labelOffset:-13},horizontal:{width:24,height:8,radius:10,labelOffset:-10}},bridge:{width:20,height:20,radius:2,labelOffset:0}},shortcutSize:{op:{width:10,height:4},meta:{width:12,height:4,radius:1},series:{width:14,height:4}},annotations:{xOffset:10,yOffset:3,labelOffset:2,labelWidth:35},constant:{size:{width:4,height:4}},series:{maxStackCount:3,parallelStackOffsetRatio:.2,towerStackOffsetRatio:.5},minimap:{size:150}},b.scene=c}(b=a.layout||(a.layout={}))}(b=a.graph||(a.graph={}))}(tf||(tf={}));var tf;!function(a){a.COLORS=[{name:"Google Blue",color:"#4184f3",active:"#3a53c5",disabled:"#cad8fc"},{name:"Google Red",color:"#db4437",active:"#8f2a0c",disabled:"#e8c6c1"},{name:"Google Yellow",color:"#f4b400",active:"#db9200",disabled:"#f7e8b0"},{name:"Google Green",color:"#0f9d58",active:"#488046",disabled:"#c2e1cc"},{name:"Purple",color:"#aa46bb",active:"#5c1398",disabled:"#d7bce6"},{name:"Teal",color:"#00abc0",active:"#47828e",disabled:"#c2eaf2"},{name:"Deep Orange",color:"#ff6f42",active:"#ca4a06",disabled:"#f2cbba"},{name:"Lime",color:"#9d9c23",active:"#7f771d",disabled:"#f1f4c2"},{name:"Indigo",color:"#5b6abf",active:"#3e47a9",disabled:"#c5c8e8"},{name:"Pink",color:"#ef6191",active:"#ca1c60",disabled:"#e9b9ce"},{name:"Deep Teal",color:"#00786a",active:"#2b4f43",disabled:"#bededa"},{name:"Deep Pink",color:"#c1175a",active:"#75084f",disabled:"#de8cae"},{name:"Gray",color:"#9E9E9E",active:"#424242",disabled:"F5F5F5"}].reduce(function(a,b){return a[b.name]=b,a},{}),a.OP_GROUP_COLORS=[{color:"Google Red",groups:["gen_legacy_ops","legacy_ops","legacy_flogs_input","legacy_image_input","legacy_input_example_input","legacy_sequence_input","legacy_seti_input_input"]},{color:"Deep Orange",groups:["constant_ops"]},{color:"Indigo",groups:["state_ops"]},{color:"Purple",groups:["nn_ops","nn"]},{color:"Google Green",groups:["math_ops"]},{color:"Lime",groups:["array_ops"]},{color:"Teal",groups:["control_flow_ops","data_flow_ops"]},{color:"Pink",groups:["summary_ops"]},{color:"Deep Pink",groups:["io_ops"]}].reduce(function(a,b){return b.groups.forEach(function(c){a[c]=b.color}),a},{})}(tf||(tf={}));var tf;!function(a){var b;!function(a){var b=.8,c=function(){function a(a,b,c,d,e,f){var g=this;this.svg=a,this.labelPadding=f,this.zoomG=b,this.mainZoom=c,this.maxWandH=e;var h=d3.select(d),i=h.select("svg"),j=i.select("rect"),k=function(a){g.viewpointCoord.x=d3.event.x,g.viewpointCoord.y=d3.event.y,g.updateViewpoint()};this.viewpointCoord={x:0,y:0};var l=d3.behavior.drag().origin(Object).on("drag",k);j.datum(this.viewpointCoord).call(l),i.on("click",function(){if(!d3.event.defaultPrevented){var a=Number(j.attr("width")),b=Number(j.attr("height")),c=d3.mouse(i.node());g.viewpointCoord.x=c[0]-a/2,g.viewpointCoord.y=c[1]-b/2,g.updateViewpoint()}}),this.viewpoint=j.node(),this.minimapSvg=i.node(),this.minimap=d,this.canvas=h.select("canvas.first").node(),this.canvasBuffer=h.select("canvas.second").node()}return a.prototype.updateViewpoint=function(){d3.select(this.viewpoint).attr("x",this.viewpointCoord.x).attr("y",this.viewpointCoord.y);var a=-this.viewpointCoord.x*this.scaleMain/this.scaleMinimap,b=-this.viewpointCoord.y*this.scaleMain/this.scaleMinimap,c=this.mainZoom.translate([a,b]).event;d3.select(this.zoomG).call(c)},a.prototype.update=function(){for(var a=this,b=d3.select(this.svg),c="",d=0;d<document.styleSheets.length;d++)try{var e=document.styleSheets[d].cssRules||document.styleSheets[d].rules;if(null==e)continue;for(var f=0;f<e.length;f++)c+=e[f].cssText+"\n"}catch(a){if("SecurityError"!==a.name)throw a}var g=b.append("style");g.text(c);var h=d3.select(this.zoomG),i=h.attr("transform");h.attr("transform",null);var j=this.zoomG.getBBox();j.height+=this.labelPadding,b.attr({width:j.width,height:j.height}),this.scaleMinimap=this.maxWandH/Math.max(j.width,j.height),this.minimapSize={width:j.width*this.scaleMinimap,height:j.height*this.scaleMinimap},d3.select(this.minimapSvg).attr(this.minimapSize),d3.select(this.canvasBuffer).attr(this.minimapSize),null!=this.translate&&null!=this.zoom&&requestAnimationFrame(function(){return a.zoom()});var k=(new XMLSerializer).serializeToString(this.svg);g.remove(),b.attr({width:null,height:null}),h.attr("transform",i);var l=new Image;l.onload=function(){var b=a.canvasBuffer.getContext("2d");b.clearRect(0,0,a.canvasBuffer.width,a.canvasBuffer.height),b.drawImage(l,0,0,a.minimapSize.width,a.minimapSize.height),requestAnimationFrame(function(){d3.select(a.canvasBuffer).style("display",null),d3.select(a.canvas).style("display","none"),b=[a.canvasBuffer,a.canvas],a.canvas=b[0],a.canvasBuffer=b[1];var b})},l.src="data:image/svg+xml;base64,"+btoa(k)},a.prototype.zoom=function(a,c){this.translate=a||this.translate,this.scaleMain=c||this.scaleMain;var d=this.svg.getBoundingClientRect(),e=d3.select(this.viewpoint);this.viewpointCoord.x=-this.translate[0]*this.scaleMinimap/this.scaleMain,this.viewpointCoord.y=-this.translate[1]*this.scaleMinimap/this.scaleMain;var f=d.width*this.scaleMinimap/this.scaleMain,g=d.height*this.scaleMinimap/this.scaleMain;e.attr({x:this.viewpointCoord.x,y:this.viewpointCoord.y,width:f,height:g});var h=this.minimapSize.width,i=this.minimapSize.height,j=this.viewpointCoord.x,k=this.viewpointCoord.y,l=Math.min(Math.max(0,j+f),h)-Math.min(Math.max(0,j),h),m=Math.min(Math.max(0,k+g),i)-Math.min(Math.max(0,k),i),n=l*m/(h*i);n<b?this.minimap.classList.remove("hidden"):this.minimap.classList.add("hidden")},a}();a.Minimap=c}(b=a.scene||(a.scene={}))}(tf||(tf={}));var tf;!function(a){var b;!function(a){var b;!function(b){function c(b){b.node.isGroupNode&&d(b),b.node.type===a.NodeType.META?f(b):b.node.type===a.NodeType.SERIES&&g(b)}function d(d){var e=d.coreGraph.nodes().map(function(a){return d.coreGraph.node(a)}).concat(d.isolatedInExtract,d.isolatedOutExtract);_.each(e,function(d){switch(d.node.type){case a.NodeType.OP:_.extend(d,b.PARAMS.nodeSize.op);break;case a.NodeType.BRIDGE:_.extend(d,b.PARAMS.nodeSize.bridge);break;case a.NodeType.META:if(d.expanded){var e=d;c(e)}else _.extend(d,b.PARAMS.nodeSize.meta),d.height=b.PARAMS.nodeSize.meta.height(d.node.cardinality);break;case a.NodeType.SERIES:if(d.expanded){_.extend(d,b.PARAMS.nodeSize.series.expanded);var e=d;c(e)}else{var e=d,f=e.node.hasNonControlEdges?b.PARAMS.nodeSize.series.vertical:b.PARAMS.nodeSize.series.horizontal;_.extend(d,f)}break;default:throw Error("Unrecognized node type: "+d.node.type)}h(d)})}function e(b,c){_.extend(b.graph(),{nodeSep:c.nodeSep,rankSep:c.rankSep});var d=[],e=[];if(_.each(b.nodes(),function(c){var f=b.node(c);f.node.type===a.NodeType.BRIDGE?d.push(c):e.push(c)}),!e.length)return{width:0,height:0};dagre.layout(b);var g=(b.graph(),1/0),h=1/0,i=-(1/0),j=-(1/0);return _.each(e,function(c){
var d=b.node(c),e=.5*d.width,f=d.x-e-d.inboxWidth,k=d.x+e+d.outboxWidth;g=f<g?f:g,i=k>i?k:i;var l=c.length-c.lastIndexOf(a.NAMESPACE_DELIM),m=3,n=.5*l*m,o=d.x-n,p=d.x+n;g=o<g?o:g,i=p>i?p:i;var q=.5*d.outerHeight,r=d.y-q,s=d.y+q;h=r<h?r:h,j=s>j?s:j}),_.each(b.edges(),function(a){var c=b.edge(a);c.structural||_.each(c.points,function(a){g=a.x<g?a.x:g,i=a.x>i?a.x:i,h=a.y<h?a.y:h,j=a.y>j?a.y:j})}),_.each(b.nodes(),function(a){var c=b.node(a);c.x-=g,c.y-=h}),_.each(b.edges(),function(a){_.each(b.edge(a).points,function(a){a.x-=g,a.y-=h})}),{width:i-g,height:j-h}}function f(a){var c=b.PARAMS.subscene.meta;a=_.extend(a,c),_.extend(a.coreBox,e(a.coreGraph,b.PARAMS.graph.meta));var d=a.isolatedInExtract.length>0;a.inExtractBox.width=d?_(a.isolatedInExtract).pluck("outerWidth").max():0,a.inExtractBox.height=_.reduce(a.isolatedInExtract,function(b,d,e){var f=e>0?c.extractYOffset:0;return d.x=a.inExtractBox.width/2,d.y=b+f+d.outerHeight/2,b+f+d.outerHeight},0);var f=a.isolatedOutExtract.length>0;a.outExtractBox.width=f?_(a.isolatedOutExtract).pluck("outerWidth").max():0,a.outExtractBox.height=_.reduce(a.isolatedOutExtract,function(b,d,e){var f=e>0?c.extractYOffset:0;return d.x=a.outExtractBox.width/2,d.y=b+f+d.outerHeight/2,b+f+d.outerHeight},0),a.width=c.paddingLeft+a.coreBox.width+c.paddingRight+(d?a.inExtractBox.width+c.extractXOffset:0)+(f?c.extractXOffset+a.outExtractBox.width:0),a.height=a.labelHeight+c.paddingTop+Math.max(a.inExtractBox.height,a.coreBox.height,a.outExtractBox.height)+c.paddingBottom}function g(a){var c=a.coreGraph,d=b.PARAMS.subscene.series;_.extend(a,d),_.extend(a.coreBox,e(a.coreGraph,b.PARAMS.graph.series)),_.each(c.nodes(),function(a){c.node(a).excluded=!1}),a.width=a.coreBox.width+d.paddingLeft+d.paddingRight,a.height=a.coreBox.height+d.paddingTop+d.paddingBottom}function h(a){if(a.expanded)return void _.extend(a,{inboxWidth:0,inboxHeight:0,outboxWidth:0,outboxHeight:0,outerWidth:a.width,outerHeight:a.height});var c=a.inAnnotations.list,d=a.outAnnotations.list;_.each(c,function(a){return i(a)}),_.each(d,function(a){return i(a)});var e=b.PARAMS.annotations;a.inboxWidth=c.length>0?_(c).pluck("width").max()+e.xOffset+e.labelWidth+e.labelOffset:0,a.outboxWidth=d.length>0?_(d).pluck("width").max()+e.xOffset+e.labelWidth+e.labelOffset:0;var f=_.reduce(c,function(b,c,d){var f=d>0?e.yOffset:0;return c.dx=-(a.width+c.width)/2-e.xOffset,c.dy=b+f+c.height/2,b+f+c.height},0);_.each(c,function(a){a.dy-=f/2,a.labelOffset=e.labelOffset});var g=_.reduce(d,function(b,c,d){var f=d>0?e.yOffset:0;return c.dx=(a.width+c.width)/2+e.xOffset,c.dy=b+f+c.height/2,b+f+c.height},0);_.each(d,function(a){a.dy-=g/2,a.labelOffset=e.labelOffset});var h=Math.min(a.height/2-a.radius,f/2);h=h<0?0:h;var j=d3.scale.linear().domain([0,c.length-1]).range([-h,h]);_.each(c,function(b,d){b.points=[{dx:b.dx+b.width/2,dy:b.dy},{dx:-a.width/2,dy:c.length>1?j(d):0}]});var k=Math.min(a.height/2-a.radius,g/2);k=k<0?0:k;var l=d3.scale.linear().domain([0,d.length-1]).range([-k,k]);_.each(d,function(b,c){b.points=[{dx:a.width/2,dy:d.length>1?l(c):0},{dx:b.dx-b.width/2,dy:b.dy}]}),a.outerWidth=a.width+a.inboxWidth+a.outboxWidth,a.outerHeight=Math.max(a.height,f,g)}function i(c){switch(c.annotationType){case a.render.AnnotationType.CONSTANT:_.extend(c,b.PARAMS.constant.size);break;case a.render.AnnotationType.SHORTCUT:if(c.node.type===a.NodeType.OP)_.extend(c,b.PARAMS.shortcutSize.op);else if(c.node.type===a.NodeType.META)_.extend(c,b.PARAMS.shortcutSize.meta);else{if(c.node.type!==a.NodeType.SERIES)throw Error("Invalid node type: "+c.node.type);_.extend(c,b.PARAMS.shortcutSize.series)}break;case a.render.AnnotationType.SUMMARY:_.extend(c,b.PARAMS.constant.size)}}b.PARAMS={animation:{duration:250},graph:{meta:{nodeSep:110,rankSep:25},series:{nodeSep:90,rankSep:25},padding:{paddingTop:40,paddingLeft:20}},subscene:{meta:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:20,extractXOffset:50,extractYOffset:20},series:{paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,labelHeight:10}},nodeSize:{meta:{radius:5,width:60,height:d3.scale.linear().domain([1,200]).range([15,60]).clamp(!0),expandButtonRadius:3},op:{width:15,height:6,radius:3,labelOffset:-8},series:{expanded:{radius:10,labelOffset:0},vertical:{width:16,height:13,labelOffset:-13},horizontal:{width:24,height:8,radius:10,labelOffset:-10}},bridge:{width:20,height:20,radius:2,labelOffset:0}},shortcutSize:{op:{width:10,height:4},meta:{width:12,height:4,radius:1},series:{width:14,height:4}},annotations:{xOffset:10,yOffset:3,labelOffset:2,labelWidth:35},constant:{size:{width:4,height:4}},series:{maxStackCount:3,parallelStackOffsetRatio:.2,towerStackOffsetRatio:.5},minimap:{size:150}},b.scene=c}(b=a.layout||(a.layout={}))}(b=a.graph||(a.graph={}))}(tf||(tf={})),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.dagre=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={graphlib:a("./lib/graphlib"),layout:a("./lib/layout"),debug:a("./lib/debug"),util:{time:a("./lib/util").time,notime:a("./lib/util").notime},version:a("./lib/version")}},{"./lib/debug":6,"./lib/graphlib":7,"./lib/layout":9,"./lib/util":29,"./lib/version":30}],2:[function(a,b,c){"use strict";function f(a){function c(a){return function(b){return a.edge(b).weight}}var b="greedy"===a.graph().acyclicer?e(a,c(a)):g(a);d.each(b,function(b){var c=a.edge(b);a.removeEdge(b),c.forwardName=b.name,c.reversed=!0,a.setEdge(b.w,b.v,c,d.uniqueId("rev"))})}function g(a){function f(g){d.has(e,g)||(e[g]=!0,c[g]=!0,d.each(a.outEdges(g),function(a){d.has(c,a.w)?b.push(a):f(a.w)}),delete c[g])}var b=[],c={},e={};return d.each(a.nodes(),f),b}function h(a){d.each(a.edges(),function(b){var c=a.edge(b);if(c.reversed){a.removeEdge(b);var d=c.forwardName;delete c.reversed,delete c.forwardName,a.setEdge(b.w,b.v,c,d)}})}var d=a("./lodash"),e=a("./greedy-fas");b.exports={run:f,undo:h}},{"./greedy-fas":8,"./lodash":10}],3:[function(a,b,c){function f(a){function b(c){var e=a.children(c),f=a.node(c);if(e.length&&d.each(e,b),d.has(f,"minRank")){f.borderLeft=[],f.borderRight=[];for(var h=f.minRank,i=f.maxRank+1;h<i;++h)g(a,"borderLeft","_bl",c,f,h),g(a,"borderRight","_br",c,f,h)}}d.each(a.children(),b)}function g(a,b,c,d,f,g){var h={width:0,height:0,rank:g,borderType:b},i=f[b][g-1],j=e.addDummyNode(a,"border",h,c);f[b][g]=j,a.setParent(j,d),i&&a.setEdge(i,j,{weight:1})}var d=a("./lodash"),e=a("./util");b.exports=f},{"./lodash":10,"./util":29}],4:[function(a,b,c){"use strict";function e(a){var b=a.graph().rankdir.toLowerCase();"lr"!==b&&"rl"!==b||g(a)}function f(a){var b=a.graph().rankdir.toLowerCase();"bt"!==b&&"rl"!==b||i(a),"lr"!==b&&"rl"!==b||(k(a),g(a))}function g(a){d.each(a.nodes(),function(b){h(a.node(b))}),d.each(a.edges(),function(b){h(a.edge(b))})}function h(a){var b=a.width;a.width=a.height,a.height=b}function i(a){d.each(a.nodes(),function(b){j(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.each(c.points,j),d.has(c,"y")&&j(c)})}function j(a){a.y=-a.y}function k(a){d.each(a.nodes(),function(b){l(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.each(c.points,l),d.has(c,"x")&&l(c)})}function l(a){var b=a.x;a.x=a.y,a.y=b}var d=a("./lodash");b.exports={adjust:e,undo:f}},{"./lodash":10}],5:[function(a,b,c){function d(){var a={};a._next=a._prev=a,this._sentinel=a}function e(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev}function f(a,b){if("_next"!==a&&"_prev"!==a)return b}b.exports=d,d.prototype.dequeue=function(){var a=this._sentinel,b=a._prev;if(b!==a)return e(b),b},d.prototype.enqueue=function(a){var b=this._sentinel;a._prev&&a._next&&e(a),a._next=b._next,b._next._prev=a,b._next=a,a._prev=b},d.prototype.toString=function(){for(var a=[],b=this._sentinel,c=b._prev;c!==b;)a.push(JSON.stringify(c,f)),c=c._prev;return"["+a.join(", ")+"]"}},{}],6:[function(a,b,c){function g(a){var b=e.buildLayerMatrix(a),c=new f({compound:!0,multigraph:!0}).setGraph({});return d.each(a.nodes(),function(b){c.setNode(b,{label:b}),c.setParent(b,"layer"+a.node(b).rank)}),d.each(a.edges(),function(a){c.setEdge(a.v,a.w,{},a.name)}),d.each(b,function(a,b){var e="layer"+b;c.setNode(e,{rank:"same"}),d.reduce(a,function(a,b){return c.setEdge(a,b,{style:"invis"}),b})}),c}var d=a("./lodash"),e=a("./util"),f=a("./graphlib").Graph;b.exports={debugOrdering:g}},{"./graphlib":7,"./lodash":10,"./util":29}],7:[function(a,b,c){var d;if("function"==typeof a)try{d=a("graphlib")}catch(a){}d||(d=window.graphlib),b.exports=d},{graphlib:void 0}],8:[function(a,b,c){function h(a,b){if(a.nodeCount()<=1)return[];var c=k(a,b||g),e=i(c.graph,c.buckets,c.zeroIdx);return d.flatten(d.map(e,function(b){return a.outEdges(b.v,b.w)}),!0)}function i(a,b,c){for(var g,d=[],e=b[b.length-1],f=b[0];a.nodeCount();){for(;g=f.dequeue();)j(a,b,c,g);for(;g=e.dequeue();)j(a,b,c,g);if(a.nodeCount())for(var h=b.length-2;h>0;--h)if(g=b[h].dequeue()){d=d.concat(j(a,b,c,g,!0));break}}return d}function j(a,b,c,e,f){var g=f?[]:void 0;return d.each(a.inEdges(e.v),function(d){var e=a.edge(d),h=a.node(d.v);f&&g.push({v:d.v,w:d.w}),h.out-=e,l(b,c,h)}),d.each(a.outEdges(e.v),function(d){var e=a.edge(d),f=d.w,g=a.node(f);g.in-=e,l(b,c,g)}),a.removeNode(e.v),g}function k(a,b){var c=new e,g=0,h=0;d.each(a.nodes(),function(a){c.setNode(a,{v:a,in:0,out:0})}),d.each(a.edges(),function(a){var d=c.edge(a.v,a.w)||0,e=b(a),f=d+e;c.setEdge(a.v,a.w,f),h=Math.max(h,c.node(a.v).out+=e),g=Math.max(g,c.node(a.w).in+=e)});var i=d.range(h+g+3).map(function(){return new f}),j=g+1;return d.each(c.nodes(),function(a){l(i,j,c.node(a))}),{graph:c,buckets:i,zeroIdx:j}}function l(a,b,c){c.out?c.in?a[c.out-c.in+b].enqueue(c):a[a.length-1].enqueue(c):a[0].enqueue(c)}var d=a("./lodash"),e=a("./graphlib").Graph,f=a("./data/list");b.exports=h;var g=d.constant(1)},{"./data/list":5,"./graphlib":7,"./lodash":10}],9:[function(a,b,c){"use strict";function r(a,b){var c=b&&b.debugTiming?p.time:p.notime;c("layout",function(){var b=c("  buildLayoutGraph",function(){return C(a)});c("  runLayout",function(){s(b,c)}),c("  updateInputGraph",function(){t(a,b)})})}function s(a,b){b("    makeSpaceForEdgeLabels",function(){D(a)}),b("    removeSelfEdges",function(){M(a)}),b("    acyclic",function(){e.run(a)}),b("    nestingGraph.run",function(){k.run(a)}),b("    rank",function(){g(p.asNonCompoundGraph(a))}),b("    injectEdgeLabelProxies",function(){E(a)}),b("    removeEmptyRanks",function(){j(a)}),b("    nestingGraph.cleanup",function(){k.cleanup(a)}),b("    normalizeRanks",function(){h(a)}),b("    assignRankMinMax",function(){F(a)}),b("    removeEdgeLabelProxies",function(){G(a)}),b("    normalize.run",function(){f.run(a)}),b("    parentDummyChains",function(){i(a)}),b("    addBorderSegments",function(){l(a)}),b("    order",function(){n(a)}),b("    insertSelfEdges",function(){N(a)}),b("    adjustCoordinateSystem",function(){m.adjust(a)}),b("    position",function(){o(a)}),b("    positionSelfEdges",function(){O(a)}),b("    removeBorderNodes",function(){L(a)}),b("    normalize.undo",function(){f.undo(a)}),b("    fixupEdgeLabelCoords",function(){J(a)}),b("    undoCoordinateSystem",function(){m.undo(a)}),b("    translateGraph",function(){H(a)}),b("    assignNodeIntersects",function(){I(a)}),b("    reversePoints",function(){K(a)}),b("    acyclic.undo",function(){e.undo(a)})}function t(a,b){d.each(a.nodes(),function(c){var d=a.node(c),e=b.node(c);d&&(d.x=e.x,d.y=e.y,b.children(c).length&&(d.width=e.width,d.height=e.height))}),d.each(a.edges(),function(c){var e=a.edge(c),f=b.edge(c);e.points=f.points,d.has(f,"x")&&(e.x=f.x,e.y=f.y)}),a.graph().width=b.graph().width,a.graph().height=b.graph().height}function C(a){var b=new q({multigraph:!0,compound:!0}),c=Q(a.graph());return b.setGraph(d.merge({},v,P(c,u),d.pick(c,w))),d.each(a.nodes(),function(c){var e=Q(a.node(c));b.setNode(c,d.defaults(P(e,x),y)),b.setParent(c,a.parent(c))}),d.each(a.edges(),function(c){var e=Q(a.edge(c));b.setEdge(c,d.merge({},A,P(e,z),d.pick(e,B)))}),b}function D(a){var b=a.graph();b.ranksep/=2,d.each(a.edges(),function(c){var d=a.edge(c);d.minlen*=2,"c"!==d.labelpos.toLowerCase()&&("TB"===b.rankdir||"BT"===b.rankdir?d.width+=d.labeloffset:d.height+=d.labeloffset)})}function E(a){d.each(a.edges(),function(b){var c=a.edge(b);if(c.width&&c.height){var d=a.node(b.v),e=a.node(b.w),f={rank:(e.rank-d.rank)/2+d.rank,e:b};p.addDummyNode(a,"edge-proxy",f,"_ep")}})}function F(a){var b=0;d.each(a.nodes(),function(c){var e=a.node(c);e.borderTop&&(e.minRank=a.node(e.borderTop).rank,e.maxRank=a.node(e.borderBottom).rank,b=d.max(b,e.maxRank))}),a.graph().maxRank=b}function G(a){d.each(a.nodes(),function(b){var c=a.node(b);"edge-proxy"===c.dummy&&(a.edge(c.e).labelRank=c.rank,a.removeNode(b))})}function H(a){function j(a){var d=a.x,g=a.y,h=a.width,i=a.height;b=Math.min(b,d-h/2),c=Math.max(c,d+h/2),e=Math.min(e,g-i/2),f=Math.max(f,g+i/2)}var b=Number.POSITIVE_INFINITY,c=0,e=Number.POSITIVE_INFINITY,f=0,g=a.graph(),h=g.marginx||0,i=g.marginy||0;d.each(a.nodes(),function(b){j(a.node(b))}),d.each(a.edges(),function(b){var c=a.edge(b);d.has(c,"x")&&j(c)}),b-=h,e-=i,d.each(a.nodes(),function(c){var d=a.node(c);d.x-=b,d.y-=e}),d.each(a.edges(),function(c){var f=a.edge(c);d.each(f.points,function(a){a.x-=b,a.y-=e}),d.has(f,"x")&&(f.x-=b),d.has(f,"y")&&(f.y-=e)}),g.width=c-b+h,g.height=f-e+i}function I(a){d.each(a.edges(),function(b){var f,g,c=a.edge(b),d=a.node(b.v),e=a.node(b.w);c.points?(f=c.points[0],g=c.points[c.points.length-1]):(c.points=[],f=e,g=d),c.points.unshift(p.intersectRect(d,f)),c.points.push(p.intersectRect(e,g))})}function J(a){d.each(a.edges(),function(b){var c=a.edge(b);if(d.has(c,"x"))switch("l"!==c.labelpos&&"r"!==c.labelpos||(c.width-=c.labeloffset),c.labelpos){case"l":c.x-=c.width/2+c.labeloffset;break;case"r":c.x+=c.width/2+c.labeloffset}})}function K(a){d.each(a.edges(),function(b){var c=a.edge(b);c.reversed&&c.points.reverse()})}function L(a){d.each(a.nodes(),function(b){if(a.children(b).length){var c=a.node(b),e=a.node(c.borderTop),f=a.node(c.borderBottom),g=a.node(d.last(c.borderLeft)),h=a.node(d.last(c.borderRight));c.width=Math.abs(h.x-g.x),c.height=Math.abs(f.y-e.y),c.x=g.x+c.width/2,c.y=e.y+c.height/2}}),d.each(a.nodes(),function(b){"border"===a.node(b).dummy&&a.removeNode(b)})}function M(a){d.each(a.edges(),function(b){if(b.v===b.w){var c=a.node(b.v);c.selfEdges||(c.selfEdges=[]),c.selfEdges.push({e:b,label:a.edge(b)}),a.removeEdge(b)}})}function N(a){var b=p.buildLayerMatrix(a);d.each(b,function(b){var c=0;d.each(b,function(b,e){var f=a.node(b);f.order=e+c,d.each(f.selfEdges,function(b){p.addDummyNode(a,"selfedge",{width:b.label.width,height:b.label.height,rank:f.rank,order:e+ ++c,e:b.e,label:b.label},"_se")}),delete f.selfEdges})})}function O(a){d.each(a.nodes(),function(b){var c=a.node(b);if("selfedge"===c.dummy){var d=a.node(c.e.v),e=d.x+d.width/2,f=d.y,g=c.x-e,h=d.height/2;a.setEdge(c.e,c.label),a.removeNode(b),c.label.points=[{x:e+2*g/3,y:f-h},{x:e+5*g/6,y:f-h},{x:e+g,y:f},{x:e+5*g/6,y:f+h},{x:e+2*g/3,y:f+h}],c.label.x=c.x,c.label.y=c.y}})}function P(a,b){return d.mapValues(d.pick(a,b),Number)}function Q(a){var b={};return d.each(a,function(a,c){b[c.toLowerCase()]=a}),b}var d=a("./lodash"),e=a("./acyclic"),f=a("./normalize"),g=a("./rank"),h=a("./util").normalizeRanks,i=a("./parent-dummy-chains"),j=a("./util").removeEmptyRanks,k=a("./nesting-graph"),l=a("./add-border-segments"),m=a("./coordinate-system"),n=a("./order"),o=a("./position"),p=a("./util"),q=a("./graphlib").Graph;b.exports=r;var u=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],x=["width","height"],y={width:0,height:0},z=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},B=["labelpos"]},{"./acyclic":2,"./add-border-segments":3,"./coordinate-system":4,"./graphlib":7,"./lodash":10,"./nesting-graph":11,"./normalize":12,"./order":17,"./parent-dummy-chains":22,"./position":24,"./rank":26,"./util":29}],10:[function(a,b,c){var d;if("function"==typeof a)try{d=a("lodash")}catch(a){}d||(d=window._),b.exports=d},{lodash:void 0}],11:[function(a,b,c){function f(a){var b=e.addDummyNode(a,"root",{},"_root"),c=h(a),f=d.max(c)-1,j=2*f+1;a.graph().nestingRoot=b,d.each(a.edges(),function(b){a.edge(b).minlen*=j});var k=i(a)+1;d.each(a.children(),function(d){g(a,b,j,k,f,c,d)}),a.graph().nodeRankFactor=j}function g(a,b,c,f,h,i,j){var k=a.children(j);if(!k.length)return void(j!==b&&a.setEdge(b,j,{weight:0,minlen:c}));var l=e.addBorderNode(a,"_bt"),m=e.addBorderNode(a,"_bb"),n=a.node(j);a.setParent(l,j),n.borderTop=l,a.setParent(m,j),n.borderBottom=m,d.each(k,function(d){g(a,b,c,f,h,i,d);var e=a.node(d),k=e.borderTop?e.borderTop:d,n=e.borderBottom?e.borderBottom:d,o=e.borderTop?f:2*f,p=k!==n?1:h-i[j]+1;a.setEdge(l,k,{weight:o,minlen:p,nestingEdge:!0}),a.setEdge(n,m,{weight:o,minlen:p,nestingEdge:!0})}),a.parent(j)||a.setEdge(b,l,{weight:0,minlen:h+i[j]})}function h(a){function c(e,f){var g=a.children(e);g&&g.length&&d.each(g,function(a){c(a,f+1)}),b[e]=f}var b={};return d.each(a.children(),function(a){c(a,1)}),b}function i(a){return d.reduce(a.edges(),function(b,c){return b+a.edge(c).weight},0)}function j(a){var b=a.graph();a.removeNode(b.nestingRoot),delete b.nestingRoot,d.each(a.edges(),function(b){var c=a.edge(b);c.nestingEdge&&a.removeEdge(b)})}var d=a("./lodash"),e=a("./util");b.exports={run:f,cleanup:j}},{"./lodash":10,"./util":29}],12:[function(a,b,c){"use strict";function f(a){a.graph().dummyChains=[],d.each(a.edges(),function(b){g(a,b)})}function g(a,b){var c=b.v,d=a.node(c).rank,f=b.w,g=a.node(f).rank,h=b.name,i=a.edge(b),j=i.labelRank;if(g!==d+1){a.removeEdge(b);var k,l,m;for(m=0,++d;d<g;++m,++d)i.points=[],l={width:0,height:0,edgeLabel:i,edgeObj:b,rank:d},k=e.addDummyNode(a,"edge",l,"_d"),d===j&&(l.width=i.width,l.height=i.height,l.dummy="edge-label",l.labelpos=i.labelpos),a.setEdge(c,k,{weight:i.weight},h),0===m&&a.graph().dummyChains.push(k),c=k;a.setEdge(c,f,{weight:i.weight},h)}}function h(a){d.each(a.graph().dummyChains,function(b){var e,c=a.node(b),d=c.edgeLabel;for(a.setEdge(c.edgeObj,d);c.dummy;)e=a.successors(b)[0],a.removeNode(b),d.points.push({x:c.x,y:c.y}),"edge-label"===c.dummy&&(d.x=c.x,d.y=c.y,d.width=c.width,d.height=c.height),b=e,c=a.node(b)})}var d=a("./lodash"),e=a("./util");b.exports={run:f,undo:h}},{"./lodash":10,"./util":29}],13:[function(a,b,c){function e(a,b,c){var f,e={};d.each(c,function(c){for(var g,h,d=a.parent(c);d;){if(g=a.parent(d),g?(h=e[g],e[g]=d):(h=f,f=d),h&&h!==d)return void b.setEdge(h,d);d=g}})}var d=a("../lodash");b.exports=e},{"../lodash":10}],14:[function(a,b,c){function e(a,b){return d.map(b,function(b){var c=a.inEdges(b);if(c.length){var e=d.reduce(c,function(b,c){var d=a.edge(c),e=a.node(c.v);return{sum:b.sum+d.weight*e.order,weight:b.weight+d.weight}},{sum:0,weight:0});return{v:b,barycenter:e.sum/e.weight,weight:e.weight}}return{v:b}})}var d=a("../lodash");b.exports=e},{"../lodash":10}],15:[function(a,b,c){function f(a,b,c){var f=g(a),h=new e({compound:!0}).setGraph({root:f}).setDefaultNodeLabel(function(b){return a.node(b)});return d.each(a.nodes(),function(e){var g=a.node(e),i=a.parent(e);(g.rank===b||g.minRank<=b&&b<=g.maxRank)&&(h.setNode(e),h.setParent(e,i||f),d.each(a[c](e),function(b){var c=b.v===e?b.w:b.v,f=h.edge(c,e),g=d.isUndefined(f)?0:f.weight;h.setEdge(c,e,{weight:a.edge(b).weight+g})}),d.has(g,"minRank")&&h.setNode(e,{borderLeft:g.borderLeft[b],borderRight:g.borderRight[b]}))}),h}function g(a){for(var b;a.hasNode(b=d.uniqueId("_root")););return b}var d=a("../lodash"),e=a("../graphlib").Graph;b.exports=f},{"../graphlib":7,"../lodash":10}],16:[function(a,b,c){"use strict";function e(a,b){for(var c=0,d=1;d<b.length;++d)c+=f(a,b[d-1],b[d]);return c}function f(a,b,c){for(var e=d.zipObject(c,d.map(c,function(a,b){return b})),f=d.flatten(d.map(b,function(b){return d.chain(a.outEdges(b)).map(function(b){return{pos:e[b.w],weight:a.edge(b).weight}}).sortBy("pos").value()}),!0),g=1;g<c.length;)g<<=1;var h=2*g-1;g-=1;var i=d.map(new Array(h),function(){return 0}),j=0;return d.each(f.forEach(function(a){var b=a.pos+g;i[b]+=a.weight;for(var c=0;b>0;)b%2&&(c+=i[b+1]),b=b-1>>1,i[b]+=a.weight;j+=a.weight*c})),j}var d=a("../lodash");b.exports=e},{"../lodash":10}],17:[function(a,b,c){"use strict";function l(a){var b=k.maxRank(a),c=m(a,d.range(1,b+1),"inEdges"),g=m(a,d.range(b-1,-1,-1),"outEdges"),h=e(a);o(a,h);for(var j,i=Number.POSITIVE_INFINITY,l=0,p=0;p<4;++l,++p){n(l%2?c:g,l%4>=2),h=k.buildLayerMatrix(a);var q=f(a,h);q<i&&(p=0,j=d.cloneDeep(h),i=q)}o(a,j)}function m(a,b,c){return d.map(b,function(b){return h(a,b,c)})}function n(a,b){var c=new j;d.each(a,function(a){var e=a.graph().root,f=g(a,e,c,b);d.each(f.vs,function(b,c){a.node(b).order=c}),i(a,c,f.vs)})}function o(a,b){d.each(b,function(b){d.each(b,function(b,c){a.node(b).order=c})})}var d=a("../lodash"),e=a("./init-order"),f=a("./cross-count"),g=a("./sort-subgraph"),h=a("./build-layer-graph"),i=a("./add-subgraph-constraints"),j=a("../graphlib").Graph,k=a("../util");b.exports=l},{"../graphlib":7,"../lodash":10,"../util":29,"./add-subgraph-constraints":13,"./build-layer-graph":15,"./cross-count":16,"./init-order":18,"./sort-subgraph":20}],18:[function(a,b,c){"use strict";function e(a){function g(c){if(!d.has(b,c)){b[c]=!0;var e=a.node(c);f[e.rank].push(c),d.each(a.successors(c),g)}}var b={},c=d.filter(a.nodes(),function(b){return!a.children(b).length}),e=d.max(d.map(c,function(b){return a.node(b).rank})),f=d.map(d.range(e+1),function(){return[]}),h=d.sortBy(c,function(b){return a.node(b).rank});return d.each(h,g),f}var d=a("../lodash");b.exports=e},{"../lodash":10}],19:[function(a,b,c){"use strict";function e(a,b){var c={};d.each(a,function(a,b){var e=c[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:b};d.isUndefined(a.barycenter)||(e.barycenter=a.barycenter,e.weight=a.weight)}),d.each(b.edges(),function(a){var b=c[a.v],e=c[a.w];d.isUndefined(b)||d.isUndefined(e)||(e.indegree++,b.out.push(c[a.w]))});var e=d.filter(c,function(a){return!a.indegree});return f(e)}function f(a){function c(a){return function(b){b.merged||(d.isUndefined(b.barycenter)||d.isUndefined(a.barycenter)||b.barycenter>=a.barycenter)&&g(a,b)}}function e(b){return function(c){c.in.push(b),0===--c.indegree&&a.push(c)}}for(var b=[];a.length;){var f=a.pop();b.push(f),d.each(f.in.reverse(),c(f)),d.each(f.out,e(f))}return d.chain(b).filter(function(a){return!a.merged}).map(function(a){return d.pick(a,["vs","i","barycenter","weight"])}).value()}function g(a,b){var c=0,d=0;a.weight&&(c+=a.barycenter*a.weight,d+=a.weight),b.weight&&(c+=b.barycenter*b.weight,d+=b.weight),a.vs=b.vs.concat(a.vs),a.barycenter=c/d,a.weight=d,a.i=Math.min(b.i,a.i),b.merged=!0}var d=a("../lodash");b.exports=e},{"../lodash":10}],20:[function(a,b,c){function h(a,b,c,k){var l=a.children(b),m=a.node(b),n=m?m.borderLeft:void 0,o=m?m.borderRight:void 0,p={};n&&(l=d.filter(l,function(a){return a!==n&&a!==o}));var q=e(a,l);d.each(q,function(b){if(a.children(b.v).length){var e=h(a,b.v,c,k);p[b.v]=e,d.has(e,"barycenter")&&j(b,e)}});var r=f(q,c);i(r,p);var s=g(r,k);if(n&&(s.vs=d.flatten([n,s.vs,o],!0),a.predecessors(n).length)){var t=a.node(a.predecessors(n)[0]),u=a.node(a.predecessors(o)[0]);d.has(s,"barycenter")||(s.barycenter=0,s.weight=0),s.barycenter=(s.barycenter*s.weight+t.order+u.order)/(s.weight+2),s.weight+=2}return s}function i(a,b){d.each(a,function(a){a.vs=d.flatten(a.vs.map(function(a){return b[a]?b[a].vs:a}),!0)})}function j(a,b){d.isUndefined(a.barycenter)?(a.barycenter=b.barycenter,a.weight=b.weight):(a.barycenter=(a.barycenter*a.weight+b.barycenter*b.weight)/(a.weight+b.weight),a.weight+=b.weight)}var d=a("../lodash"),e=a("./barycenter"),f=a("./resolve-conflicts"),g=a("./sort");b.exports=h},{"../lodash":10,"./barycenter":14,"./resolve-conflicts":19,"./sort":21}],21:[function(a,b,c){function f(a,b){var c=e.partition(a,function(a){return d.has(a,"barycenter")}),f=c.lhs,i=d.sortBy(c.rhs,function(a){return-a.i}),j=[],k=0,l=0,m=0;f.sort(h(!!b)),m=g(j,i,m),d.each(f,function(a){m+=a.vs.length,j.push(a.vs),k+=a.barycenter*a.weight,l+=a.weight,m=g(j,i,m)});var n={vs:d.flatten(j,!0)};return l&&(n.barycenter=k/l,n.weight=l),n}function g(a,b,c){for(var e;b.length&&(e=d.last(b)).i<=c;)b.pop(),a.push(e.vs),c++;return c}function h(a){return function(b,c){return b.barycenter<c.barycenter?-1:b.barycenter>c.barycenter?1:a?c.i-b.i:b.i-c.i}}var d=a("../lodash"),e=a("../util");b.exports=f},{"../lodash":10,"../util":29}],22:[function(a,b,c){function e(a){var b=g(a);d.each(a.graph().dummyChains,function(c){for(var d=a.node(c),e=d.edgeObj,g=f(a,b,e.v,e.w),h=g.path,i=g.lca,j=0,k=h[j],l=!0;c!==e.w;){if(d=a.node(c),l){for(;(k=h[j])!==i&&a.node(k).maxRank<d.rank;)j++;k===i&&(l=!1)}if(!l){for(;j<h.length-1&&a.node(k=h[j+1]).minRank<=d.rank;)j++;k=h[j]}a.setParent(c,k),c=a.successors(c)[0]}})}function f(a,b,c,d){var i,j,e=[],f=[],g=Math.min(b[c].low,b[d].low),h=Math.max(b[c].lim,b[d].lim);i=c;do i=a.parent(i),e.push(i);while(i&&(b[i].low>g||h>b[i].lim));for(j=i,i=d;(i=a.parent(i))!==j;)f.push(i);return{path:e.concat(f.reverse()),lca:j}}function g(a){function e(f){var g=c;d.each(a.children(f),e),b[f]={low:g,lim:c++}}var b={},c=0;return d.each(a.children(),e),b}var d=a("./lodash");b.exports=e},{"./lodash":10}],23:[function(a,b,c){"use strict";function g(a,b){function e(b,e){var f=0,g=0,h=b.length,k=d.last(e);return d.each(e,function(b,l){var m=i(a,b),n=m?a.node(m).order:h;(m||b===k)&&(d.each(e.slice(g,l+1),function(b){d.each(a.predecessors(b),function(d){var e=a.node(d),g=e.order;!(g<f||n<g)||e.dummy&&a.node(b).dummy||j(c,d,b)})}),g=l+1,f=n)}),e}var c={};return d.reduce(b,e),c}function h(a,b){function e(b,e,f,g,h){var i;d.each(d.range(e,f),function(e){i=b[e],a.node(i).dummy&&d.each(a.predecessors(i),function(b){var d=a.node(b);d.dummy&&(d.order<g||d.order>h)&&j(c,b,i)})})}function f(b,c){var g,f=-1,h=0;return d.each(c,function(d,i){if("border"===a.node(d).dummy){var j=a.predecessors(d);j.length&&(g=a.node(j[0]).order,e(c,h,i,f,g),h=i,f=g)}e(c,h,c.length,g,b.length)}),c}var c={};return d.reduce(b,f),c}function i(a,b){if(a.node(b).dummy)return d.find(a.predecessors(b),function(b){return a.node(b).dummy})}function j(a,b,c){if(b>c){var d=b;b=c,c=d}var e=a[b];e||(a[b]=e={}),e[c]=!0}function k(a,b,c){if(b>c){var e=b;b=c,c=e}return d.has(a[b],c)}function l(a,b,c,e){var f={},g={},h={};return d.each(b,function(a){d.each(a,function(a,b){f[a]=a,g[a]=a,h[a]=b})}),d.each(b,function(a){var b=-1;d.each(a,function(a){var i=e(a);if(i.length){i=d.sortBy(i,function(a){return h[a]});for(var j=(i.length-1)/2,l=Math.floor(j),m=Math.ceil(j);l<=m;++l){var n=i[l];g[a]===a&&b<h[n]&&!k(c,a,n)&&(g[n]=a,g[a]=f[a]=f[n],b=h[n])}}})}),{root:f,align:g}}function m(a,b,c,e,f){function j(a){d.has(i,a)||(i[a]=!0,g[a]=d.reduce(h.inEdges(a),function(a,b){return j(b.v),Math.max(a,g[b.v]+h.edge(b))},0))}function l(b){if(2!==i[b]){i[b]++;var c=a.node(b),e=d.reduce(h.outEdges(b),function(a,b){return l(b.w),Math.min(a,g[b.w]-h.edge(b))},Number.POSITIVE_INFINITY);e!==Number.POSITIVE_INFINITY&&c.borderType!==k&&(g[b]=Math.max(g[b],e))}}var g={},h=n(a,b,c,f),i={};d.each(h.nodes(),j);var k=f?"borderLeft":"borderRight";return d.each(h.nodes(),l),d.each(e,function(a){g[a]=g[c[a]]}),g}function n(a,b,c,f){var g=new e,h=a.graph(),i=s(h.nodesep,h.edgesep,f);return d.each(b,function(b){var e;d.each(b,function(b){var d=c[b];if(g.setNode(d),e){var f=c[e],h=g.edge(f,d);g.setEdge(f,d,Math.max(i(a,b,e),h||0))}e=b})}),g}function o(a,b){return d.min(b,function(b){var c=d.min(b,function(b,c){return b-t(a,c)/2}),e=d.max(b,function(b,c){return b+t(a,c)/2});return e-c})}function p(a,b){var c=d.min(b),e=d.max(b);d.each(["u","d"],function(f){d.each(["l","r"],function(g){var j,h=f+g,i=a[h];i!==b&&(j="l"===g?c-d.min(i):e-d.max(i),j&&(a[h]=d.mapValues(i,function(a){return a+j})))})})}function q(a,b){return d.mapValues(a.ul,function(c,e){if(b)return a[b.toLowerCase()][e];var f=d.sortBy(d.pluck(a,e));return(f[1]+f[2])/2})}function r(a){var i,b=f.buildLayerMatrix(a),c=d.merge(g(a,b),h(a,b)),e={};d.each(["u","d"],function(f){i="u"===f?b:d.values(b).reverse(),d.each(["l","r"],function(b){"r"===b&&(i=d.map(i,function(a){return d.values(a).reverse()}));var g=d.bind("u"===f?a.predecessors:a.successors,a),h=l(a,i,c,g),j=m(a,i,h.root,h.align,"r"===b);"r"===b&&(j=d.mapValues(j,function(a){return-a})),e[f+b]=j})});var j=o(a,e);return p(e,j),q(e,a.graph().align)}function s(a,b,c){return function(e,f,g){var k,h=e.node(f),i=e.node(g),j=0;if(j+=h.width/2,d.has(h,"labelpos"))switch(h.labelpos.toLowerCase()){case"l":k=-h.width/2;break;case"r":k=h.width/2}if(k&&(j+=c?k:-k),k=0,j+=(h.dummy?b:a)/2,j+=(i.dummy?b:a)/2,j+=i.width/2,d.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":k=i.width/2;break;case"r":k=-i.width/2}return k&&(j+=c?k:-k),k=0,j}}function t(a,b){return a.node(b).width}var d=a("../lodash"),e=a("../graphlib").Graph,f=a("../util");b.exports={positionX:r,findType1Conflicts:g,findType2Conflicts:h,addConflict:j,hasConflict:k,verticalAlignment:l,horizontalCompaction:m,alignCoordinates:p,findSmallestWidthAlignment:o,balance:q}},{"../graphlib":7,"../lodash":10,"../util":29}],24:[function(a,b,c){"use strict";function g(a){a=e.asNonCompoundGraph(a),h(a),d.each(f(a),function(b,c){a.node(c).x=b})}function h(a){var b=e.buildLayerMatrix(a),c=a.graph().ranksep,f=0;d.each(b,function(b){var e=d.max(d.map(b,function(b){return a.node(b).height}));d.each(b,function(b){a.node(b).y=f+e/2}),f+=e+c})}var d=a("../lodash"),e=a("../util"),f=a("./bk").positionX;b.exports=g},{"../lodash":10,"../util":29,"./bk":23}],25:[function(a,b,c){"use strict";function g(a){var b=new e({directed:!1}),c=a.nodes()[0],d=a.nodeCount();b.setNode(c,{});for(var g,k;h(b,a)<d;)g=i(b,a),k=b.hasNode(g.v)?f(a,g):-f(a,g),j(b,a,k);return b}function h(a,b){function c(e){d.each(b.nodeEdges(e),function(d){var g=d.v,h=e===g?d.w:g;a.hasNode(h)||f(b,d)||(a.setNode(h,{}),a.setEdge(e,h,{}),c(h))})}return d.each(a.nodes(),c),a.nodeCount()}function i(a,b){return d.min(b.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return f(b,c)})}function j(a,b,c){d.each(a.nodes(),function(a){b.node(a).rank+=c})}var d=a("../lodash"),e=a("../graphlib").Graph,f=a("./util").slack;b.exports=g},{"../graphlib":7,"../lodash":10,"./util":28}],26:[function(a,b,c){"use strict";function h(a){switch(a.graph().ranker){case"network-simplex":k(a);break;case"tight-tree":j(a);break;case"longest-path":i(a);break;default:k(a)}}function j(a){e(a),f(a)}function k(a){g(a)}var d=a("./util"),e=d.longestPath,f=a("./feasible-tree"),g=a("./network-simplex");b.exports=h;var i=e},{"./feasible-tree":25,"./network-simplex":27,"./util":28}],27:[function(a,b,c){"use strict";function k(a){a=j(a),g(a);var b=e(a);o(b),l(b,a);for(var c,d;c=q(b);)d=r(b,a,c),s(b,a,c,d)}function l(a,b){var c=i(a,a.nodes());c=c.slice(0,c.length-1),d.each(c,function(c){m(a,b,c)})}function m(a,b,c){var d=a.node(c),e=d.parent;a.edge(c,e).cutvalue=n(a,b,c)}function n(a,b,c){var e=a.node(c),f=e.parent,g=!0,h=b.edge(c,f),i=0;return h||(g=!1,h=b.edge(f,c)),i=h.weight,d.each(b.nodeEdges(c),function(d){var e=d.v===c,h=e?d.w:d.v;if(h!==f){var j=e===g,k=b.edge(d).weight;if(i+=j?k:-k,u(a,c,h)){var l=a.edge(c,h).cutvalue;i+=j?-l:l}}}),i}function o(a,b){arguments.length<2&&(b=a.nodes()[0]),p(a,{},1,b)}function p(a,b,c,e,f){var g=c,h=a.node(e);return b[e]=!0,
d.each(a.neighbors(e),function(f){d.has(b,f)||(c=p(a,b,c,f,e))}),h.low=g,h.lim=c++,f?h.parent=f:delete h.parent,c}function q(a){return d.find(a.edges(),function(b){return a.edge(b).cutvalue<0})}function r(a,b,c){var e=c.v,g=c.w;b.hasEdge(e,g)||(e=c.w,g=c.v);var h=a.node(e),i=a.node(g),j=h,k=!1;h.lim>i.lim&&(j=i,k=!0);var l=d.filter(b.edges(),function(b){return k===v(a,a.node(b.v),j)&&k!==v(a,a.node(b.w),j)});return d.min(l,function(a){return f(b,a)})}function s(a,b,c,d){var e=c.v,f=c.w;a.removeEdge(e,f),a.setEdge(d.v,d.w,{}),o(a),l(a,b),t(a,b)}function t(a,b){var c=d.find(a.nodes(),function(a){return!b.node(a).parent}),e=h(a,c);e=e.slice(1),d.each(e,function(c){var d=a.node(c).parent,e=b.edge(c,d),f=!1;e||(e=b.edge(d,c),f=!0),b.node(c).rank=b.node(d).rank+(f?e.minlen:-e.minlen)})}function u(a,b,c){return a.hasEdge(b,c)}function v(a,b,c){return c.low<=b.lim&&b.lim<=c.lim}var d=a("../lodash"),e=a("./feasible-tree"),f=a("./util").slack,g=a("./util").longestPath,h=a("../graphlib").alg.preorder,i=a("../graphlib").alg.postorder,j=a("../util").simplify;b.exports=k,k.initLowLimValues=o,k.initCutValues=l,k.calcCutValue=n,k.leaveEdge=q,k.enterEdge=r,k.exchangeEdges=s},{"../graphlib":7,"../lodash":10,"../util":29,"./feasible-tree":25,"./util":28}],28:[function(a,b,c){"use strict";function e(a){function c(e){var f=a.node(e);if(d.has(b,e))return f.rank;b[e]=!0;var g=d.min(d.map(a.outEdges(e),function(b){return c(b.w)-a.edge(b).minlen}));return g===Number.POSITIVE_INFINITY&&(g=0),f.rank=g}var b={};d.each(a.sources(),c)}function f(a,b){return a.node(b.w).rank-a.node(b.v).rank-a.edge(b).minlen}var d=a("../lodash");b.exports={longestPath:e,slack:f}},{"../lodash":10}],29:[function(a,b,c){"use strict";function f(a,b,c,e){var f;do f=d.uniqueId(e);while(a.hasNode(f));return c.dummy=b,a.setNode(f,c),f}function g(a){var b=(new e).setGraph(a.graph());return d.each(a.nodes(),function(c){b.setNode(c,a.node(c))}),d.each(a.edges(),function(c){var d=b.edge(c.v,c.w)||{weight:0,minlen:1},e=a.edge(c);b.setEdge(c.v,c.w,{weight:d.weight+e.weight,minlen:Math.max(d.minlen,e.minlen)})}),b}function h(a){var b=new e({multigraph:a.isMultigraph()}).setGraph(a.graph());return d.each(a.nodes(),function(c){a.children(c).length||b.setNode(c,a.node(c))}),d.each(a.edges(),function(c){b.setEdge(c,a.edge(c))}),b}function i(a){var b=d.map(a.nodes(),function(b){var c={};return d.each(a.outEdges(b),function(b){c[b.w]=(c[b.w]||0)+a.edge(b).weight}),c});return d.zipObject(a.nodes(),b)}function j(a){var b=d.map(a.nodes(),function(b){var c={};return d.each(a.inEdges(b),function(b){c[b.v]=(c[b.v]||0)+a.edge(b).weight}),c});return d.zipObject(a.nodes(),b)}function k(a,b){var c=a.x,d=a.y,e=b.x-c,f=b.y-d,g=a.width/2,h=a.height/2;if(!e&&!f)throw new Error("Not possible to find intersection inside of the rectangle");var i,j;return Math.abs(f)*g>Math.abs(e)*h?(f<0&&(h=-h),i=h*e/f,j=h):(e<0&&(g=-g),i=g,j=g*f/e),{x:c+i,y:d+j}}function l(a){var b=d.map(d.range(p(a)+1),function(){return[]});return d.each(a.nodes(),function(c){var e=a.node(c),f=e.rank;d.isUndefined(f)||(b[f][e.order]=c)}),b}function m(a){var b=d.min(d.map(a.nodes(),function(b){return a.node(b).rank}));d.each(a.nodes(),function(c){var e=a.node(c);d.has(e,"rank")&&(e.rank-=b)})}function n(a){var b=d.min(d.map(a.nodes(),function(b){return a.node(b).rank})),c=[];d.each(a.nodes(),function(d){var e=a.node(d).rank-b;c[e]||(c[e]=[]),c[e].push(d)});var e=0,f=a.graph().nodeRankFactor;d.each(c,function(b,c){d.isUndefined(b)&&c%f!==0?--e:e&&d.each(b,function(b){a.node(b).rank+=e})})}function o(a,b,c,d){var e={width:0,height:0};return arguments.length>=4&&(e.rank=c,e.order=d),f(a,"border",e,b)}function p(a){return d.max(d.map(a.nodes(),function(b){var c=a.node(b).rank;if(!d.isUndefined(c))return c}))}function q(a,b){var c={lhs:[],rhs:[]};return d.each(a,function(a){b(a)?c.lhs.push(a):c.rhs.push(a)}),c}function r(a,b){var c=d.now();try{return b()}finally{console.log(a+" time: "+(d.now()-c)+"ms")}}function s(a,b){return b()}var d=a("./lodash"),e=a("./graphlib").Graph;b.exports={addDummyNode:f,simplify:g,asNonCompoundGraph:h,successorWeights:i,predecessorWeights:j,intersectRect:k,buildLayerMatrix:l,normalizeRanks:m,removeEmptyRanks:n,addBorderNode:o,maxRank:p,partition:q,time:r,notime:s}},{"./graphlib":7,"./lodash":10}],30:[function(a,b,c){b.exports="0.7.4"},{}]},{},[1])(1)}),Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener("resize",this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);b>-1&&(this._interestedResizables.splice(b,1),this.unlisten(a,"iron-resize","_onDescendantIronResize"))},resizerShouldNotify:function(a){return!0},_onDescendantIronResize:function(a){return this._notifyingDescendant?void a.stopPropagation():void(Polymer.Settings.useShadow||this._fireResize())},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=a.path?a.path[0]:a.target;b!==this&&(this._interestedResizables.indexOf(b)===-1&&(this._interestedResizables.push(b),this.listen(b,"iron-resize","_onDescendantIronResize")),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},_parentResizableChanged:function(a){a&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)}},Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(a){return(this._clampValue(a)-this.min)/(this.max-this.min)},_clampValue:function(a){return Math.min(this.max,Math.max(this.min,this._calcStep(a)))},_calcStep:function(a){return a=parseFloat(a),this.step?(Math.round((a+this.min)/this.step)-this.min/this.step)/(1/this.step):a},_validateValue:function(){var a=this._clampValue(this.value);return this.value=this.oldValue=isNaN(a)?this.oldValue:a,this.value!==a},_update:function(){this._validateValue(),this._setRatio(100*this._calcRatio(this.value))}},Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||a.indexOf(b)<0)&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return this.selection.indexOf(a)>=0},setItemSelected:function(a,b){if(null!=a){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);c>=0&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}},Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},items:{type:Array,readOnly:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1}}}},observers:["_updateSelected(attrForSelected, selected)"],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._updateItems(),this._shouldUpdateSelection||this._updateSelected(this.attrForSelected,this.selected),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(Number(this._valueToIndex(this.selected))-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(Number(this._valueToIndex(this.selected))+1)%this.items.length;this.selected=this._indexToValue(a)},get _shouldUpdateSelection(){return null!=this.selected},_addListener:function(a){this.listen(this,a,"_activateHandler")},_removeListener:function(a){this.unlisten(this,a,"_activateHandler")},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||"*");a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(a){this._selection.select(this._valueToItem(this.selected))},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(!this.attrForSelected)return Number(a);for(var c,b=0;c=this.items[b];b++)if(this._valueForItem(c)==a)return b},_indexToValue:function(a){if(!this.attrForSelected)return a;var b=this.items[a];return b?this._valueForItem(b):void 0},_valueForItem:function(a){return a[this.attrForSelected]||a.getAttribute(this.attrForSelected)},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire("iron-"+(b?"select":"deselect"),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(a){this.fire("iron-items-changed",a,{bubbles:!1,cancelable:!1}),this._updateItems(),this._shouldUpdateSelection&&this._updateSelected()})},_activateHandler:function(a){for(var b=a.target,c=this.items;b&&b!=this;){var d=c.indexOf(b);if(d>=0){var e=this._indexToValue(d);return void this._itemActivate(e,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire("iron-activate",{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}},Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0},selectedItems:{type:Array,readOnly:!0,notify:!0}},observers:["_updateSelected(attrForSelected, selectedValues)"],select:function(a){this.multi?this.selectedValues?this._toggleSelected(a):this.selectedValues=[a]:this.selected=a},multiChanged:function(a){this._selection.multi=a},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){if(this._selection.clear(),a)for(var b=0;b<a.length;b++)this._selection.setItemSelected(this._valueToItem(a[b]),!0)},_selectionChange:function(){var a=this._selection.get();this.multi?this._setSelectedItems(a):(this._setSelectedItems([a]),this._setSelectedItem(a))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a),c=b<0;c?this.push("selectedValues",a):this.splice("selectedValues",b,1),this._selection.setItemSelected(this._valueToItem(a),c)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl],Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String}},hostAttributes:{role:"menu",tabindex:"0"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown","iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute("disabled")||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute("tabindex",b===a?"0":"-1")},this)},_updateMultiselectable:function(a){a?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")},_focusWithKeyboardEvent:function(a){for(var c,b=0;c=this.items[b];b++){var d=this.attrForItemTitle||"textContent",e=c[d]||c.getAttribute(d);if(e&&e.trim().charAt(0).toLowerCase()===String.fromCharCode(a.keyCode).toLowerCase()){this._setFocusedItem(c);break}}},_focusPrevious:function(){var a=this.items.length,b=(Number(this.indexOf(this.focusedItem))-1+a)%a;this._setFocusedItem(this.items[b])},_focusNext:function(){var a=(Number(this.indexOf(this.focusedItem))+1)%this.items.length;this._setFocusedItem(this.items[a])},_applySelection:function(a,b){b?a.setAttribute("aria-selected","true"):a.removeAttribute("aria-selected"),Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute("tabindex","-1"),a&&(a.setAttribute("tabindex","0"),a.focus())},_onIronItemsChanged:function(a){var c,d,b=a.detail;for(d=0;d<b.length;++d)if(c=b[d],c.addedNodes.length){this._resetTabindices();break}},_onShiftTabDown:function(a){var b;Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0,b=this.getAttribute("tabindex"),this.setAttribute("tabindex","-1"),this.async(function(){this.setAttribute("tabindex",b),Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){Polymer.IronMenuBehaviorImpl._shiftTabPressed||(this.blur(),this._setFocusedItem(null),this._defaultFocusAsync=this.async(function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;a?this._setFocusedItem(a):this._setFocusedItem(this.items[0])},100))},_onUpKey:function(a){this._focusPrevious()},_onDownKey:function(a){this._focusNext()},_onEscKey:function(a){this.focusedItem.blur()},_onKeydown:function(a){this.keyboardEventMatchesKeys(a,"up down esc")||this._focusWithKeyboardEvent(a)}},Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1,Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl],Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},attached:function(){this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):this.fit())},fit:function(){this._discoverInfo(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||""},positionedBy:{vertically:"auto"!==a.top?"top":"auto"!==a.bottom?"bottom":null,horizontally:"auto"!==a.left?"left":"auto"!==a.right?"right":null,css:a.position},sizedBy:{height:"none"!==b.maxHeight,width:"none"!==b.maxWidth},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}}}},resetFit:function(){this._fitInfo&&this._fitInfo.sizedBy.height||(this.sizingTarget.style.maxHeight="",this.style.top=this._fitInfo?this._fitInfo.inlineStyle.top:""),this._fitInfo&&this._fitInfo.sizedBy.width||(this.sizingTarget.style.maxWidth="",this.style.left=this._fitInfo?this._fitInfo.inlineStyle.left:""),this._fitInfo&&(this.style.position=this._fitInfo.positionedBy.css),this._fitInfo=null},refit:function(){this.resetFit(),this.fit()},constrain:function(){var a=this._fitInfo;this._fitInfo.positionedBy.vertically||(this.style.top="0px"),this._fitInfo.positionedBy.horizontally||(this.style.left="0px"),this._fitInfo.positionedBy.vertically&&this._fitInfo.positionedBy.horizontally||(this.style.position="fixed"),this.sizingTarget.style.boxSizing="border-box";var b=this.getBoundingClientRect();a.sizedBy.height||this._sizeDimension(b,a.positionedBy.vertically,"top","bottom","Height"),a.sizedBy.width||this._sizeDimension(b,a.positionedBy.horizontally,"left","right","Width")},_sizeDimension:function(a,b,c,d,e){var f=this._fitInfo,g="Width"===e?this._fitWidth:this._fitHeight,h=b===d,i=h?g-a[d]:a[c],j=f.margin[h?c:d],k="offset"+e,l=this[k]-this.sizingTarget[k];this.sizingTarget.style["max"+e]=g-j-i-l+"px"},center:function(){if(this._fitInfo.positionedBy.vertically&&this._fitInfo.positionedBy.horizontally||(this.style.position="fixed"),!this._fitInfo.positionedBy.vertically){var a=(this._fitHeight-this.offsetHeight)/2+this._fitTop;a-=this._fitInfo.margin.top,this.style.top=a+"px"}if(!this._fitInfo.positionedBy.horizontally){var b=(this._fitWidth-this.offsetWidth)/2+this._fitLeft;b-=this._fitInfo.margin.left,this.style.left=b+"px"}}},Polymer.IronOverlayManager=function(){function d(b){var c=i();a.push(b);var d=i();d<=c&&f(b,c)}function e(b){var c=a.indexOf(b);c>=0&&(a.splice(c,1),g(b,""))}function f(a,b){g(a,b+2)}function g(a,b){a.style.zIndex=b}function h(){for(var b=a.length-1;a[b]&&!a[b].opened;)--b;return a[b]}function i(){var a,c=h();if(c){var d=window.getComputedStyle(c).zIndex;isNaN(d)||(a=Number(d))}return a||b}function j(){var a=h();a&&!a.transitioning&&a._applyFocus()}function k(a){if(a.opened)c.push(a);else{var b=c.indexOf(a);b>=0&&c.splice(b,1)}}function l(){return c}var a=[],b=10,c=[];return{addOverlay:d,removeOverlay:e,currentOverlay:h,currentOverlayZ:i,focusOverlay:j,trackBackdrop:k,getBackdrops:l}}(),Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{type:Boolean,value:!1},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},_manager:{type:Object,value:Polymer.IronOverlayManager},_boundOnCaptureClick:{type:Function,value:function(){return this._onCaptureClick.bind(this)}},_boundOnCaptureKeydown:{type:Function,value:function(){return this._onCaptureKeydown.bind(this)}}},listeners:{tap:"_onClick","iron-resize":"_onIronResize"},get backdropElement(){return this._backdrop},get _focusNode(){return Polymer.dom(this).querySelector("[autofocus]")||this},registered:function(){this._backdrop=document.createElement("iron-overlay-backdrop")},ready:function(){this._ensureSetup(),this._callOpenedWhenReady&&this._openedChanged()},detached:function(){this.opened=!1,this._completeBackdrop(),this._manager.removeOverlay(this)},toggle:function(){this.opened=!this.opened},open:function(){this.opened=!0,this.closingReason={canceled:!1}},close:function(){this.opened=!1,this._setCanceled(!1)},cancel:function(){var a=this.fire("iron-overlay-canceled",void 0,{cancelable:!0});a.defaultPrevented||(this.opened=!1,this._setCanceled(!0))},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(){return this.opened?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"),this._overlaySetup?(this._openChangedAsync&&this.cancelAsync(this._openChangedAsync),this._toggleListeners(),this.opened&&this._prepareRenderOpened(),void(this._openChangedAsync=this.async(function(){this.style.display="",this.offsetWidth,this.opened?this._renderOpened():this._renderClosed(),this._openChangedAsync=null}))):void(this._callOpenedWhenReady=this.opened)},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_toggleListener:function(a,b,c,d,e){a?("tap"===c&&Polymer.Gestures.add(document,"tap",null),b.addEventListener(c,d,e)):("tap"===c&&Polymer.Gestures.remove(document,"tap",null),b.removeEventListener(c,d,e))},_toggleListeners:function(){this._toggleListenersAsync&&this.cancelAsync(this._toggleListenersAsync),this._toggleListenersAsync=this.async(function(){this._toggleListener(this.opened,document,"tap",this._boundOnCaptureClick,!0),this._toggleListener(this.opened,document,"keydown",this._boundOnCaptureKeydown,!0),this._toggleListenersAsync=null},1)},_prepareRenderOpened:function(){this._manager.addOverlay(this),this.withBackdrop&&(this.backdropElement.prepare(),this._manager.trackBackdrop(this)),this._preparePositioning(),this.fit(),this._finishPositioning()},_renderOpened:function(){this.withBackdrop&&this.backdropElement.open(),this._finishRenderOpened()},_renderClosed:function(){this.withBackdrop&&this.backdropElement.close(),this._finishRenderClosed()},_onTransitionend:function(a){a&&a.target!==this||(this.opened?this._finishRenderOpened():this._finishRenderClosed())},_finishRenderOpened:function(){this.noAutoFocus||this._focusNode.focus(),this.fire("iron-overlay-opened"),this._squelchNextResize=!0,this.async(this.notifyResize)},_finishRenderClosed:function(){this.resetFit(),this.style.display="none",this._completeBackdrop(),this._manager.removeOverlay(this),this._focusNode.blur(),this._manager.focusOverlay(),this.fire("iron-overlay-closed",this.closingReason),this._squelchNextResize=!0,this.async(this.notifyResize)},_completeBackdrop:function(){this.withBackdrop&&(this._manager.trackBackdrop(this),this.backdropElement.complete())},_preparePositioning:function(){this.style.transition=this.style.webkitTransition="none",this.style.transform=this.style.webkitTransform="none",this.style.display=""},_finishPositioning:function(){this.style.display="none",this.style.transform=this.style.webkitTransform="",this.offsetWidth,this.style.transition=this.style.webkitTransition=""},_applyFocus:function(){this.opened?this.noAutoFocus||this._focusNode.focus():(this._focusNode.blur(),this._manager.focusOverlay())},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this._manager.currentOverlay()!=this||(this._cancelJob=this.async(function(){this.cancel()},10))},_onClick:function(a){this._cancelJob&&(this.cancelAsync(this._cancelJob),this._cancelJob=null)},_onCaptureKeydown:function(a){var b=27;this.noCancelOnEscKey||a.keyCode!==b||(this.cancel(),a.stopPropagation())},_onIronResize:function(){return this._squelchNextResize?void(this._squelchNextResize=!1):void(this.opened&&this.refit())}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl],Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},registered:function(){new Polymer.IronMeta({type:"animation",key:this.is,value:this.constructor})},timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var f,d={transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]},e=d[b],g=0;f=e[g];g++)a.style[f]=c;a.style[b]=c},complete:function(){}},!function(a,b){b.true=a;var c={},d={},e={},f=null;!function(a){function b(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function c(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear"}function d(b,d){var e=new c;return d&&(e.fill="both",e.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof e[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==s.indexOf(b[c]))return;if("direction"==c&&-1==t.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;e[c]=b[c]}}):e.duration=b,e}function e(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function f(b,c){b=a.numericTimingToObject(b);var e=d(b,c);return e._easing=i(e.easing),e}function g(a,b,c,d){return 0>a||a>1||0>c||c>1?B:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(0==e||1==e)return e;for(var g=0,h=1;;){var i=(g+h)/2,j=f(a,c,i);if(Math.abs(e-j)<.001)return f(b,d,i);e>j?g=i:h=i}}}function h(a,b){return function(c){if(c>=1)return 1;var d=1/a;return c+=b*d,c-c%d}}function i(a){var b=z.exec(a);if(b)return g.apply(this,b.slice(1).map(Number));var c=A.exec(a);if(c)return h(Number(c[1]),{start:u,middle:v,end:w}[c[2]]);var d=x[a];return d?d:B}function j(a){return Math.abs(k(a)/a.playbackRate)}function k(a){return a.duration*a.iterations}function l(a,b,c){return null==b?C:b<c.delay?D:b>=c.delay+a?E:F}function m(a,b,c,d,e){switch(d){case D:return"backwards"==b||"both"==b?0:null;case F:return c-e;case E:return"forwards"==b||"both"==b?a:null;case C:return null}}function n(a,b,c,d){return(d.playbackRate<0?b-a:b)*d.playbackRate+c}function o(a,b,c,d,e){return 1/0===c||c===-1/0||c-d==b&&e.iterations&&(e.iterations+e.iterationStart)%1==0?a:c%a}function p(a,b,c,d){return 0===c?0:b==a?d.iterationStart+d.iterations-1:Math.floor(c/a)}function q(a,b,c,d){var e=a%2>=1,f="normal"==d.direction||d.direction==(e?"alternate-reverse":"alternate"),g=f?c:b-c,h=g/b;return b*d.easing(h)}function r(a,b,c){var d=l(a,b,c),e=m(a,c.fill,b,d,c.delay);if(null===e)return null;if(0===a)return d===D?0:1;var f=c.iterationStart*c.duration,g=n(a,e,f,c),h=o(c.duration,k(c),g,f,c),i=p(c.duration,h,g,c);return q(i,c.duration,h,c)/c.duration}var s="backwards|forwards|both|none".split("|"),t="reverse|alternate|alternate-reverse".split("|");c.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(a.normalizeTimingInput(this._effect._timingInput)),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){this._setMember("iterations",a)},get iterations(){return this._iterations}};var u=1,v=.5,w=0,x={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,1),"ease-in-out":g(.42,0,.58,1),"step-start":h(1,u),"step-middle":h(1,v),"step-end":h(1,w)},y="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",z=new RegExp("cubic-bezier\\("+y+","+y+","+y+","+y+"\\)"),A=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,B=function(a){return a},C=0,D=1,E=2,F=3;a.cloneTimingInput=b,a.makeTiming=d,a.numericTimingToObject=e,a.normalizeTimingInput=f,a.calculateActiveDuration=j,a.calculateTimeFraction=r,a.calculatePhase=l,a.toTimingFunction=i}(c,f),function(a){function b(a,b){return a in h?h[a][b]||b:b}function c(a,c,d){var g=e[a];if(g){f.style[a]=c;for(var h in g){var i=g[h],j=f.style[i];d[i]=b(i,j)}}else d[a]=b(a,c)}function d(b){function d(){var a=e.length;null==e[a-1].offset&&(e[a-1].offset=1),a>1&&null==e[0].offset&&(e[0].offset=0);for(var b=0,c=e[0].offset,d=1;a>d;d++){var f=e[d].offset;if(null!=f){for(var g=1;d-b>g;g++)e[b+g].offset=c+(f-c)*g/(d-b);b=d,c=f}}}if(!Array.isArray(b)&&null!==b)throw new TypeError("Keyframes must be null or an array of keyframes");if(null==b)return[];for(var e=b.map(function(b){var d={};for(var e in b){var f=b[e];if("offset"==e){if(null!=f&&(f=Number(f),!isFinite(f)))throw new TypeError("keyframe offsets must be numbers.")}else{if("composite"==e)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};f="easing"==e?a.toTimingFunction(f):""+f}c(e,f,d)}return void 0==d.offset&&(d.offset=null),void 0==d.easing&&(d.easing=a.toTimingFunction("linear")),d}),f=!0,g=-1/0,h=0;h<e.length;h++){var i=e[h].offset;if(null!=i){if(g>i)throw{code:DOMException.INVALID_MODIFICATION_ERR,name:"InvalidModificationError",message:"Keyframes are not loosely sorted by offset. Sort or specify offsets."};g=i}else f=!1}return e=e.filter(function(a){return a.offset>=0&&a.offset<=1}),f||d(),e}var e={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},f=document.createElementNS("http://www.w3.org/1999/xhtml","div"),g={thin:"1px",medium:"3px",thick:"5px"},h={borderBottomWidth:g,borderLeftWidth:g,borderRightWidth:g,borderTopWidth:g,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:g,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.normalizeKeyframes=d}(c,f),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);
return h.setMonth(h.getMonth()+3),!(h>g)||(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,!1)},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b){function c(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function d(a){var c=[];for(var d in a)for(var e=a[d],f=0;f<e.length-1;f++){var g=e[f].offset,h=e[f+1].offset,i=e[f].value,j=e[f+1].value;g==h&&(1==h?i=j:j=i),c.push({startTime:g,endTime:h,easing:e[f].easing,property:d,interpolation:b.propertyInterpolation(d,i,j)})}return c.sort(function(a,b){return a.startTime-b.startTime}),c}b.convertEffectInput=function(e){var f=a.normalizeKeyframes(e),g=c(f),h=d(g);return function(a,c){if(null!=c)h.filter(function(a){return 0>=c&&0==a.startTime||c>=1&&1==a.endTime||c>=a.startTime&&c<=a.endTime}).forEach(function(d){var e=c-d.startTime,f=d.endTime-d.startTime,g=0==f?0:d.easing(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d,f),function(a){function b(a,b,c){e[c]=e[c]||[],e[c].push([a,b])}function c(a,c,d){for(var e=0;e<d.length;e++){var f=d[e];b(a,c,f),/-/.test(f)&&b(a,c,f.replace(/-(.)/g,function(a,b){return b.toUpperCase()}))}}function d(b,c,d){if("initial"==c||"initial"==d){var g=b.replace(/-(.)/g,function(a,b){return b.toUpperCase()});"initial"==c&&(c=f[g]),"initial"==d&&(d=f[g])}for(var h=c==d?[]:e[b],i=0;h&&i<h.length;i++){var j=h[i][0](c),k=h[i][0](d);if(void 0!==j&&void 0!==k){var l=h[i][1](j,k);if(l){var m=a.Interpolation.apply(null,l);return function(a){return 0==a?c:1==a?d:m(a)}}}}return a.Interpolation(!1,!0,function(a){return a?d:c})}var e={};a.addPropertiesHandler=c;var f={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};a.propertyInterpolation=d}(d,f),function(a,b){function c(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateTimeFraction(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d._isCurrent=function(d){var e=a.calculatePhase(c,d,b);return e===PhaseActive||e===PhaseBefore},d}b.KeyframeEffect=function(d,e,f){var g,h=c(a.normalizeTimingInput(f)),i=b.convertEffectInput(e),j=function(){i(d,g)};return j._update=function(a){return g=h(a),null!==g},j._clear=function(){i(d,null)},j._hasSameTarget=function(a){return d===a},j._isCurrent=h._isCurrent,j._totalDuration=h._totalDuration,j},b.NullEffect=function(a){var b=function(){a&&(a(),a=null)};return b._update=function(){return null},b._totalDuration=0,b._isCurrent=function(){return!1},b._hasSameTarget=function(){return!1},b}}(c,d,f),function(a){a.apply=function(b,c,d){b.style[a.propertyName(c)]=d},a.clear=function(b,c){b.style[a.propertyName(c)]=""}}(d,f),function(a){window.Element.prototype.animate=function(b,c){return a.timeline._play(a.KeyframeEffect(this,b,c))}}(d),function(a){function b(a,c,d){if("number"==typeof a&&"number"==typeof c)return a*(1-d)+c*d;if("boolean"==typeof a&&"boolean"==typeof c)return.5>d?a:c;if(a.length==c.length){for(var e=[],f=0;f<a.length;f++)e.push(b(a[f],c[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+c}a.Interpolation=function(a,c,d){return function(e){return d(b(a,c,e))}}}(d,f),function(a,b){a.sequenceNumber=0;var c=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!1,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this._inEffect=this._effect._update(this.playbackRate<0&&0===this.currentTime?-1:this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._tickCurrentTime(a,!0),b.invalidateEffects()))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.invalidateEffects())},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var b=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!=b&&(this.currentTime=b)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._currentTime=this._playbackRate>0?0:this._totalDuration,this._startTime=null,b.invalidateEffects()),this._finishedFlag=!1,b.restart(),this._idle=!1,this._ensureAlive()},pause:function(){this._isFinished||this._paused||this._idle||(this._currentTimePending=!0),this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1)},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this.currentTime=0,this._startTime=null,this._effect._update(null),b.invalidateEffects(),b.restart())},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){var b=this._isFinished;if((b||this._idle)&&!this._finishedFlag){var d=new c(this,this._currentTime,a),e=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){e.forEach(function(a){a.call(d.target,d)})},0)}this._finishedFlag=b},_tick:function(a){return this._idle||this._paused||(null==this._startTime?this.startTime=a-this._currentTime/this.playbackRate:this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),this._currentTimePending=!1,this._fireEvents(a),!this._idle&&(this._inEffect||!this._finishedFlag)}}}(c,d,f),function(a,b){function c(a){var b=i;i=[],a<s.currentTime&&(a=s.currentTime),g(a),b.forEach(function(b){b[1](a)}),o&&g(a),f(),l=void 0}function d(a,b){return a._sequenceNumber-b._sequenceNumber}function e(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function f(){p.forEach(function(a){a()}),p.length=0}function g(a){n=!1;var c=b.timeline;c.currentTime=a,c._animations.sort(d),m=!1;var e=c._animations;c._animations=[];var f=[],g=[];e=e.filter(function(b){return b._inTimeline=b._tick(a),b._inEffect?g.push(b._effect):f.push(b._effect),b._isFinished||b._paused||b._idle||(m=!0),b._inTimeline}),p.push.apply(p,f),p.push.apply(p,g),c._animations.push.apply(c._animations,e),o=!1,m&&requestAnimationFrame(function(){})}var h=window.requestAnimationFrame,i=[],j=0;window.requestAnimationFrame=function(a){var b=j++;return 0==i.length&&h(c),i.push([b,a]),b},window.cancelAnimationFrame=function(a){i.forEach(function(b){b[0]==a&&(b[1]=function(){})})},e.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.invalidateEffects(),d}};var k,l=void 0,k=function(){return void 0==l&&(l=performance.now()),l},m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n};var o=!1;b.invalidateEffects=function(){o=!0};var p=[],q=1e3/60,r=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){if(o){var a=k();a-s.currentTime>0&&(s.currentTime+=q*(Math.floor((a-s.currentTime)/q)+1)),g(s.currentTime)}return f(),r.apply(this,arguments)}});var s=new e;b.timeline=s}(c,d,f),function(a){function b(a,b){var c=a.exec(b);return c?(c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]):void 0}function c(a,b){b=b.replace(/^\s*/,"");var c=a(b);return c?[c[0],c[1].replace(/^\s*/,"")]:void 0}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],g=b(d,e),!g||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(c--,0==c&&d++,0>=c))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){var d=a(c);return d?d:[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}return""==c?d:void 0}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;j>k;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);return e&&e[0].length?[d,e[1]]:void 0}function c(c){var d=a.consumeRepeated(b,/^,/,c);return d&&""==d[1]?d[0]:void 0}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a){function b(a){return a.toFixed(3).replace(".000","")}function c(a,b,c){return Math.min(b,Math.max(a,c))}function d(a){return/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a)?Number(a):void 0}function e(a,c){return[a,c,b]}function f(a,b){return 0!=a?h(0,1/0)(a,b):void 0}function g(a,b){return[a,b,function(a){return Math.round(c(1,1/0,a))}]}function h(a,d){return function(e,f){return[e,f,function(e){return b(c(a,d,e))}]}}function i(a,b){return[a,b,Math.round]}a.clamp=c,a.addPropertiesHandler(d,h(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(d,h(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(d,f,["flex-grow","flex-shrink"]),a.addPropertiesHandler(d,g,["orphans","widows"]),a.addPropertiesHandler(d,i,["z-index"]),a.parseNumber=d,a.mergeNumbers=e,a.numberToString=b}(d,f),function(a){function b(a,b){return"visible"==a||"visible"==b?[0,1,function(c){return 0>=c?a:c>=1?b:"visible"}]:void 0}a.addPropertiesHandler(String,b,["visibility"])}(d),function(a){function b(a){a=a.trim(),e.fillStyle="#000",e.fillStyle=a;var b=e.fillStyle;if(e.fillStyle="#fff",e.fillStyle=a,b==e.fillStyle){e.fillRect(0,0,1,1);var c=e.getImageData(0,0,1,1).data;e.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function c(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;3>d;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=d.height=1;var e=d.getContext("2d");a.addPropertiesHandler(b,c,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,b),a.mergeColors=c}(d,f),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(a){return c[a]=null,"U"+a});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(a,b){return e(a,b,!0)}function e(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(a){var b=l(a);return b&&""==b[1]?b[0]:void 0},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(a){function b(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function c(c){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,b,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],c);return d&&4==d[0].length?d[0]:void 0}function d(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function e(a){return"rect("+a+")"}var f=a.mergeWrappedNestedRepeated.bind(null,e,d,", ");a.parseBox=c,a.mergeBoxes=f,a.addPropertiesHandler(c,f,["clip"])}(d,f),function(a){function b(a){return function(b){var c=0;return a.map(function(a){return a===j?b[c++]:a})}}function c(a){return a}function d(b){if(b=b.toLowerCase().trim(),"none"==b)return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=m[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var n=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(p=q?{A:function(b){return"0"==b.trim()?l:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:l,n:n[0],t:k}[r],void 0===p)return;n.push(p)}if(e.push({t:g,d:n}),d.lastIndex==b.length)return e}}function e(a){return a.toFixed(6).replace(".000000","")}function f(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var f=a.makeMatrixDecomposition(c)}return null==d[0]||null==f[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),f[0].push(1),[d,f,function(b){var c=a.quat(d[0][3],f[0][3],b[5]),g=a.composeMatrix(b[0],b[1],b[2],c,b[4]),h=g.map(e).join(",");return h}])}function g(a){return a.replace(/[xy]/,"")}function h(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function i(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var i=0;i<b.length;i++){var j=b[i].t,k=b[i].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var n=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=f(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var i=0;i<b.length;i++){var j,s=b[i].t,t=c[i].t,u=b[i].d,v=c[i].d,w=m[s],x=m[t];if(n(s,t)){if(!d)return;var r=f([b[i]],[c[i]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&g(s)==g(t))j=g(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||h(s)!=h(t)){if(!d)return;var r=f(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=h(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C="number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var j=null,k={px:0},l={deg:0},m={matrix:["NNNNNN",[j,j,0,0,j,j,0,0,0,0,1,0,j,j,0,1],c],matrix3d:["NNNNNNNNNNNNNNNN",c],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",b([j,j,1]),c],scalex:["N",b([j,1,1]),b([j,1])],scaley:["N",b([1,j,1]),b([1,j])],scalez:["N",b([1,1,j])],scale3d:["NNN",c],skew:["Aa",null,c],skewx:["A",null,b([j,l])],skewy:["A",null,b([l,j])],translate:["Tt",b([j,j,k]),c],translatex:["T",b([j,k,k]),b([j,k])],translatey:["T",b([k,j,k]),b([k,j])],translatez:["L",b([k,k,j])],translate3d:["TTL",c]};a.addPropertiesHandler(d,i,["transform"])}(d,f),function(a){function b(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(c[a]=b)})}var c={};b("transform",["webkitTransform","msTransform"]),b("transformOrigin",["webkitTransformOrigin"]),b("perspective",["webkitPerspective"]),b("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return c[a]||a}}(d,f)}(),!function(a,b){function c(a){var b=window.document.timeline;b.currentTime=a,b._discardAnimations(),0==b._animations.length?e=!1:requestAnimationFrame(c)}var d=window.requestAnimationFrame;window.requestAnimationFrame=function(a){return d(function(b){window.document.timeline._updateAnimationsPromises(),a(b),window.document.timeline._updateAnimationsPromises()})},b.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},b.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){b.animationsWithPromises=b.animationsWithPromises.filter(function(a){return a._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(a){return"finished"!=a.playState&&"idle"!=a.playState})},_play:function(a){var c=new b.Animation(a,this);return this._animations.push(c),b.restartWebAnimationsNextTick(),c._updatePromises(),c._animation.play(),c._updatePromises(),c},play:function(a){return a&&a.remove(),this._play(a)}};var e=!1;b.restartWebAnimationsNextTick=function(){e||(e=!0,requestAnimationFrame(c))};var f=new b.AnimationTimeline;b.timeline=f;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return f}})}catch(a){}try{window.document.timeline=f}catch(a){}}(c,e,f),function(a,b){b.animationsWithPromises=[],b.Animation=function(b,c){if(this.effect=b,b&&(b._animation=this),!c)throw new Error("Animation with null timeline is not supported");this._timeline=c,this._sequenceNumber=a.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},b.Animation.prototype={_updatePromises:function(){var a=this._oldPlayState,b=this.playState;return this._readyPromise&&b!==a&&("idle"==b?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==a?this._resolveReadyPromise():"pending"==b&&(this._readyPromise=void 0)),this._finishedPromise&&b!==a&&("idle"==b?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==b?this._resolveFinishedPromise():"finished"==a&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var a,c,d,e,f=!!this._animation;f&&(a=this.playbackRate,c=this._paused,d=this.startTime,e=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=b.newUnderlyingAnimationForKeyframeEffect(this.effect),b.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=b.newUnderlyingAnimationForGroup(this.effect),b.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&b.bindAnimationForCustomEffect(this),f&&(1!=a&&(this.playbackRate=a),null!==d?this.startTime=d:null!==e?this.currentTime=e:null!==this._holdTime&&(this.currentTime=this._holdTime),c&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var a=this.effect._timing.delay;this._childAnimations.forEach(function(c){this._arrangeChildren(c,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c.effect))}.bind(this))}},_setExternalAnimation:function(a){if(this.effect&&this._isGroup)for(var b=0;b<this.effect.children.length;b++)this.effect.children[b]._animation=a,this._childAnimations[b]._setExternalAnimation(a)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var a=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(c){var d=window.document.timeline._play(c);this._childAnimations.push(d),d.playbackRate=this.playbackRate,this._paused&&d.pause(),c._animation=this.effect._animation,this._arrangeChildren(d,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c))}.bind(this))}},_arrangeChildren:function(a,b){null===this.startTime?a.currentTime=this.currentTime-b/this.playbackRate:a.startTime!==this.startTime+b/this.playbackRate&&(a.startTime=this.startTime+b/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(a,b){this._resolveFinishedPromise=function(){a(this)},this._rejectFinishedPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._readyPromise=new Promise(function(a,b){this._resolveReadyPromise=function(){a(this)},this._rejectReadyPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._onfinish},set onfinish(a){"function"==typeof a?(this._onfinish=a,this._animation.onfinish=function(b){b.target=this,a.call(this,b)}.bind(this)):(this._animation.onfinish=a,this.onfinish=this._animation.onfinish)},get currentTime(){this._updatePromises();var a=this._animation.currentTime;return this._updatePromises(),a},set currentTime(a){this._updatePromises(),this._animation.currentTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.currentTime=a-c}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(a){this._updatePromises(),this._animation.startTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.startTime=a+c}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(a){this._updatePromises();var b=this.currentTime;this._animation.playbackRate=a,this._forEachChild(function(b){b.playbackRate=a}),"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!==b&&(this.currentTime=b),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),b.awaitStartTime(this),this._forEachChild(function(a){var b=a.currentTime;a.play(),a.currentTime=b}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(a){a.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var a=this.currentTime;this._animation.reverse(),this._forEachChild(function(a){a.reverse()}),null!==a&&(this.currentTime=a),this._updatePromises()},addEventListener:function(a,b){var c=b;"function"==typeof b&&(c=function(a){a.target=this,b.call(this,a)}.bind(this),b._wrapper=c),this._animation.addEventListener(a,c)},removeEventListener:function(a,b){this._animation.removeEventListener(a,b&&b._wrapper||b)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(b){var c=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(a){b.call(this,a,c),this.effect instanceof window.SequenceEffect&&(c+=a.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var d=this.effect._timing,e=this.currentTime;null!==e&&(e=a.calculateTimeFraction(a.calculateActiveDuration(d),e,d)),(null==e||isNaN(e))&&this._removeChildAnimations()}}},window.Animation=b.Animation}(c,e,f),function(a,b){function c(b){this._frames=a.normalizeKeyframes(b)}function d(){for(var a=!1;h.length;){var b=h.shift();b._updateChildren(),a=!0}return a}var e=function(a){if(a._animation=void 0,a instanceof window.SequenceEffect||a instanceof window.GroupEffect)for(var b=0;b<a.children.length;b++)e(a.children[b])};b.removeMulti=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d._parent?(-1==b.indexOf(d._parent)&&b.push(d._parent),d._parent.children.splice(d._parent.children.indexOf(d),1),d._parent=null,e(d)):d._animation&&d._animation.effect==d&&(d._animation.cancel(),d._animation.effect=new KeyframeEffect(null,[]),d._animation._callback&&(d._animation._callback._animation=null),d._animation._rebuildUnderlyingAnimation(),e(d))}for(c=0;c<b.length;c++)b[c]._rebuild()},b.KeyframeEffect=function(b,d,e){return this.target=b,this._parent=null,e=a.numericTimingToObject(e),this._timingInput=a.cloneTimingInput(e),this._timing=a.normalizeTimingInput(e),this.timing=a.makeTiming(e,!1,this),this.timing._effect=this,"function"==typeof d?(a.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=d):this._normalizedKeyframes=new c(d),this._keyframes=d,this.activeDuration=a.calculateActiveDuration(this._timing),this},b.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(a){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=a,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");
var b=new KeyframeEffect(this.target,[],a.cloneTimingInput(this._timingInput));return b._normalizedKeyframes=this._normalizedKeyframes,b._keyframes=this._keyframes,b},remove:function(){b.removeMulti([this])}};var f=Element.prototype.animate;Element.prototype.animate=function(a,c){return b.timeline._play(new b.KeyframeEffect(this,a,c))};var g=document.createElementNS("http://www.w3.org/1999/xhtml","div");b.newUnderlyingAnimationForKeyframeEffect=function(a){if(a){var b=a.target||g,c=a._keyframes;"function"==typeof c&&(c=[]);var d=a._timingInput}else var b=g,c=[],d=0;return f.apply(b,[c,d])},b.bindAnimationForKeyframeEffect=function(a){a.effect&&"function"==typeof a.effect._normalizedKeyframes&&b.bindAnimationForCustomEffect(a)};var h=[];b.awaitStartTime=function(a){null===a.startTime&&a._isGroup&&(0==h.length&&requestAnimationFrame(d),h.push(a))};var i=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){window.document.timeline._updateAnimationsPromises();var a=i.apply(this,arguments);return d()&&(a=i.apply(this,arguments)),window.document.timeline._updateAnimationsPromises(),a}}),window.KeyframeEffect=b.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(a){return null!==a.effect&&a.effect.target==this}.bind(this))}}(c,e,f),function(a,b){function c(a){a._registered||(a._registered=!0,f.push(a),g||(g=!0,requestAnimationFrame(d)))}function d(){var a=f;f=[],a.sort(function(a,b){return a._sequenceNumber-b._sequenceNumber}),a=a.filter(function(a){a();var b=a._animation?a._animation.playState:"idle";return"running"!=b&&"pending"!=b&&(a._registered=!1),a._registered}),f.push.apply(f,a),f.length?(g=!0,requestAnimationFrame(d)):g=!1}var e=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);b.bindAnimationForCustomEffect=function(b){var d,f=b.effect.target,g="function"==typeof b.effect.getFrames();d=g?b.effect.getFrames():b.effect._onsample;var h=b.effect.timing,i=null;h=a.normalizeTimingInput(h);var j=function(){var c=j._animation?j._animation.currentTime:null;null!==c&&(c=a.calculateTimeFraction(a.calculateActiveDuration(h),c,h),isNaN(c)&&(c=null)),c!==i&&(g?d(c,f,b.effect):d(c,b.effect,b.effect._animation)),i=c};j._animation=b,j._registered=!1,j._sequenceNumber=e++,b._callback=j,c(j)};var f=[],g=!1;b.Animation.prototype._register=function(){this._callback&&c(this._callback)}}(c,e,f),function(a,b){function c(a){return a._timing.delay+a.activeDuration+a._timing.endDelay}function d(b,c){this._parent=null,this.children=b||[],this._reparent(this.children),c=a.numericTimingToObject(c),this._timingInput=a.cloneTimingInput(c),this._timing=a.normalizeTimingInput(c,!0),this.timing=a.makeTiming(c,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){d.apply(this,arguments)},window.GroupEffect=function(){d.apply(this,arguments)},d.prototype={_isAncestor:function(a){for(var b=this;null!==b;){if(b==a)return!0;b=b._parent}return!1},_rebuild:function(){for(var a=this;a;)"auto"===a.timing.duration&&(a._timing.duration=a.activeDuration),a=a._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(a){b.removeMulti(a);for(var c=0;c<a.length;c++)a[c]._parent=this},_putChild:function(a,b){for(var c=b?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",d=0;d<a.length;d++)if(this._isAncestor(a[d]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:c};for(var d=0;d<a.length;d++)b?this.children.push(a[d]):this.children.unshift(a[d]);this._reparent(a),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var b=a.cloneTimingInput(this._timingInput),c=[],d=0;d<this.children.length;d++)c.push(this.children[d].clone());return this instanceof GroupEffect?new GroupEffect(c,b):new SequenceEffect(c,b)},remove:function(){b.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(d.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a+=c(b)}),Math.max(a,0)}}),window.GroupEffect.prototype=Object.create(d.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a=Math.max(a,c(b))}),a}}),b.newUnderlyingAnimationForGroup=function(c){var d,e=null,f=function(b){var c=d._wrapper;return c&&"pending"!=c.playState&&c.effect?null==b?void c._removeChildAnimations():0==b&&c.playbackRate<0&&(e||(e=a.normalizeTimingInput(c.effect.timing)),b=a.calculateTimeFraction(a.calculateActiveDuration(e),-1,e),isNaN(b)||null==b)?(c._forEachChild(function(a){a.currentTime=-1}),void c._removeChildAnimations()):void 0:void 0},g=new KeyframeEffect(null,[],c._timing);return g.onsample=f,d=b.timeline._play(g)},b.bindAnimationForGroup=function(a){a._animation._wrapper=a,a._isGroup=!0,b.awaitStartTime(a),a._constructChildAnimations(),a._setExternalAnimation(a)},b.groupChildDuration=c}(c,e,f)}({},function(){return this}()),Polymer({is:"opaque-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return b.style.opacity="0",this._effect=new KeyframeEffect(b,[{opacity:"1"},{opacity:"1"}],this.timingFromConfig(a)),this._effect},complete:function(a){a.node.style.opacity=""}}),Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},"fade-in-animation"!==this.entryAnimation?this.animationConfig.entry=[{name:"opaque-animation",node:this},{name:this.entryAnimation,node:this}]:this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};return this._copyProperties(b,a),b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig){var d;if(d=a?this.animationConfig[a]:this.animationConfig,Array.isArray(d)||(d=[d]),d)for(var e,f=0;e=d[f];f++)if(e.animatable)e.animatable._getAnimationConfigRecursive(e.type||a,b,c);else if(e.id){var g=b[e.id];g?(g.isClone||(b[e.id]=this._cloneConfig(g),g=b[e.id]),this._copyProperties(g,e)):b[e.id]=e}else c.push(e)}},getAnimationConfig:function(a){var b=[],c=[];this._getAnimationConfigRecursive(a,b,c);for(var d in b)c.push(b[d]);return c}},Polymer.NeonAnimationRunnerBehaviorImpl={properties:{_animationMeta:{type:Object,value:function(){return new Polymer.IronMeta({type:"animation"})}},_player:{type:Object}},_configureAnimationEffects:function(a){var b=[];if(a.length>0)for(var c,d=0;c=a[d];d++){var e=this._animationMeta.byKey(c.name);if(e){var f=e&&new e,g=f.configure(c);g&&b.push({animation:f,config:c,effect:g})}else console.warn(this.is+":",c.name,"not found!")}return b},_runAnimationEffects:function(a){return document.timeline.play(new GroupEffect(a))},_completeAnimations:function(a){for(var b,c=0;b=a[c];c++)b.animation.complete(b.config)},playAnimation:function(a,b){var c=this.getAnimationConfig(a);if(c){var d=this._configureAnimationEffects(c),e=d.map(function(a){return a.effect});e.length>0?(this._player=this._runAnimationEffects(e),this._player.onfinish=function(){this._completeAnimations(d),this._player&&(this._player.cancel(),this._player=null),this.fire("neon-animation-finish",b,{bubbles:!1})}.bind(this)):this.fire("neon-animation-finish",b,{bubbles:!1})}},cancelAnimation:function(){this._player&&this._player.cancel()}},Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl],function(){"use strict";Polymer.IronDropdownScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(a){var c,b=this.currentLockingElement;return!!this._hasCachedLockedElement(a)||!this._hasCachedUnlockedElement(a)&&(c=!!b&&b!==a&&!this._composedTreeContains(b,a),c?this._lockedElementCache.push(a):this._unlockedElementCache.push(a),c)},pushScrollLock:function(a){0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(a),this._lockedElementCache=[],this._unlockedElementCache=[]},removeScrollLock:function(a){var b=this._lockingElements.indexOf(a);b!==-1&&(this._lockingElements.splice(b,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_originalBodyStyles:{},_isScrollingKeypress:function(a){return Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"pageup pagedown home end up left down right")},_hasCachedLockedElement:function(a){return this._lockedElementCache.indexOf(a)>-1},_hasCachedUnlockedElement:function(a){return this._unlockedElementCache.indexOf(a)>-1},_composedTreeContains:function(a,b){var c,d,e,f;if(a.contains(b))return!0;for(c=Polymer.dom(a).querySelectorAll("content"),e=0;e<c.length;++e)for(d=Polymer.dom(c[e]).getDistributedNodes(),f=0;f<d.length;++f)if(this._composedTreeContains(d[f],b))return!0;return!1},_scrollInteractionHandler:function(a){if(Polymer.IronDropdownScrollManager.elementIsScrollLocked(a.target)){if("keydown"===a.type&&!Polymer.IronDropdownScrollManager._isScrollingKeypress(a))return;a.preventDefault()}},_lockScrollInteractions:function(){this._originalBodyStyles.overflow=document.body.style.overflow,this._originalBodyStyles.overflowX=document.body.style.overflowX,this._originalBodyStyles.overflowY=document.body.style.overflowY,document.body.style.overflow="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden",window.addEventListener("wheel",this._scrollInteractionHandler,!0),window.addEventListener("mousewheel",this._scrollInteractionHandler,!0),window.addEventListener("DOMMouseScroll",this._scrollInteractionHandler,!0),window.addEventListener("touchmove",this._scrollInteractionHandler,!0),document.addEventListener("keydown",this._scrollInteractionHandler,!0)},_unlockScrollInteractions:function(){document.body.style.overflow=this._originalBodyStyles.overflow,document.body.style.overflowX=this._originalBodyStyles.overflowX,document.body.style.overflowY=this._originalBodyStyles.overflowY,window.removeEventListener("wheel",this._scrollInteractionHandler,!0),window.removeEventListener("mousewheel",this._scrollInteractionHandler,!0),window.removeEventListener("DOMMouseScroll",this._scrollInteractionHandler,!0),window.removeEventListener("touchmove",this._scrollInteractionHandler,!0),document.removeEventListener("keydown",this._scrollInteractionHandler,!0)}}}(),Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;return this._effect=new KeyframeEffect(b,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"paper-menu-grow-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height;return this._effect=new KeyframeEffect(b,[{height:d/2+"px"},{height:d+"px"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"paper-menu-grow-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d/2+"px"},{width:d+"px"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"paper-menu-shrink-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.width;return this._effect=new KeyframeEffect(b,[{width:d+"px"},{width:d-d/20+"px"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"paper-menu-shrink-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect(),d=c.height;c.top;return this.setPrefixedProperty(b,"transformOrigin","0 0"),this._effect=new KeyframeEffect(b,[{height:d+"px",transform:"translateY(0)"},{height:d/2+"px",transform:"translateY(-20px)"}],this.timingFromConfig(a)),this._effect}}),Polymer({is:"iron-icon",properties:{icon:{type:String,observer:"_iconChanged"},theme:{type:String,observer:"_updateIcon"},src:{type:String,observer:"_srcChanged"},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},_DEFAULT_ICONSET:"icons",_iconChanged:function(a){var b=(a||"").split(":");this._iconName=b.pop(),this._iconsetName=b.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(a){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?this._iconsetName&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon")):(this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}}),Polymer({is:"paper-material",properties:{elevation:{type:Number,reflectToAttribute:!0,value:1},animated:{type:Boolean,reflectToAttribute:!0,value:!1}}}),function(){function b(a){this.element=a,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function c(a){this.element=a,this.color=window.getComputedStyle(a).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}var a={distance:function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};b.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(b,c){var d=a.distance(b,c,0,0),e=a.distance(b,c,this.width,0),f=a.distance(b,c,0,this.height),g=a.distance(b,c,this.width,this.height);return Math.max(d,e,f,g)}},c.MAX_RADIUS=300,c.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var b;return this.mouseDownStart?(b=a.now()-this.mouseDownStart,this.mouseUpStart&&(b-=this.mouseUpElapsed),b):0},get mouseUpElapsed(){return this.mouseUpStart?a.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var a=this.containerMetrics.width*this.containerMetrics.width,b=this.containerMetrics.height*this.containerMetrics.height,d=1.1*Math.min(Math.sqrt(a+b),c.MAX_RADIUS)+5,e=1.1-.2*(d/c.MAX_RADIUS),f=this.mouseInteractionSeconds/e,g=d*(1-Math.pow(80,-f));return Math.abs(g)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var a=.3*this.mouseUpElapsedSeconds,b=this.opacity;return Math.max(0,Math.min(a,b))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,c.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,c.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new b(this.element)},draw:function(){var a,c,d;this.wave.style.opacity=this.opacity,a=this.radius/(this.containerMetrics.size/2),c=this.xNow-this.containerMetrics.width/2,d=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+c+"px, "+d+"px)",this.waveContainer.style.transform="translate3d("+c+"px, "+d+"px, 0)",this.wave.style.webkitTransform="scale("+a+","+a+")",this.wave.style.transform="scale3d("+a+","+a+",1)"},downAction:function(b){var c=this.containerMetrics.width/2,d=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=a.now(),this.center?(this.xStart=c,this.yStart=d,this.slideDistance=a.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=b?b.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=b?b.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=c,this.yEnd=d,this.slideDistance=a.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(b){this.isMouseDown&&(this.mouseUpStart=a.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},observers:["_noinkChanged(noink, isAttached)"],get target(){var b,a=Polymer.dom(this).getOwnerRoot();return b=11==this.parentNode.nodeType?a.host:this.parentNode},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){this.listen(this.target,"up","uiUpAction"),this.listen(this.target,"down","uiDownAction")},detached:function(){this.unlisten(this.target,"up","uiUpAction"),this.unlisten(this.target,"down","uiDownAction")},get shouldKeepAnimating(){for(var a=0;a<this.ripples.length;++a)if(!this.ripples[a].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(a){this.noink||this.downAction(a)},downAction:function(a){if(!(this.holdDown&&this.ripples.length>0)){var b=this.addRipple();b.downAction(a),this._animating||this.animate()}},uiUpAction:function(a){this.noink||this.upAction(a)},upAction:function(a){this.holdDown||(this.ripples.forEach(function(b){b.upAction(a)}),this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire("transitionend")},addRipple:function(){var a=new c(this);return Polymer.dom(this.$.waves).appendChild(a.waveContainer),this.$.background.style.backgroundColor=a.color,this.ripples.push(a),this._setAnimating(!0),a},removeRipple:function(a){var b=this.ripples.indexOf(a);b<0||(this.ripples.splice(b,1),a.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){var a,b;for(this._animating=!0,a=0;a<this.ripples.length;++a)b=this.ripples[a],b.draw(),this.$.background.style.opacity=b.outerOpacity,b.isOpacityFullyDecayed&&!b.isRestingAtMaxRadius&&this.removeRipple(b);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(a,b){void 0!==b&&(a?this.downAction():this.upAction())},_noinkChanged:function(a,b){b&&(this.keyEventTarget=a?this:this.target)}})}(),Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this.elevation=0}}),Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0),this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput)},attached:function(){""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement),this._numberOfPrefixNodes=0,this._prefixObserver=Polymer.dom(this.$.prefix).observeNodes(function(a){this._numberOfPrefixNodes+=a.addedNodes.length-a.removedNodes.length}.bind(this))},detached:function(){this._prefixObserver&&Polymer.dom(this.$.prefix).unobserveNodes(this._prefixObserver)},_onAddonAttached:function(a){this._addons||(this._addons=[]);var b=a.target;this._addons.indexOf(b)===-1&&(this._addons.push(b),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=this._inputElementValue;b||0===b||"number"===a.type&&!a.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){if(this.autoValidate){var b;b=a.validate?a.validate(this._inputElementValue):a.checkValidity(),this.invalid=!b}this._handleValue(a)},_onIronInputValidate:function(a){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,d,e){var f="input-content";if(a)e&&(f+=" label-is-hidden");else{var g=this.querySelector("label");b||e?(f+=" label-is-floating",d?f+=" is-invalid":c&&(f+=" label-is-highlighted"),this._numberOfPrefixNodes>0&&(this.$.labelAndInputContainer.style.position="static")):g&&(this.$.labelAndInputContainer.style.position="relative")}return f},_computeUnderlineClass:function(a,b){var c="underline";return b?c+=" is-invalid":a&&(c+=" is-highlighted"),c},_computeAddOnContentClass:function(a,b){var c="add-on-content";return b?c+=" is-invalid":a&&(c+=" is-highlighted"),c}}),Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}}),Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(a){if(a.inputElement){a.value=a.value||"";var b=a.value.replace(/(\r\n|\n|\r)/g,"--").length;a.inputElement.hasAttribute("maxlength")&&(b+="/"+a.inputElement.getAttribute("maxlength")),this._charCounterStr=b}}}),Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior,Polymer.IronControlState]}),Polymer({is:"paper-toggle-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"button","aria-pressed":"false",tabindex:0},properties:{},listeners:{track:"_ontrack"},_ontrack:function(a){var b=a.detail;"start"===b.state?this._trackStart(b):"track"===b.state?this._trackMove(b):"end"===b.state&&this._trackEnd(b)},_trackStart:function(a){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add("dragging")},_trackMove:function(a){var b=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+b:b)),this.translate3d(this._x+"px",0,0,this.$.toggleButton),this._userActivate(this._x>this._width/2)},_trackEnd:function(a){this.$.toggleButton.classList.remove("dragging"),this.transform("",this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var a=Polymer.PaperRippleBehavior._createRipple();return a.id="ink",a.setAttribute("recenters",""),a.classList.add("circle","toggle-ink"),a}}),Polymer({is:"tf-graph-minimap",init:function(a,b,c,d,e){return new tf.scene.Minimap(a,b,c,this,d,e)}}),Polymer({is:"tf-graph-scene",properties:{graphHierarchy:Object,name:String,colorBy:{type:String,observer:"_colorByChanged"},_zoom:Object,highlightedNode:{type:String,observer:"_highlightedNodeChanged"},selectedNode:{type:String,observer:"_selectedNodeChanged"},_zoomed:{type:Boolean,observer:"_onZoomChanged",value:!1},_zoomStartCoords:{type:Array,value:null},_zoomCoords:{type:Array,value:null},_maxZoomDistanceForClick:{type:Number,value:20},templateIndex:Object,minimap:Object,_nodeGroupIndex:{type:Object,value:function(){return{}}},_annotationGroupIndex:{type:Object,value:function(){return{}}},_edgeGroupIndex:{type:Object,value:function(){return{}}},maxMetanodeLabelLengthFontSize:{type:Number,value:9},minMetanodeLabelLengthFontSize:{type:Number,value:6},maxMetanodeLabelLengthLargeFont:{type:Number,value:11},maxMetanodeLabelLength:{type:Number,value:18},progress:Object},observers:["_buildAndFit(graphHierarchy)"],getNode:function(a){return this.graphHierarchy.getRenderNodeByName(a)},isNodeExpanded:function(a){return a.expanded},setNodeExpanded:function(a){this._build(this.graphHierarchy)},_resetState:function(){this._nodeGroupIndex={},this._annotationGroupIndex={},this._edgeGroupIndex={},this._updateLabels(!1),d3.select(this.$.svg).select("#root").selectAll("*").remove(),d3.select(this.$.svg).select("defs #linearGradients").selectAll("*").remove()},_build:function(a){if(a){var b=d3.keys(a.hierarchy.templates);this.templateIndex=d3.scale.ordinal().domain(b).range(d3.range(0,b.length)),tf.time("tf-graph-scene (layout):",function(){tf.graph.layout.scene(a.root,this)}.bind(this)),tf.time("tf-graph-scene (build scene):",function(){tf.graph.scene.buildGroup(d3.select(this.$.root),a.root,this),tf.graph.scene.addGraphClickListener(this.$.svg,this)}.bind(this)),setTimeout(function(){this.minimap.update()}.bind(this),tf.graph.layout.PARAMS.animation.duration)}},ready:function(){this._zoom=d3.behavior.zoom().on("zoomend",function(){if(this._zoomStartCoords){var a=Math.sqrt(Math.pow(this._zoomStartCoords[0]-this._zoomCoords[0],2)+Math.pow(this._zoomStartCoords[1]-this._zoomCoords[1],2));a<this._maxZoomDistanceForClick?this._fireEnableClick():setTimeout(this._fireEnableClick.bind(this),50)}this._zoomStartCoords=null}.bind(this)).on("zoom",function(){this._zoomCoords=d3.event.translate,this._zoomStartCoords||(this._zoomStartCoords=this._zoomCoords.slice(),this.fire("disable-click")),this._zoomed=!0,d3.select(this.$.root).attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"),this.minimap.zoom(d3.event.translate,d3.event.scale)}.bind(this)),d3.select(this.$.svg).call(this._zoom).on("dblclick.zoom",null),d3.select(window).on("resize",function(){this.minimap.zoom()}.bind(this)),this.minimap=this.$.minimap.init(this.$.svg,this.$.root,this._zoom,tf.graph.layout.PARAMS.minimap.size,tf.graph.layout.PARAMS.subscene.meta.labelHeight)},_buildAndFit:function(a){this._resetState(),this._build(a),setTimeout(this.fit.bind(this),tf.graph.layout.PARAMS.animation.duration)},_updateLabels:function(a){var b=this.getElementsByClassName("title")[0].style,c=this.getElementsByClassName("auxTitle")[0].style,d=this.getElementsByClassName(tf.graph.scene.Class.Scene.CORE)[0];if(a&&d&&this.progress&&100===this.progress.value){var e=this.getElementsByClassName(tf.graph.scene.Class.Scene.INEXTRACT)[0]||this.getElementsByClassName(tf.graph.scene.Class.Scene.OUTEXTRACT)[0],f=d.getCTM().e,g=e?e.getCTM().e:null;b.display="inline",b.left=f+"px",null!==g&&g!==f?(c.display="inline",c.left=g+"px"):c.display="none"}else b.display="none",c.display="none"},_colorByChanged:function(){_.each(this._nodeGroupIndex,function(a,b){this._updateNodeState(b)},this),this.minimap.update()},fit:function(){tf.graph.scene.fit(this.$.svg,this.$.root,this._zoom,function(){this._zoomed=!1}.bind(this))},isNodeSelected:function(a){return a===this.selectedNode},isNodeHighlighted:function(a){return a===this.highlightedNode},addAnnotationGroup:function(a,b,c){var d=a.node.name;this._annotationGroupIndex[d]=this._annotationGroupIndex[d]||{},this._annotationGroupIndex[d][b.node.name]=c},getAnnotationGroupsIndex:function(a){return this._annotationGroupIndex[a]},removeAnnotationGroup:function(a,b){delete this._annotationGroupIndex[a.node.name][b.node.name]},addNodeGroup:function(a,b){this._nodeGroupIndex[a]=b},getNodeGroup:function(a){return this._nodeGroupIndex[a]},removeNodeGroup:function(a){delete this._nodeGroupIndex[a]},addEdgeGroup:function(a,b){this._edgeGroupIndex[e]=b},getEdgeGroup:function(a){return this._edgeGroupIndex[a]},_updateNodeState:function(a){var b=this.getNode(a),c=this.getNodeGroup(a);c&&tf.graph.scene.node.stylize(c,b,this);var d=this.getAnnotationGroupsIndex(a);_.each(d,function(a,c){tf.graph.scene.node.stylize(a,b,this,tf.graph.scene.Class.Annotation.NODE);
},this)},_selectedNodeChanged:function(a,b){if(a!==b&&(a&&this._updateNodeState(a),b&&this._updateNodeState(b),a)){this.minimap.update();for(var c=this.graphHierarchy.hierarchy.node(a),d=[];null!=c.parentNode&&c.parentNode.name!=tf.graph.ROOT_NAME;)c=c.parentNode,d.push(c.name);var e;_.forEachRight(d,function(a){this.graphHierarchy.buildSubhierarchy(a);var b=this.graphHierarchy.getRenderNodeByName(a);b.node.isGroupNode&&!b.expanded&&(b.expanded=!0,e||(e=b))},this),e&&(this.setNodeExpanded(e),this._zoomed=!0),tf.graph.scene.panToNode(a,this.$.svg,this.$.root,this._zoom)&&(this._zoomed=!0)}},_highlightedNodeChanged:function(a,b){a!==b&&(a&&this._updateNodeState(a),b&&this._updateNodeState(b))},_onZoomChanged:function(){this._updateLabels(!this._zoomed)},_fireEnableClick:function(){this.fire("enable-click")}}),Polymer({is:"tf-graph-params",properties:{enableExtraction:{type:Boolean,value:!0},maxInDegree:{type:Number,value:4},maxOutDegree:{type:Number,value:4},maxControlDegree:{type:Number,value:4},outExtractTypes:{type:Array,value:function(){return["NoOp"]}},inExtractTypes:{type:Array,value:function(){return["Variable"]}},detachAllEdgesForHighDegree:{type:Boolean,value:!1},extractIsolatedNodesWithAnnotationsOnOneSide:{type:Boolean,value:!0},enableBridgegraph:{type:Boolean,value:!0},minMaxColors:{type:Array,value:function(){return["#fff5f0","#fb6a4a"]}},maxAnnotations:{type:Number,value:5}}}),Polymer({is:"tf-graph",properties:{graphHierarchy:{type:Object,notify:!0,observer:"_graphChanged"},title:String,selectedNode:{type:String,notify:!0},highlightedNode:{type:String,notify:!0},colorBy:String,colorByParams:{type:Object,notify:!0,readOnly:!0},_graphParams:{type:Object,value:function(){return this.$.graphParams}},_renderDepth:{type:Number,value:1},_renderHierarchy:{type:Object,readOnly:!0,notify:!0,computed:"_buildRenderHierarchy(graphHierarchy, _graphParams)"},_allowGraphSelect:{type:Boolean,value:!0}},_buildRenderHierarchy:function(a,b){return tf.time("new tf.graph.render.Hierarchy",function(){function d(a){return{minValue:a.domain()[0],maxValue:a.domain()[1],startColor:a.range()[0],endColor:a.range()[1]}}if(a.root.type===tf.graph.NodeType.META){var c=new tf.graph.render.RenderGraphInformation(a,b);return this._setColorByParams({compute_time:d(c.computeTimeScale),memory:d(c.memoryUsageScale),device:_.map(c.deviceColorMap.domain(),function(a){return{device:a,color:c.deviceColorMap(a)}})}),c}}.bind(this))},_getVisible:function(a){return a?this._renderHierarchy.getNearestVisibleAncestor(a):a},listeners:{"graph-select":"_graphSelected","disable-click":"_disableClick","enable-click":"_enableClick","node-toggle-expand":"_nodeToggleExpand","node-select":"_nodeSelected","node-highlight":"_nodeHighlighted","node-unhighlight":"_nodeUnhighlighted","annotation-select":"_nodeSelected","annotation-highlight":"_nodeHighlighted","annotation-unhighlight":"_nodeUnhighlighted"},_graphChanged:function(){this.fire("graph-select")},_graphSelected:function(a){this._allowGraphSelect&&this.set("selectedNode",null),this._allowGraphSelect=!0},_disableClick:function(a){this._allowGraphSelect=!1},_enableClick:function(a){this._allowGraphSelect=!0},_nodeSelected:function(a){this._allowGraphSelect&&this.set("selectedNode",a.detail.name),this._allowGraphSelect=!0},_nodeHighlighted:function(a){this.set("highlightedNode",a.detail.name)},_nodeUnhighlighted:function(a){this.set("highlightedNode",null)},_nodeToggleExpand:function(a){var b=a.detail.name,c=this._renderHierarchy.getRenderNodeByName(b);c.node.type!==tf.graph.NodeType.OP&&(this._renderHierarchy.buildSubhierarchy(b),c.expanded=!c.expanded,this.querySelector("#scene").setNodeExpanded(c),this._nodeSelected(a))},not:function(a){return!a}}),Polymer({is:"iron-collapse",properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"}},hostAttributes:{role:"group","aria-expanded":"false"},listeners:{transitionend:"_transitionEnd"},ready:function(){this._enableTransition=!0},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){this.enableTransition(b);var c=this.style,d=c[this.dimension]===a;c[this.dimension]=a,b&&d&&this._transitionEnd()},enableTransition:function(a){this.style.transitionDuration=a&&this._enableTransition?"":"0s"},_horizontalChanged:function(){this.dimension=this.horizontal?"width":"height",this.style.transitionProperty=this.dimension},_openedChanged:function(){if(this.opened){this.setAttribute("aria-expanded","true"),this.setAttribute("aria-hidden","false"),this.toggleClass("iron-collapse-closed",!1),this.updateSize("auto",!1);var a=this._calcSize();this.updateSize("0px",!1),this.offsetHeight,this.updateSize(a,!0),this.focus()}else this.setAttribute("aria-expanded","false"),this.setAttribute("aria-hidden","true"),this.toggleClass("iron-collapse-opened",!1),this.updateSize(this._calcSize(),!1),this.offsetHeight,this.updateSize("0px",!0)},_transitionEnd:function(){this.opened&&this.updateSize("auto",!1),this.toggleClass("iron-collapse-closed",!this.opened),this.toggleClass("iron-collapse-opened",this.opened),this.enableTransition(!1)},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}}),function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&a[1]>=8,c=20,d=500;Polymer({is:"iron-list",properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},selectedAs:{type:String,value:"selected"},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1}},observers:["_itemsChanged(items.*)","_selectionEnabledChanged(selectionEnabled)","_multiSelectionChanged(multiSelection)"],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior],listeners:{"iron-resize":"_resizeHandler"},_ratio:.5,_scroller:null,_scrollerPaddingTop:0,_scrollPosition:0,_physicalCount:0,_physicalStart:0,_physicalEnd:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_virtualStartVal:0,_physicalIndexForKey:null,_estScrollHeight:0,_scrollHeight:0,_viewportSize:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_itemsRendered:!1,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportSize},get _virtualEnd(){return this._virtualStartVal+this._physicalCount-1},_minVirtualStart:0,get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},get _hiddenContentSize(){return this._physicalSize-this._viewportSize},get _maxScrollTop(){return this._estScrollHeight-this._viewportSize},set _virtualStart(a){this._virtualStartVal=Math.min(this._maxVirtualStart,Math.max(this._minVirtualStart,a)),this._physicalStart=this._virtualStartVal%this._physicalCount,this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _virtualStart(){return this._virtualStartVal},get _optPhysicalSize(){return 3*this._viewportSize},get _isVisible(){return this._scroller&&Boolean(this._scroller.offsetWidth||this._scroller.offsetHeight)},get firstVisibleIndex(){var a;return null===this._firstVisibleIndexVal&&(a=this._physicalTop,this._firstVisibleIndexVal=this._iterateItems(function(b,c){if(a+=this._physicalSizes[b],a>this._scrollPosition)return c})||0),this._firstVisibleIndexVal},ready:function(){b?this._scrollListener=function(){requestAnimationFrame(this._scrollHandler.bind(this))}.bind(this):this._scrollListener=this._scrollHandler.bind(this)},attached:function(){var a=Polymer.dom(this),c=a.parentNode;c&&c.scroller?this._scroller=c.scroller:(this._scroller=this,this.classList.add("has-scroller")),b&&(this._scroller.style.webkitOverflowScrolling="touch"),this._scroller.addEventListener("scroll",this._scrollListener),this.updateViewportBoundaries(),this._render()},detached:function(){this._itemsRendered=!1,this._scroller&&this._scroller.removeEventListener("scroll",this._scrollListener)},updateViewportBoundaries:function(){var a=window.getComputedStyle(this._scroller);this._scrollerPaddingTop=parseInt(a["padding-top"],10),this._viewportSize=this._scroller.offsetHeight},_refresh:function(){var b,d,e,f,a=Math.max(0,Math.min(this._maxScrollTop,this._scroller.scrollTop)),g=this._ratio,h=a-this._scrollPosition,i=0,j=this._hiddenContentSize,k=g,l=[];if(this._scrollPosition=a,this._firstVisibleIndexVal=null,f=this._scrollBottom,Math.abs(h)>this._physicalSize)this._physicalTop+=h,i=Math.round(h/this._physicalAverage);else if(h<0){var m=a-this._physicalTop,n=this._virtualStart,o=this._physicalBottom;for(e=[],d=this._physicalEnd,k=m/j;k<g&&i<this._physicalCount&&n-i>0&&o-this._physicalSizes[d]>f;)b=this._physicalSizes[d],k+=b/j,o-=b,e.push(d),i++,d=0===d?this._physicalCount-1:d-1;l=e,i=-i}else if(h>0){var p=this._physicalBottom-f,q=this._virtualEnd,r=this._virtualCount-1;for(e=[],d=this._physicalStart,k=p/j;k<g&&i<this._physicalCount&&q+i<r&&this._physicalTop+this._physicalSizes[d]<a;)b=this._physicalSizes[d],k+=b/j,this._physicalTop+=b,e.push(d),i++,d=(d+1)%this._physicalCount}0===i?this._increasePoolIfNeeded()&&this.async(this._update):(this._virtualStart=this._virtualStart+i,this._update(e,l))},_update:function(a,b){if(this._assignModels(a),this._updateMetrics(a),b)for(;b.length;)this._physicalTop-=this._physicalSizes[b.pop()];this._positionItems(),this._updateScrollerSize(),this._increasePoolIfNeeded()&&this.async(this._update)},_createPool:function(a){var b=new Array(a);this._ensureTemplatized();for(var c=0;c<a;c++){var d=this.stamp(null);b[c]=d.root.querySelector("*"),Polymer.dom(this).appendChild(d.root)}return b},_increasePoolIfNeeded:function(){return 0!==this._physicalAverage&&(this._physicalBottom<this._scrollBottom||this._physicalTop>this._scrollPosition?this._increasePool(1):this._physicalSize<this._optPhysicalSize&&this._increasePool(Math.round(1.2*(this._optPhysicalSize-this._physicalSize)/this._physicalAverage)))},_increasePool:function(a){var b=Math.min(this._physicalCount+a,this._virtualCount,d),c=this._physicalCount,e=b-c;return!(e<=0)&&([].push.apply(this._physicalItems,this._createPool(e)),[].push.apply(this._physicalSizes,new Array(e)),this._physicalCount=c+e,!0)},_render:function(){var a=this._virtualCount>0||this._physicalCount>0;this.isAttached&&!this._itemsRendered&&this._isVisible&&a&&(this._update(),this._itemsRendered=!0)},_ensureTemplatized:function(){if(!this.ctor){var a={};a.__key__=!0,a[this.as]=!0,a[this.indexAs]=!0,a[this.selectedAs]=!0,this._instanceProps=a,this._userTemplate=Polymer.dom(this).querySelector("template"),this._userTemplate?this.templatize(this._userTemplate):console.warn("iron-list requires a template to be provided in light-dom")}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(a,b,c){0===b.indexOf(this.as+".")&&this.notifyPath("items."+a.__key__+"."+b.slice(this.as.length+1),c)},_forwardParentProp:function(a,b){this._physicalItems&&this._physicalItems.forEach(function(c){c._templateInstance[a]=b},this)},_forwardParentPath:function(a,b){this._physicalItems&&this._physicalItems.forEach(function(c){c._templateInstance.notifyPath(a,b,!0)},this)},_forwardItemPath:function(a,b){if(this._physicalIndexForKey){var c=a.indexOf("."),d=a.substring(0,c<0?a.length:c),e=this._physicalIndexForKey[d],f=this._physicalItems[e];if(f){var g=f._templateInstance;c>=0?(a=this.as+"."+a.substring(c+1),g.notifyPath(a,b,!0)):g[this.as]=b}}},_itemsChanged:function(a){"items"===a.path?(this._itemsRendered=!1,this._virtualStartVal=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._resetScrollPosition(0),this._physicalItems||(this._physicalCount=Math.max(1,Math.min(c,this._virtualCount)),this._physicalItems=this._createPool(this._physicalCount),this._physicalSizes=new Array(this._physicalCount)),this.debounce("refresh",this._render)):"items.splices"===a.path?(this._itemsRendered=!1,this._adjustVirtualIndex(a.value.indexSplices),this._virtualCount=this.items?this.items.length:0,this.debounce("refresh",this._render)):this._forwardItemPath(a.path.split(".").slice(1).join("."),a.value)},_adjustVirtualIndex:function(a){var b,c,d;for(b=0;b<a.length&&(c=a[b],c.removed.forEach(this.$.selector.deselect,this.$.selector),d=c.index,!(d>=this._virtualStartVal));b++)this._virtualStart=this._virtualStart+Math.max(c.addedCount-c.removed.length,d-this._virtualStartVal)},_scrollHandler:function(){this._refresh()},_iterateItems:function(a,b){var c,d,e,f;if(2===arguments.length&&b){for(f=0;f<b.length;f++)if(c=b[f],d=c>=this._physicalStart?this._virtualStartVal+(c-this._physicalStart):this._virtualStartVal+(this._physicalCount-this._physicalStart)+c,null!=(e=a.call(this,c,d)))return e}else{for(c=this._physicalStart,d=this._virtualStartVal;c<this._physicalCount;c++,d++)if(null!=(e=a.call(this,c,d)))return e;for(c=0;c<this._physicalStart;c++,d++)if(null!=(e=a.call(this,c,d)))return e}},_assignModels:function(a){this._iterateItems(function(a,b){var c=this._physicalItems[a],d=c._templateInstance,e=this.items&&this.items[b];e?(d[this.as]=e,d.__key__=this._collection.getKey(e),d[this.selectedAs]=this.$.selector.isSelected(e),d[this.indexAs]=b,c.removeAttribute("hidden"),this._physicalIndexForKey[d.__key__]=a):(d.__key__=null,c.setAttribute("hidden",""))},a)},_updateMetrics:function(a){var b=0,c=0,d=this._physicalAverageCount,e=this._physicalAverage;Polymer.dom.flush(),this._iterateItems(function(a,d){c+=this._physicalSizes[a]||0,this._physicalSizes[a]=this._physicalItems[a].offsetHeight,b+=this._physicalSizes[a],this._physicalAverageCount+=this._physicalSizes[a]?1:0},a),this._physicalSize=this._physicalSize+b-c,this._viewportSize=this._scroller.offsetHeight,this._physicalAverageCount!==d&&(this._physicalAverage=Math.round((e*d+b)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();var a=this._physicalTop;this._iterateItems(function(b){this.transform("translate3d(0, "+a+"px, 0)",this._physicalItems[b]),a+=this._physicalSizes[b]})},_adjustScrollPosition:function(){var a=0===this._virtualStartVal?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);a&&(this._physicalTop=this._physicalTop-a,b||this._resetScrollPosition(this._scroller.scrollTop-a))},_resetScrollPosition:function(a){this._scroller&&(this._scroller.scrollTop=a,this._scrollPosition=this._scroller.scrollTop)},_updateScrollerSize:function(a){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStartVal,0)*this._physicalAverage,a=a||0===this._scrollHeight,a=a||this._scrollPosition>=this._estScrollHeight-this._physicalSize,(a||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(a){if("number"==typeof a){this.firstVisibleIndex;a=Math.min(Math.max(a,0),this._virtualCount-1),this._virtualStart=a-1,this._assignModels(),this._updateMetrics(),this._physicalTop=this._virtualStart*this._physicalAverage;for(var c=this._physicalStart,d=this._virtualStart,e=0,f=this._hiddenContentSize;d!==a&&e<f;)e+=this._physicalSizes[c],c=(c+1)%this._physicalCount,d++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+e+1),this._increasePoolIfNeeded()&&this.async(this._update),this._firstVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this.debounce("resize",function(){this._render(),this._itemsRendered&&this._physicalItems&&this._isVisible&&(this._resetAverage(),this.updateViewportBoundaries(),this.scrollToIndex(this.firstVisibleIndex))})},_getModelFromItem:function(a){var b=this._collection.getKey(a),c=this._physicalIndexForKey[b];return void 0!==c?this._physicalItems[c]._templateInstance:null},_getNormalizedItem:function(a){if("number"==typeof a){if(a=this.items[a],!a)throw new RangeError("<item> not found")}else if(void 0===this._collection.getKey(a))throw new TypeError("<item> should be a valid item");return a},selectItem:function(a){a=this._getNormalizedItem(a);var b=this._getModelFromItem(a);!this.multiSelection&&this.selectedItem&&this.deselectItem(this.selectedItem),b&&(b[this.selectedAs]=!0),this.$.selector.select(a)},deselectItem:function(a){a=this._getNormalizedItem(a);var b=this._getModelFromItem(a);b&&(b[this.selectedAs]=!1),this.$.selector.deselect(a)},toggleSelectionForItem:function(a){a=this._getNormalizedItem(a),this.$.selector.isSelected(a)?this.deselectItem(a):this.selectItem(a)},clearSelection:function(){function a(a){var b=this._getModelFromItem(a);b&&(b[this.selectedAs]=!1)}Array.isArray(this.selectedItems)?this.selectedItems.forEach(a,this):this.selectedItem&&a.call(this,this.selectedItem),this.$.selector.clearSelection()},_selectionEnabledChanged:function(a){a?(this.listen(this,"tap","_selectionHandler"),this.listen(this,"keypress","_selectionHandler")):(this.unlisten(this,"tap","_selectionHandler"),this.unlisten(this,"keypress","_selectionHandler"))},_selectionHandler:function(a){if("keypress"!==a.type||13===a.keyCode){var b=this.modelForElement(a.target);b&&this.toggleSelectionForItem(b[this.as])}},_multiSelectionChanged:function(a){this.clearSelection(),this.$.selector.multi=a},updateSizeForItem:function(a){a=this._getNormalizedItem(a);var b=this._collection.getKey(a),c=this._physicalIndexForKey[b];void 0!==c&&(this._updateMetrics([c]),this._positionItems())}})}(),Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(a,b){var c=this.getAttribute("aria-label");c&&b!=c||this.setAttribute("aria-label",a)}}),Polymer({is:"paper-item",hostAttributes:{role:"option",tabindex:"0"},behaviors:[Polymer.IronControlState,Polymer.IronButtonState]}),Polymer({is:"paper-item-body"}),Polymer({is:"paper-icon-item",hostAttributes:{role:"option",tabindex:"0"},behaviors:[Polymer.IronControlState,Polymer.IronButtonState]}),function(){Polymer({is:"tf-graph-icon",properties:{node:{type:Object,value:null},type:{type:String,value:null},vertical:{type:Boolean,value:!1},const:{type:Boolean,value:!1},summary:{type:Boolean,value:!1},height:{type:Number,value:20}},_isType:function(a,b,c){return a?tf.graph.NodeType[a.type]===c:b===c},_isVertical:function(a,b){return a?a.hasNonControlEdges:!!b},_isConst:function(a,b){return a?"Const"===a.op:!!b},_isSummary:function(a,b){return a?this._isType(a,null,"OP")&&"Summary"===a.op.substr(-7):!!b},_isRegularOp:function(a,b,c){return!this._isConst(a,b)&&!this._isSummary(a,c)}})}(),function(){Polymer({is:"tf-node-list-item",properties:{cardNode:Object,itemNode:Object,name:String,itemType:{type:String,observer:"_itemTypeChanged"}},_itemTypeChanged:function(){"subnode"!==this.itemType?this.$["list-item"].classList.add("clickable"):this.$["list-item"].classList.remove("clickable")},_nodeListener:function(a){this.fire("node-list-item-"+a.type,{cardNode:this.cardNode.name,nodeName:this.name,type:this.itemType})}})}(),function(){Polymer({is:"tf-node-info",properties:{nodeName:String,graphHierarchy:Object,_node:{type:Object,computed:"_getNode(nodeName, graphHierarchy)",observer:"_resetState"},_attributes:{type:Array,computed:"_getAttributes(_node)"},_device:{type:String,computed:"_getDevice(_node)"},_successors:{type:Object,computed:"_getSuccessors(_node, graphHierarchy)"},_predecessors:{type:Object,computed:"_getPredecessors(_node, graphHierarchy)"},_subnodes:{type:Array,computed:"_getSubnodes(_node)"},_expanded:{type:Boolean,value:!0},_totalPredecessors:{type:Number,computed:"_getTotalPred(_predecessors)"},_totalSuccessors:{type:Number,computed:"_getTotalSucc(_successors)"},_openedControlPred:{type:Boolean,value:!1},_openedControlSucc:{type:Boolean,value:!1}},expandNode:function(){this.fire("_node.expand",this.node)},_getNode:function(a,b){return b.node(a)},_getNodeName:function(a){return(a||"").replace(/\//g,"/")},_getAttributes:function(a){return this.async(this._resizeList.bind(this,"#attributesList")),a&&a.attr?a.attr.map(function(a){return{key:a.key,value:JSON.stringify(a.value)}}):[]},_getDevice:function(a){return a?a.device:null},_getSuccessors:function(a,b){return this.async(this._resizeList.bind(this,"#inputsList")),a?b.getSuccessors(a.name):[[],[]]},_getPredecessors:function(a,b){return this.async(this._resizeList.bind(this,"#outputsList")),a?b.getPredecessors(a.name):[[],[]]},_getSubnodes:function(a){return a&&a.metagraph?a.metagraph.nodes():null},_getTotalPred:function(a){return a.regular.length+a.control.length},_getTotalSucc:function(a){return a.regular.length+a.control.length},_toggleControlPred:function(){this._openedControlPred=!this._openedControlPred},_toggleControlSucc:function(){this._openedControlSucc=!this._openedControlSucc},_toggleExpanded:function(){this._expanded=!this._expanded},_getToggleIcon:function(a){return a?"expand-less":"expand-more"},_resetState:function(){this._openedControlPred=!1,this._openedControlSucc=!1},_resizeList:function(a){var b=document.querySelector(a);b&&b.fire("iron-resize")}})}(),function(){Polymer({is:"tf-graph-info",properties:{title:String,graphHierarchy:Object,graph:Object,selectedNode:{type:String,notify:!0},highlightedNode:{type:String,notify:!0}},listeners:{"node-list-item-click":"_nodeListItemClicked","node-list-item-mouseover":"_nodeListItemMouseover","node-list-item-mouseout":"_nodeListItemMouseout"},_nodeListItemClicked:function(a){this.selectedNode=a.detail.nodeName},_nodeListItemMouseover:function(a){this.highlightedNode=a.detail.nodeName},_nodeListItemMouseout:function(){this.highlightedNode=null}})}(),Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(a){this.toggleClass("indeterminate",a,this.$.primaryProgress)},_transformProgress:function(a,b){var c="scaleX("+b/100+")";a.style.transform=a.style.webkitTransform=c},_mainRatioChanged:function(a){this._transformProgress(this.$.primaryProgress,a)},_progressChanged:function(a,b,c,d){a=this._clampValue(a),b=this._clampValue(b);var e=100*this._calcRatio(a),f=100*this._calcRatio(b);this._setSecondaryRatio(e),this._transformProgress(this.$.secondaryProgress,e),this._transformProgress(this.$.primaryProgress,f),this.secondaryProgress=a,this.setAttribute("aria-valuenow",b),this.setAttribute("aria-valuemin",c),this.setAttribute("aria-valuemax",d)},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false")},_hideSecondaryProgress:function(a){return 0===a}}),Polymer({is:"tf-graph-board",properties:{graphHierarchy:Object,graph:Object,graphName:String,hasStats:Boolean,progress:Object,colorByParams:{type:Object,notify:!0},_selectedNode:String,_highlightedNode:String},_isNotComplete:function(a){return a.value<100},_getContainerClass:function(a){var b="container";return a.error&&(b+=" error"),this._isNotComplete(a)&&(b+=" loading"),b}}),Polymer({is:"tf-graph-loader",properties:{progress:{type:Object,notify:!0,readOnly:!0},datasets:Array,hasStats:{type:Boolean,readOnly:!0,notify:!0},selectedDataset:Number,selectedFile:{type:Object,observer:"_selectedFileChanged"},outGraphHierarchy:{type:Object,readOnly:!0,notify:!0},outGraph:{type:Object,readOnly:!0,notify:!0},outGraphName:{type:String,readOnly:!0,notify:!0}},observers:["_selectedDatasetChanged(selectedDataset, datasets)"],_parseAndConstructHierarchicalGraph:function(a,b){var c=this;c._setProgress({value:0,msg:""});var e,d={setMessage:function(a){c._setProgress({value:c.progress.value,msg:a})},updateProgress:function(a){c._setProgress({value:c.progress.value+a,msg:c.progress.msg})},reportError:function(a){c._setProgress({value:c.progress.value,msg:a,error:!0})}},f=tf.getSubtaskTracker(d,30,"Data");tf.graph.parser.readAndParseData(a,b,f).then(function(a){var b=a.nodes;e=a.statsJson;var c={};c["Assign 0"]=!0,c["AssignAdd 0"]=!0,c["AssignSub 0"]=!0,c["assign 0"]=!0,c["assign_add 0"]=!0,c["assign_sub 0"]=!0,c["count_up_to 0"]=!0,c["ScatterAdd 0"]=!0,c["ScatterSub 0"]=!0,c["ScatterUpdate 0"]=!0,c["scatter_add 0"]=!0,c["scatter_sub 0"]=!0,c["scatter_update 0"]=!0;var f={enableEmbedding:!0,inEmbeddingTypes:["Const"],outEmbeddingTypes:["^[a-zA-Z]+Summary$"],refEdges:c},g=tf.getSubtaskTracker(d,20,"Graph");return tf.graph.build(b,f,g)}).then(function(a){this._setOutGraph(a),e&&tf.time("Joining stats info with graph...",function(){tf.graph.joinStatsInfoWithGraph(a,e)});var b={verifyTemplate:!0,groupSeries:!0},c=tf.getSubtaskTracker(d,50,"Namespace hierarchy");return tf.graph.hierarchy.build(a,b,c)}.bind(this)).then(function(a){this._setHasStats(null!=e),this._setOutGraphHierarchy(a)}.bind(this)).catch(function(a){d.reportError("Graph visualization failed: "+a)})},_selectedDatasetChanged:function(a,b){var c=b[a];this._parseAndConstructHierarchicalGraph(c),this._setOutGraphName(c.name)},_selectedFileChanged:function(a){if(a){var b=a.target.files[0];if(b){a.target.value="";var c=new FileReader;c.onload=function(a){this._parseAndConstructHierarchicalGraph(null,a.target.result)}.bind(this),c.readAsText(b)}}}}),function(){Polymer({is:"paper-menu",behaviors:[Polymer.IronMenuBehavior]})}(),function(){Polymer({is:"iron-overlay-backdrop",properties:{opened:{readOnly:!0,reflectToAttribute:!0,type:Boolean,value:!1},_manager:{type:Object,value:Polymer.IronOverlayManager}},prepare:function(){this.parentNode||(Polymer.dom(document.body).appendChild(this),this.style.zIndex=this._manager.currentOverlayZ()-1)},open:function(){this._manager.getBackdrops().length<2&&this._setOpened(!0)},close:function(){this._manager.getBackdrops().length<2&&this._setOpened(!1)},complete:function(){0===this._manager.getBackdrops().length&&this.parentNode&&Polymer.dom(this.parentNode).removeChild(this)}})}(),function(){"use strict";Polymer({is:"iron-dropdown",behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},positionTarget:{type:Object,observer:"_positionTargetChanged"},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1},_positionRectMemo:{type:Object}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],attached:function(){void 0===this.positionTarget&&(this.positionTarget=this._defaultPositionTarget)},get containedElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},get _focusTarget(){return this.focusTarget||this.containedElement},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _positionRect(){return!this._positionRectMemo&&this.positionTarget&&(this._positionRectMemo=this.positionTarget.getBoundingClientRect()),this._positionRectMemo},get _horizontalAlignTargetValue(){var a;return a="right"===this.horizontalAlign?document.documentElement.clientWidth-this._positionRect.right:this._positionRect.left,a+=this.horizontalOffset,Math.max(a,0)},get _verticalAlignTargetValue(){var a;return a="bottom"===this.verticalAlign?document.documentElement.clientHeight-this._positionRect.bottom:this._positionRect.top,a+=this.verticalOffset,Math.max(a,0)},_openedChanged:function(a){a&&this.disabled?this.cancel():(this.cancelAnimation(),this._prepareDropdown(),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments)),this.opened&&this._focusContent()},_renderOpened:function(){this.allowOutsideScroll||Polymer.IronDropdownScrollManager.pushScrollLock(this),!this.noAnimations&&this.animationConfig&&this.animationConfig.open?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("open")):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){Polymer.IronDropdownScrollManager.removeScrollLock(this),!this.noAnimations&&this.animationConfig&&this.animationConfig.close?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("close")):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove("animating"),this.opened?Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this)},_onIronResize:function(){var b,c,a=this.containedElement;a&&(b=a.scrollTop,c=a.scrollLeft),this.opened&&this._updateOverlayPosition(),Polymer.IronOverlayBehaviorImpl._onIronResize.apply(this,arguments),a&&(a.scrollTop=b,a.scrollLeft=c)},_positionTargetChanged:function(){this._updateOverlayPosition()},_updateAnimationConfig:function(){var a={},b=[];this.openAnimationConfig&&(a.open=[{name:"opaque-animation"}].concat(this.openAnimationConfig),b=b.concat(a.open)),this.closeAnimationConfig&&(a.close=this.closeAnimationConfig,b=b.concat(a.close)),b.forEach(function(a){a.node=this.containedElement},this),this.animationConfig=a},_prepareDropdown:function(){this.sizingTarget=this.containedElement||this.sizingTarget,this._updateAnimationConfig(),this._updateOverlayPosition()},_updateOverlayPosition:function(){this._positionRectMemo=null,this.positionTarget&&(this.style[this.horizontalAlign]=this._horizontalAlignTargetValue+"px",this.style[this.verticalAlign]=this._verticalAlignTargetValue+"px",this._fitInfo&&(this._fitInfo.inlineStyle[this.horizontalAlign]=this.style[this.horizontalAlign],this._fitInfo.inlineStyle[this.verticalAlign]=this.style[this.verticalAlign]))},_focusContent:function(){this.async(function(){this._focusTarget&&this._focusTarget.focus()})}})}(),function(){"use strict";var a=Polymer({is:"paper-menu-button",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:"fade-in-animation",timing:{delay:100,duration:200}},{name:"paper-menu-grow-width-animation",timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-grow-height-animation",timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,value:function(){return[{name:"fade-out-animation",timing:{duration:150}},{name:"paper-menu-shrink-width-animation",timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-shrink-height-animation",timing:{duration:200,easing:"ease-in"}}]}},_dropdownContent:{type:Object}},hostAttributes:{role:"group","aria-haspopup":"true"},listeners:{"iron-select":"_onIronSelect"},get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},open:function(){this.disabled||this.$.dropdown.open()},close:function(){
this.$.dropdown.close()},_onIronSelect:function(a){this.ignoreSelect||this.close()},_openedChanged:function(a,b){a?(this._dropdownContent=this.contentElement,this.fire("paper-dropdown-open")):null!=b&&this.fire("paper-dropdown-close")},_disabledChanged:function(a){Polymer.IronControlState._disabledChanged.apply(this,arguments),a&&this.opened&&this.close()}});a.ANIMATION_CUBIC_BEZIER="cubic-bezier(.3,.95,.5,1)",a.MAX_ANIMATION_TIME_MS=400,Polymer.PaperMenuButton=a}(),function(){"use strict";Polymer({is:"paper-dropdown-menu",behaviors:[Polymer.IronControlState,Polymer.IronButtonState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},opened:{type:Boolean,notify:!0,value:!1},noLabelFloat:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{role:"group","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function(){var a=this.contentElement;a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(a){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){var b="";b=a?a.label||a.textContent.trim():"",this._setValue(b),this._setSelectedItemLabel(b)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&this.value}})}(),function(){function c(a,b,d){return d=null==d?0:d,d+1<b.length&&a>=b[d+1].numUnits?c(a/b[d+1].numUnits,b,d+1):a.toPrecision(3)-0+" "+b[d].symbol}Polymer({is:"tf-graph-controls",ready:function(){d3.select(this.$["summary-icon"]).attr("xlink:href","../../../static/tb/summary-icon.svg")},properties:{hasStats:{type:Boolean},colorBy:{type:String,notify:!0,computed:"_getColorBy(_colorByIndex)"},colorByParams:Object,datasets:{type:Array,observer:"_datasetsChanged"},selectedDataset:{type:Number,notify:!0,value:0},selectedFile:{type:Object,notify:!0},_colorByIndex:{type:Number,value:0},_currentGradientParams:{type:Object,computed:"_getCurrentGradientParams(colorByParams, colorBy)"}},_getColorBy:function(a){return["structure","device","compute_time","memory"][a]},_getBackgroundColor:function(a){return"background-color:"+a},fit:function(){document.querySelector("#scene").fit()},_isGradientColoring:function(a){return["compute_time","memory"].indexOf(a)!==-1},_equals:function(a,b){return a===b},_getCurrentGradientParams:function(d,e){if(this._isGradientColoring(e)){var f=d[e],g=f.minValue,h=f.maxValue;return"memory"===e?(g=c(g,a),h=c(h,a)):"compute_time"===e&&(g=c(g,b),h=c(h,b)),{minValue:g,maxValue:h,startColor:f.startColor,endColor:f.endColor}}},_updateFileInput:function(a){this.set("selectedFile",a)},_datasetsChanged:function(a,b){null==b&&null!=this.selected||this.set("selectedDataset",0)},_getFile:function(){this.$.file.click()}});var a=[{symbol:"B"},{symbol:"KB",numUnits:1024},{symbol:"MB",numUnits:1024},{symbol:"GB",numUnits:1024},{symbol:"TB",numUnits:1024},{symbol:"PB",numUnits:1024}],b=[{symbol:"s"},{symbol:"ms",numUnits:1e3},{symbol:"s",numUnits:1e3},{symbol:"min",numUnits:60},{symbol:"hr",numUnits:60},{symbol:"days",numUnits:24}]}(),Polymer({is:"tf-graph-basic",properties:{hasStats:Boolean,pbtxt:{type:String,observer:"_updateGraph"},_progress:Object},_updateGraph:function(){this.$.loader._parseAndConstructHierarchicalGraph(null,this.pbtxt)}});